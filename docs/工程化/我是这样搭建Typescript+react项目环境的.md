---
typora-copy-images-to: æˆ‘æ˜¯è¿™æ ·æ­å»ºTypescript+reacté¡¹ç›®ç¯å¢ƒçš„-imgs
---

https://github.com/vortesnail/blog/issues/14

## å‰è¨€

ç°åœ¨æˆ‘ä»¬å¼€å‘ä¸€ä¸ª React é¡¹ç›®æœ€å¿«çš„æ–¹å¼ä¾¿æ˜¯ä½¿ç”¨ Facebook å®˜æ–¹å¼€æºçš„è„šæ‰‹æ¶ [create-react-app](https://github.com/facebook/create-react-app) ï¼Œä½†æ˜¯éšç€ä¸šåŠ¡åœºæ™¯çš„å¤æ‚åº¦æå‡ï¼Œéš¾å…ä¼šéœ€è¦æˆ‘ä»¬å†å»æ·»åŠ æˆ–ä¿®æ”¹ä¸€äº›é…ç½®ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœå¯¹ webpack ä¸å¤Ÿç†Ÿç»ƒçš„è¯ï¼Œä¼šæ¯”è¾ƒè‰°éš¾ï¼Œé‚£ç§æ— åŠ›çš„æ„Ÿè§‰ï¼Œå°±å¥½åƒæ˜¯å¥³æœ‹å‹åœ¨æ—è¾¹å¹²æ‰°ä½ æ‰“æ¸¸æˆä¸€æ ·ï¼Œè®©äººç„¦ç¼ä¸”æ— å¯å¥ˆä½•ã€‚

è¿™ç¯‡æ–‡ç« çš„ä¸»è¦ç›®çš„æ˜¯è®©å¤§å®¶ï¼ˆæ–°æ‰‹ï¼‰å¯¹**webpack æ„å»º react + typescript é¡¹ç›®å¼€å‘ç¯å¢ƒ**æœ‰ä¸€ä¸ªå¾ˆæ„Ÿæ€§çš„è®¤çŸ¥ï¼Œä»¥åŠ **ä¼šé…åˆä½¿ç”¨ rollup æ‰“åŒ…ç»„ä»¶å¹¶å‘å¸ƒè‡³ npm å…¨æµç¨‹**ï¼Œå¦ç™½è¯´ï¼Œç›¸å…³çš„æ–‡ç« çœŸçš„å¾ˆå¤šäº†ï¼Œä½†æ˜¯æˆ‘ä»ç„¶æƒ³å†å†™ä¸€ç¯‡å±äºæˆ‘è‡ªå·±é£æ ¼çš„æ–‡ç« ï¼Œä»€ä¹ˆé£æ ¼å‘¢ï¼Ÿ

> 1.ä»é›¶å¼€å§‹æ­å»ºè‡³å®Œæ•´çš„é¡¹ç›®å¼€å‘ç¯å¢ƒæµç¨‹ï¼
> 2.å°½é‡åšåˆ°æ¯ä¸€æ­¥æ“ä½œã€æ¯ä¸€è¡Œä»£ç éƒ½èƒ½å°½é‡è§£é‡Šç»™è¯»è€…ï¼
> 3.è‹¥å®Œå…¨è·Ÿç€åšä¸‹æ¥ï¼Œä¸€å®šèƒ½å®ç°åŒæ ·çš„åŠŸèƒ½ï¼

## ä½ èƒ½å­¦åˆ°ä»€ä¹ˆï¼Ÿ

å¸Œæœ›åœ¨ä½ é˜…è¯»æœ¬ç¯‡æ–‡ç« ä¹‹åï¼Œä¸ä¼šè§‰å¾—æµªè´¹äº†æ—¶é—´ã€‚å¦‚æœä½ è·Ÿç€è¯»ä¸‹æ¥ï¼Œä½ å°†ä¼šå­¦åˆ°ï¼š

- ğŸ‹ é¡¹ç›®ä¸­å¸¸ç”¨é…ç½®æ–‡ä»¶çš„ä½œç”¨åŠé…ç½®æ–¹å¼
- ğŸŠ eslintã€stylelint åŠ prettier çš„é…ç½®
- ğŸ‰ ä»£ç æäº¤è§„èŒƒçš„ç¬¬ä¸‰æ–¹å·¥å…·å¼ºåˆ¶çº¦æŸæ–¹å¼å®ç°
- ğŸ“ webpack é…ç½® react + typescript å¼€å‘ä¸ç”Ÿäº§ç¯å¢ƒåŠä¼˜åŒ–
- ğŸ‘ rollup æ„å»ºç»„ä»¶æ‰“åŒ…ç¯å¢ƒå¹¶å‘å¸ƒè‡³ npm çš„å…¨æµç¨‹
- ğŸ åˆ©ç”¨ react-testing-library å¯¹ react ç»„ä»¶è¿›è¡Œæµ‹è¯•
- ğŸ¥ æŒç»­é›†æˆï¼ˆCIï¼‰ã€Github Actions

## é¡¹ç›®åˆå§‹åŒ–åŠé…ç½®

å¤§å®¶å¯¹ github ä¸€å®šå¾ˆç†Ÿæ‚‰äº†ï¼Œå„å¼å„æ ·çš„å¼€æºå·¥å…·ä¸€å®šä¹Ÿæ˜¯ç»å¸¸è¢«å¤§å®¶ç”¨åˆ°ï¼Œç”¨ä¹…äº†è‡ªå·±ä¹Ÿæƒ³å¯¹å¼€æºç¤¾åŒºåšä¸€äº›è´¡çŒ®ï¼Œå¥ˆä½•å„ç§é…ç½®å¤ªè¿‡ç¹çï¼ŒåŠé€€äº†ä¸€å¤§éƒ¨åˆ†çƒ­å¿ƒçš„å¼€å‘è€…ï¼Œæˆ‘å½“åˆå°±æ˜¯æœ‰å¾ˆå¤šæƒ³æ³•ï¼Œä½†æ˜¯åªä¼šå†™ä»£ç ï¼Œçœ‹åˆ«äººçš„å¼€æºé¡¹ç›®ä¸€å †é…ç½®æ–‡ä»¶ï¼Œçœ‹çš„å¤´çš®å‘éº»ï¼Œå†æƒ³æƒ³è‡ªå·±å…¨éƒ½çœ‹ä¸æ‡‚ï¼Œæƒ³æƒ³å°±ç®—å¼€å‘å‡ºæ¥äº†ï¼Œåˆ«äººä¹Ÿä¼šè§‰å¾—ä¸ä¸“ä¸šï¼Œå°±æŠ±ç€è¿™ç§å¿ƒæ€ç›´æ¥æ”¾å¼ƒäº†ï½

![image.png](https://camo.githubusercontent.com/fb686b33b3de30bc5367c5df10ac0d760ce5fb86845677e26373ec3eaa28aa0c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343338373334353633312d63626262633230632d646666382d346330632d383165652d3133326662356662663138392e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323032266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343034266f726967696e57696474683d3436352673697a653d323536363236267374617475733d646f6e65267374796c653d6e6f6e652677696474683d3233322e35)

åˆ«æ…Œï¼Œçœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œè¯¥ä¼šçš„éƒ½ä¼šäº†ï¼
é‚£æˆ‘ä»¬ç°åœ¨å°±ä» github æ–°å»ºä¸€ä¸ªå¼€å‘è„šæ‰‹æ¶é¡¹ç›®å¼€å§‹å§ï½

è¿™ä¸€æ­¥åªéœ€è¦åœ¨ github ä¸»é¡µå³ä¸Šè§’ç‚¹å‡»â€œ+â€ç„¶å `New repository` ä¹‹åè¿›è¡Œé¡¹ç›®åå­—åŠé¡¹ç›®æè¿°çš„å¡«å†™ï¼Œé€‰æ‹©ä¸€ä¸ªå¼€æºåè®®å³å¯ç¡®å®šåˆ›å»ºå®Œæˆï¼ˆæ¯”å¦‚æˆ‘æ–°å»ºçš„ä¸€ä¸ªé¡¹ç›®ä¾¿ä¸º [react-ts-quick-starter](https://github.com/vortesnail/react-ts-quick-starter) ï¼Œæ¬¢è¿å¤§å®¶ pr ä»¥åŠ starğŸŒŸã€‚ï¼‰ï¼Œè¿›å…¥åˆ°é¡¹ç›®ä¸»é¡µä¹‹åï¼Œç‚¹å‡»ç»¿æ²¹æ²¹çš„ `Code` å¤§æŒ‰é”®ï¼Œå¤åˆ¶ SSH é“¾æ¥ï¼Œå›åˆ°æˆ‘ä»¬çš„æ¡Œé¢ï¼Œæ‰“å¼€ç»ˆç«¯ï¼ˆæ§åˆ¶å°ï¼‰ï¼Œåˆ‡æ¢åˆ°ä½ æƒ³è¦çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š

```
# æ³¨æ„ä»¥ä¸‹çš„ ssh è¿æ¥è¦æ˜¯è‡ªå·±é¡¹ç›®ä¸‹å¤åˆ¶çš„
git clone git@github.com:vortesnail/react-ts-quick-starter.git
```

å½“ clone å®Œæˆä¹‹åï¼Œä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬çš„ vscode è¯¥ä¸Šåœºäº†ï¼
æˆ‘ä¸ªäººæ¯”è¾ƒä¹ æƒ¯äºä½¿ç”¨ vscode è‡ªå¸¦çš„ç»ˆç«¯ï¼Œæ‰“å¼€é»˜è®¤çš„ç»ˆç«¯å¿«æ·é”®ä¸º `ctrl + åå¼•å·` ï¼Œå½“å‰ç›®å½•é»˜è®¤å°±ä¸ºé¡¹ç›®ç›®å½•ã€‚

### 1. package.json

æ¯ä¸€ä¸ªé¡¹ç›®éƒ½éœ€è¦ä¸€ä¸ª `package.json` æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®°å½•é¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„é¡¹ç›®åç§°ã€åŒ…çš„å…¥å£æ–‡ä»¶ã€é¡¹ç›®ç‰ˆæœ¬ç­‰ï¼Œä¹Ÿä¼šè®°å½•æ‰€éœ€çš„å„ç§ä¾èµ–ï¼Œè¿˜æœ‰å¾ˆé‡è¦çš„ `script` å­—æ®µï¼Œå®ƒæŒ‡å®šäº†è¿è¡Œè„šæœ¬å‘½ä»¤çš„ `npm` å‘½ä»¤è¡Œç¼©å†™ã€‚

é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°±èƒ½å¿«é€Ÿç”Ÿæˆè¯¥æ–‡ä»¶ï¼š

```
npm init -y
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `yarn` æ¥è¿›è¡Œç”Ÿæˆï¼Œä½†æ˜¯æˆ‘ä¸ªäººè¿˜æ˜¯å¯¹ `npm` æ›´ä¹ æƒ¯äº›ï¼Œæ‰€ä»¥æˆ‘ä¹‹åéƒ½ä¼šç”¨ `npm` æ¥è¿›è¡Œä¾èµ–åŒ…çš„å®‰è£…ã€‚

é€šè¿‡ä¿®æ”¹ç”Ÿæˆçš„é»˜è®¤é…ç½®ï¼Œç°åœ¨çš„å†…å®¹å¦‚ä¸‹ï¼š

```
{
  "name": "react-ts-quick-starter",
  "version": "1.0.0",
  "description": "Quickly create react + typescript project development environment and scaffold for developing npm package components",
  "main": "index.js",
  "scripts": {},
  "repository": {
    "type": "git",
    "url": "git+https://github.com/vortesnail/react-ts-quick-starter.git"
  },
  "keywords": ["react-project", "typescript-project", "react-typescript", "react-ts-quick-starter"],
  "author": {
    "name": "vortesnail",
    "url": "https://github.com/vortesnail",
    "email": "1091331061@qq.com"
  },
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/vortesnail/react-ts-quick-starter/issues"
  },
  "homepage": "https://github.com/vortesnail/react-ts-quick-starter#readme"
}
```

æš‚æ—¶ä¿®æ”¹äº†ä»¥ä¸‹é…ç½®ï¼š

- `description` ï¼šå¢åŠ äº†å¯¹è¯¥é¡¹ç›®çš„æè¿°ï¼Œgithub è¿›è¡Œ repo æœç´¢æ—¶ï¼Œå…³é”®å­—åŒ¹é…ä¼šä½¿ä½ çš„é¡¹ç›®æ›´å®¹æ˜“è¢«æœç´¢åˆ°ã€‚
- `scripts` ï¼šæŠŠé»˜è®¤ç”Ÿæˆçš„åˆ äº†ï¼Œæ²¡å•¥ç”¨ã€‚
- `keywords` ï¼šå¢åŠ äº†é¡¹ç›®å…³é”®å­—ï¼Œå…¶ä»–å¼€å‘è€…åœ¨ npm ä¸Šæœç´¢çš„æ—¶å€™ï¼Œé€‚åˆçš„å…³é”®å­—èƒ½ä½ çš„åŒ…æ›´å®¹æ˜“è¢«æœç´¢åˆ°ã€‚
- `author` ï¼šæ·»åŠ äº†æ›´å…·ä½“çš„ä½œè€…ä¿¡æ¯ã€‚
- `license` ï¼šä¿®æ”¹ä¸º[MIT](https://opensource.org/licenses/MIT)åè®®ã€‚

### 2. LICENSE

æˆ‘ä»¬åœ¨å»ºä»“åº“çš„æ—¶å€™ä¼šæœ‰é€‰é¡¹è®©æˆ‘ä»¬é€‰æ‹©å¼€æºåè®®ï¼Œæˆ‘å½“æ—¶å°±é€‰äº†MITåè®®ï¼Œå¦‚æœæ²¡é€‰çš„ä¹Ÿä¸è¦ç´§ï¼Œå»ç½‘ç«™ [choosealicense](http://choosealicense.online/) é€‰æ‹©åˆé€‚çš„ licenseï¼ˆä¸€èˆ¬ä¼šé€‰å®½æ¾çš„ MIT åè®®ï¼‰ï¼Œå¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `LICENSE` æ–‡ä»¶å†…å³å¯ï¼Œç„¶åä¿®æ”¹ä½œè€…åå’Œå¹´ä»½ï¼Œå¦‚ä¸‹ï¼š

```
MIT License

Copyright (c) 2020 chen xin

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights...
```

### 3. .gitignore

è¯¥æ–‡ä»¶å†³å®šäº†é¡¹ç›®è¿›è¡Œ git æäº¤æ—¶æ‰€éœ€è¦å¿½ç•¥æ‰çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œç¼–è¾‘å™¨å¦‚ vscode ä¹Ÿä¼šç›‘å¬ `.gitignore` ä¹‹å¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œå¿½ç•¥çš„æ–‡ä»¶æœ‰æ‰€å˜åŠ¨æ—¶ï¼Œåœ¨è¿›è¡Œ git æäº¤æ—¶å°±ä¼šè¢«è¯†åˆ«ä¸ºéœ€è¦æäº¤çš„æ–‡ä»¶ã€‚

`node_modules` æ˜¯æˆ‘ä»¬å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–çš„æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªè‚¯å®šè¦æ·»åŠ è‡³ `.gitignore` ä¸­ï¼Œä¸”ä¸è¯´è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢æˆåƒä¸Šä¸‡çš„æ–‡ä»¶ä¼šç»™ç¼–è¾‘å™¨å¸¦æ¥æ€§èƒ½å‹åŠ›ï¼Œä¹Ÿä¼šç»™æäº¤è‡³è¿œç«¯çš„æœåŠ¡å™¨é€ æˆä¸å°æŸå¤±ï¼Œå¦å¤–å°±æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ä¸œè¥¿ï¼Œå®Œå…¨å¯ä»¥é€šè¿‡ç®€å•çš„ `npm install` å°±èƒ½å¾—åˆ°ï½

æ‰€ä»¥ä¸éœ€è¦ä¸Šä¼ è‡³ git ä»“åº“çš„éƒ½è¦æ·»åŠ è¿›æ¥ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„ `build` ã€ `dist` ç­‰ï¼Œè¿˜æœ‰æ“ä½œç³»ç»Ÿé»˜è®¤ç”Ÿæˆçš„ï¼Œæ¯”å¦‚ MacOs ä¼šç”Ÿæˆå­˜å‚¨é¡¹ç›®æ–‡ä»¶å¤¹æ˜¾ç¤ºå±æ€§çš„ `DS_Store` æ–‡ä»¶ã€‚

[![image.png](https://camo.githubusercontent.com/b887309b1c464b8c7db4cafb0cea0b2e335fd10688f6da1ec607acbb9ed5a71f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343134303432303434372d66316536316239302d353038662d343437342d393033642d3931336463326538366263322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313438266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323936266f726967696e57696474683d313930362673697a653d3737353635267374617475733d646f6e65267374796c653d6e6f6e652677696474683d393533)](https://camo.githubusercontent.com/b887309b1c464b8c7db4cafb0cea0b2e335fd10688f6da1ec607acbb9ed5a71f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343134303432303434372d66316536316239302d353038662d343437342d393033642d3931336463326538366263322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313438266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323936266f726967696e57696474683d313930362673697a653d3737353635267374617475733d646f6e65267374796c653d6e6f6e652677696474683d393533)

é‚£ä¹ˆè¿™äº›ç³»ç»Ÿæˆ–ç¼–è¾‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä½†æ˜¯åˆä¸è¢«æˆ‘ä»¬å¾ˆå®¹æ˜“æŸ¥çŸ¥çš„è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä½¿ç”¨ vscode çš„ [gitignore](https://marketplace.visualstudio.com/items?itemName=codezombiech.gitignore) æ’ä»¶ï¼Œä¸‹è½½å®‰è£…è¯¥æ’ä»¶ä¹‹åï¼Œ `ctrl+shift+p` å¬å”¤å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ `Add gitignore` å‘½ä»¤ï¼Œå³å¯åœ¨è¾“å…¥æ¡†è¾“å…¥ç³»ç»Ÿæˆ–ç¼–è¾‘å™¨åå­—ï¼Œæ¥è‡ªåŠ¨æ·»åŠ éœ€è¦å¿½ç•¥çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è‡³ `.gitignore` ä¸­ã€‚

[![123.gif](https://camo.githubusercontent.com/588f1b35538d6ef50a215fb8453602ae776917e18db9c663d635ae55d293e9d8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343231363131383633342d31643762373431642d323639352d346136362d396139352d3937323632343939616238352e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d353637266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d3132332e676966266f726967696e4865696768743d353637266f726967696e57696474683d3830302673697a653d33353637343536267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)](https://camo.githubusercontent.com/588f1b35538d6ef50a215fb8453602ae776917e18db9c663d635ae55d293e9d8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343231363131383633342d31643762373431642d323639352d346136362d396139352d3937323632343939616238352e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d353637266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d3132332e676966266f726967696e4865696768743d353637266f726967696e57696474683d3830302673697a653d33353637343536267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)

æˆ‘æ·»åŠ äº†ä»¥ä¸‹ï¼š `Node` ã€ `Windows` ã€ `MacOS` ã€ `SublimeText` ã€ `Vim` ã€ `Vscode` ï¼Œå¤§å®¶é…Œæƒ…æ·»åŠ å§ã€‚å¦‚æœé»˜è®¤ä¸­æ²¡æœ‰çš„ï¼Œå¯è‡ªè¡Œæ‰‹åŠ¨è¾“å…¥è‡³ `.gitignore` ä¸­ï¼Œæ¯”å¦‚æˆ‘è‡ªå·±åŠ äº† `dist/` å’Œ `build/` ï¼Œç”¨äºå¿½ç•¥ä¹‹åwebpack æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ã€‚

### 4. .npmrc

å¤§å®¶ä¸€å¼€å§‹ä½¿ç”¨ npm å®‰è£…ä¾èµ–åŒ…æ—¶ï¼Œè‚¯å®šæ„Ÿå—è¿‡é‚£æŒ¤ç‰™è†èˆ¬çš„ä¸‹è½½é€Ÿåº¦ï¼Œä¸Šç½‘ä¸€æŸ¥åªéœ€è¦å°† npm æºè®¾ç½®ä¸ºæ·˜å®é•œåƒæºå°±è¡Œï¼Œåœ¨æ§åˆ¶å°æ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹å‘½ä»¤ï¼š

```
npm config set registry https://registry.npm.taobao.org
```

ä»æ­¤è¿‡ä¸Šäº†**é€Ÿåº¦ä¸ƒåè¿ˆï¼Œå¿ƒæƒ…æ˜¯è‡ªç”±è‡ªåœ¨**çš„ç”Ÿæ´»ã€‚

ä½†æ˜¯å¤§å®¶æƒ³æƒ³ï¼Œä¸‡ä¸€æŸä¸ªåŒå­¦å…‹éš†äº†ä½ çš„é¡¹ç›®ä¹‹åï¼Œå‡†å¤‡åœ¨ä»–æœ¬åœ°å¼€å‘çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰è®¾ç½®æ·˜å®é•œåƒæºï¼Œåˆè¦äººå®¶å»æ‰‹åŠ¨è®¾ç½®ä¸€éï¼Œæˆ‘ä»¬ä½œä¸ºé¡¹ç›®çš„å‘èµ·è€…ï¼Œå°±å…ˆç»™åˆ«äººçœä¸‹è¿™ä»½æ—¶é—´å§ï¼Œåªéœ€è¦åœ¨æ ¹ç›®å½•æ·»åŠ ä¸€ä¸ª `.npmrc` å¹¶åšç®€å•çš„é…ç½®å³å¯ï¼š

```
# åˆ›å»º .npmrc æ–‡ä»¶
touch .npmrc
# åœ¨è¯¥æ–‡ä»¶å†…è¾“å…¥é…ç½®
registry=https://registry.npm.taobao.org/
```

### 5. README.md

ä½ åªè¦ä¸Š github æ‰¾ä»»ä½•ä¸€ä¸ªé¡¹ç›®ï¼Œç‚¹è¿›å»ä¹‹åå¾€ä¸‹æ‹‰ä¸€ç‚¹ï¼Œçœ‹åˆ°çš„å¯¹é¡¹ç›®çš„ç›´æ¥è¯´æ˜å°±æ˜¯ `README.md` æ‰€å‘ˆç°çš„ï¼Œè¿™ä¸ªæ–‡ä»¶æ— æ¯”é‡è¦ï¼Œä¸€ä¸ªå¥½çš„å¼€æºé¡¹ç›®å¿…é¡»ï¼å¿…é¡»ï¼å¿…é¡»ï¼æœ‰ä¸€ä¸ªç®€æ˜ä¸”ç¾è§‚çš„ `README.md` ï¼Œä¸è¿‡æ–‡ç« å†™åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„è¿™ä¸ªè„šæ‰‹æ¶å¹¶æ²¡æœ‰ä»»ä½•å®è´¨æ€§çš„å†…å®¹ï¼Œä¹‹åå®Œå…¨é…ç½®å®Œä¹‹åï¼Œä¼šå†å¥½å¥½ä¹¦å†™ä¸€ä¸‹ã€‚

åç»­æˆ‘è¿˜ä¼šå†å¯¹è¿™éƒ¨åˆ†å†…å®¹åšè¡¥å……ï¼Œç°åœ¨å¤§å®¶å…ˆ `touch README.md` åˆ›å»ºæ–‡ä»¶ï¼Œç„¶åéšæ„å†™ç‚¹ä¸œè¥¿å…ˆçœ‹ç€ï½

## è§„èŒƒä»£ç ä¸æäº¤

å¤šäººå…±åŒå¼€å‘ä¸€ä¸ªé¡¹ç›®çš„å¾ˆå¤§é—®é¢˜å°±æ˜¯æ¯ä¸ªå¼€å‘è€…ä»£ç é£æ ¼éƒ½æœ‰æ‰€å·®å¼‚ï¼Œéšç€ç‰ˆæœ¬ä¸æ–­è¿­ä»£ï¼Œç»´æŠ¤äººå‘˜ä¸æ–­æ›´æ¢ï¼Œè¿™ä¸ªé¡¹ç›®å°†ä¼šå˜å¾—è¶Šæ¥è¶Šéš¾ç»´æŠ¤ï¼Œå› ä¸ºåäººåŸºæœ¬ä¸å¯èƒ½å†çœ‹æ‡‚äº†ã€‚æ¯”å¦‚å°è¿ˆã€å°å…‹ã€å°å°”ä¸‰ä¸ªå¼€å‘è€…çš„é£æ ¼å¦‚ä¸‹ï¼š

```
// å°è¿ˆ ç´§å‡‘å‹
const add=(a,b)=>{
  return a+b;
}

// å°å…‹ è§„èŒƒå‹
const add = (a, b) => {
    return a + b
}

// å°å°” æ¾ç´§çš†å¯å‹
var add = (a,b) => {
  return a+b
}
```

è¯·é—®å¦‚æœä½ åˆšåŠ å…¥ä¸€ä¸ªå›¢é˜Ÿï¼Œæ‰€è¦å‚ä¸çš„é¡¹ç›®ä¸­æœ‰è¿™å‡ ç§ä»£ç é£æ ¼ï¼Œä½ ä¼šä¸ä¼šè§‰å¾—â€œ**äººé—´ä¸å€¼å¾—â€**ï¼Ÿ

[![image.png](https://camo.githubusercontent.com/ec2c86001b3d31c1e3f853fdc23f53ea41f7e878eb6cd3b54674155258c7b2ed/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343231373833323436322d37353130613438362d363332352d346336662d386535352d6531376439363263633737662e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313132266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323234266f726967696e57696474683d3232342673697a653d3335313432267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313132)](https://camo.githubusercontent.com/ec2c86001b3d31c1e3f853fdc23f53ea41f7e878eb6cd3b54674155258c7b2ed/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343231373833323436322d37353130613438362d363332352d346336662d386535352d6531376439363263633737662e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313132266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323234266f726967696e57696474683d3232342673697a653d3335313432267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313132)

å¦‚æœæˆ‘ä»¬ä¸€å¼€å§‹å°±æœ‰æ‰‹æ®µèƒ½å¤Ÿçº¦æŸå¤§å®¶çš„ä»£ç é£æ ¼ï¼Œä½¿å…¶è¶‹äºç»Ÿä¸€ï¼Œå°†ä¼šæå¤§åœ°å¢å¼ºä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯èƒ½æé«˜æˆ‘ä»¬å¼€å‘çš„å¹¸ç¦åº¦ã€‚

å½“ç„¶äº†ï¼Œä½œä¸ºå¼€æºé¡¹ç›®ï¼Œä»£ç çš„æäº¤è§„èŒƒä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦éµå®ˆçš„ï¼Œè¿™ä¸ªæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹å·¥å…·æ¥å¼ºåˆ¶çº¦æŸï¼Œä¸è¦å¤ªç¾æ»‹æ»‹å•Šï¼Œæ—¢èƒ½ä½¿é¡¹ç›®çš„æäº¤æ›´åŠ è§„èŒƒï¼Œè¿˜èƒ½ä¸æ–­åœ°é”»ç‚¼è‡ªå·±çš„**è§„èŒƒæ€§æ€ç»´ï¼Œ**è¿™å¯¹äºæ— è®ºæ˜¯å¼€æºé¡¹ç›®è¿˜æ˜¯å›¢é˜Ÿé¡¹ç›®ï¼Œéƒ½æ˜¯å¤§æœ‰è£¨ç›Šçš„ã€‚

### 1. EditorConfig

`.editorconfig` æ˜¯è·¨ç¼–è¾‘å™¨ç»´æŠ¤ä¸€è‡´ç¼–ç é£æ ¼çš„é…ç½®æ–‡ä»¶ï¼Œæœ‰çš„ç¼–è¾‘å™¨ä¼šé»˜è®¤é›†æˆè¯»å–è¯¥é…ç½®æ–‡ä»¶çš„åŠŸèƒ½ï¼Œä½†æ˜¯ vscode éœ€è¦å®‰è£…ç›¸åº”çš„æ‰©å±• [EditorConfig For vs Code](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig) ã€‚

[![image.png](https://camo.githubusercontent.com/9daa70ae703af0e92f51569b6f57070bd850343f0d9336430f0ae475010c9ff5/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343232313134393132352d62343835373230642d393564372d343537612d616531302d6437353337623534336132322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313732266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333434266f726967696e57696474683d313530342673697a653d313131353234267374617475733d646f6e65267374796c653d6e6f6e652677696474683d373532)](https://camo.githubusercontent.com/9daa70ae703af0e92f51569b6f57070bd850343f0d9336430f0ae475010c9ff5/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343232313134393132352d62343835373230642d393564372d343537612d616531302d6437353337623534336132322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313732266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333434266f726967696e57696474683d313530342673697a653d313131353234267374617475733d646f6e65267374796c653d6e6f6e652677696474683d373532)

å®‰è£…å®Œæ­¤æ‰©å±•åï¼Œåœ¨ vscode ä¸­ä½¿ç”¨å¿«æ·é”® `ctrl+shift+p` æ‰“å¼€å‘½ä»¤å°ï¼Œè¾“å…¥ `Generate .editorcofig` å³å¯å¿«é€Ÿç”Ÿæˆ `.editorconfig` æ–‡ä»¶ï¼Œå½“ç„¶ï¼Œæœ‰æ—¶å€™ vscode æŠ½é£æ‰¾ä¸åˆ°å‘½ä»¤ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œæ¯”å¦‚æˆ‘å°±ç»å¸¸é‡åˆ°è¾“å…¥è¯¥å‘½ä»¤æ²¡ç”¨ï¼Œéœ€è¦é‡å¯æ‰ä¼šé‡æ–°å‡ºç°ï¼Œé‚£ä¹ˆå°±æ‰‹åŠ¨åˆ›å»ºè¯¥æ–‡ä»¶ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚

è¯¥æ–‡ä»¶çš„é…ç½®ç‰¹åˆ«ç®€å•ï¼Œå°±å°‘è®¸çš„å‡ ä¸ªé…ç½®ï¼Œæ¯”å¦‚æˆ‘çš„é…ç½®å¦‚ä¸‹ï¼š

```
root = true

[*]
indent_style = space
indent_size = 2
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true
end_of_line = lf

[*.md]
trim_trailing_whitespace = false
```

æ‰©å±•è£…å®Œï¼Œé…ç½®é…å®Œï¼Œç¼–è¾‘å™¨å°±ä¼šå»é¦–å…ˆè¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¹ç¼©è¿›é£æ ¼ã€ç¼©è¿›å¤§å°åœ¨æ¢è¡Œæ—¶ç›´æ¥æŒ‰ç…§é…ç½®çš„æ¥ï¼Œåœ¨ä½  `ctrl+s` ä¿å­˜æ—¶ï¼Œå°±ä¼šæŒ‰ç…§é‡Œé¢çš„è§„åˆ™è¿›è¡Œä»£ç æ ¼å¼åŒ–ã€‚ä»¥ä¸‹æ˜¯ä¸Šè¿°é…ç½®çš„ç®€å•ä»‹ç»ï¼š

- `indent_style` ï¼šç¼©è¿›é£æ ¼ï¼Œå¯é€‰é…ç½®æœ‰ `tab` å’Œ `space` ã€‚
- `indent_size` ï¼šç¼©è¿›å¤§å°ï¼Œå¯è®¾å®šä¸º `1-8` çš„æ•°å­—ï¼Œæ¯”å¦‚è®¾å®šä¸º `2` ï¼Œé‚£å°±æ˜¯ç¼©è¿› `2` ä¸ªç©ºæ ¼ã€‚
- `charset` ï¼šç¼–ç æ ¼å¼ï¼Œé€šå¸¸éƒ½æ˜¯é€‰ `utf-8` ã€‚
- `trim_trailing_whitespace` ï¼šå»é™¤å¤šä½™çš„ç©ºæ ¼ï¼Œæ¯”å¦‚ä½ ä¸å°å¿ƒåœ¨å°¾å·´å¤šæ‰“äº†ä¸ªç©ºæ ¼ï¼Œå®ƒä¼šç»™ä½ è‡ªåŠ¨å»æ‰ã€‚
- `insert_final_newline` ï¼šåœ¨å°¾éƒ¨æ’å…¥ä¸€è¡Œï¼Œä¸ªäººå¾ˆå–œæ¬¢è¿™ä¸ªé£æ ¼ï¼Œå½“æœ€åä¸€è¡Œä»£ç å¾ˆé•¿çš„æ—¶å€™ï¼Œä½ åˆæƒ³å¯¹è¯¥è¡Œä»£ç æ¯”è¾ƒé åçš„ä½ç½®ç¼–è¾‘æ—¶ï¼Œä¸è¦å¤ªå¥½ç”¨å“¦ï¼Œå»ºè®®å¤§å®¶ä¹Ÿå¼€ä¸Šã€‚
- `end_of_line` ï¼šæ¢è¡Œç¬¦ï¼Œå¯é€‰é…ç½®æœ‰ `lf` ï¼Œ`cr` ï¼Œ`crlf` ï¼Œä¼šæœ‰ä¸‰ç§çš„åŸå› æ˜¯å› ä¸ºå„ä¸ªæ“ä½œç³»ç»Ÿä¹‹é—´çš„æ¢è¡Œç¬¦ä¸ä¸€è‡´ï¼Œè¿™é‡Œæœ‰å†å²åŸå› ï¼Œæœ‰å…´è¶£çš„åŒå­¦è‡ªè¡Œäº†è§£å§ï¼Œè®¸å¤šæœ‰åçš„å¼€æºåº“éƒ½æ˜¯ä½¿ç”¨ `lf` ï¼Œæˆ‘ä»¬å§‘ä¸”ä¹Ÿè·Ÿè·Ÿé£å§ã€‚

å› ä¸º `markdown` è¯­æ³•ä¸­ï¼Œæˆ‘æƒ³è¦æ¢è¡Œéœ€è¦åœ¨ä¸Šä¸€è¡Œå¤šæ‰“ 2 ä¸ªä»¥ä¸Šçš„ç©ºæ ¼ï¼Œä¸ºäº†ä¸å½±å“è¯¥è¯­æ³•ï¼Œæ•… `.md` æ–‡ä»¶ä¸­æŠŠ**å»é™¤å¤šä½™ç©ºæ ¼**å…³æ‰äº†ã€‚

### 2. Prettier

å¦‚æœè¯´ `EditorConfig` å¸®ä½ ç»Ÿä¸€ç¼–è¾‘å™¨é£æ ¼ï¼Œé‚£ `Prettier` å°±æ˜¯å¸®ä½ ç»Ÿä¸€é¡¹ç›®é£æ ¼çš„ã€‚ `Prettier` æ‹¥æœ‰æ›´å¤šé…ç½®é¡¹ï¼ˆå®é™…ä¸Šä¹Ÿä¸å¤šï¼Œæ•°äº†ä¸‹äºŒåä¸ªï¼‰ï¼Œä¸”èƒ½åœ¨å‘å¸ƒæµç¨‹ä¸­æ‰§è¡Œå‘½ä»¤è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œèƒ½å¤Ÿæœ‰æ•ˆçš„ä½¿é¡¹ç›®ä»£ç é£æ ¼è¶‹äºç»Ÿä¸€ã€‚

åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä¾èµ–åŒ…ï¼š

```
npm install prettier -D
```

å®‰è£…æˆåŠŸä¹‹ååœ¨æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶ `.prettierrc` ï¼Œè¾“å…¥ä»¥ä¸‹é…ç½®ï¼š

```
{
  "trailingComma": "all",
  "tabWidth": 2,
  "semi": false,
  "singleQuote": true,
  "endOfLine": "lf",
  "printWidth": 120,
  "bracketSpacing": true,
  "arrowParens": "always"
}
```

å…¶å® `Prettier` çš„é…ç½®é¡¹å¾ˆå°‘ï¼Œå¤§å®¶å¯ä»¥å» [Prettier Playground](https://prettier.io/playground/) å¤§æ¦‚æŠŠç©ä¸€ä¼šå„¿ï¼Œä¸‹é¢æˆ‘ç®€å•ä»‹ç»ä¸‹ä¸Šè¿°çš„é…ç½®ï¼š

- `trailingComma` ï¼šå¯¹è±¡çš„æœ€åä¸€ä¸ªå±æ€§æœ«å°¾ä¹Ÿä¼šæ·»åŠ  `,` ï¼Œæ¯”å¦‚ `{ a: 1, b: 2 }` ä¼šæ ¼å¼ä¸º `{ a: 1, b: 2, }` ã€‚
- `tabWidth` ï¼šç¼©è¿›å¤§å°ã€‚
- `semi` ï¼šåˆ†å·æ˜¯å¦æ·»åŠ ï¼Œæˆ‘ä»¥å‰ä»C++è½¬å‰ç«¯çš„ï¼Œæœ‰ä¸€æ®µæ—¶é—´éå¸¸ä¸èƒ½å¿å—ä¸åŠ åˆ†å·çš„è¡Œä¸ºï¼Œç°åœ¨é¦™çš„ä¸€åŒ¹ã€‚
- `singleQuote` ï¼šæ˜¯å¦å•å¼•å·ï¼Œç»å£é€‰æ‹©å•å¼•å·å•Šï¼Œä¸ä¼šçœŸæœ‰äººè¿˜ç”¨åŒå¼•å·å§ï¼Ÿä¸ä¼šå§ï¼ğŸ˜
- `jsxSingleQuote` ï¼šjsx è¯­æ³•ä¸‹æ˜¯å¦å•å¼•å·ï¼ŒåŒä¸Šã€‚
- `endOfLine` ï¼šä¸ `.editorconfig` ä¿æŒä¸€è‡´è®¾ç½®ã€‚
- `printWidth` ï¼šå•è¡Œä»£ç æœ€é•¿å­—ç¬¦é•¿åº¦ï¼Œè¶…è¿‡ä¹‹åä¼šè‡ªåŠ¨æ ¼å¼åŒ–æ¢è¡Œã€‚
- `bracketSpacing` ï¼šåœ¨å¯¹è±¡ä¸­çš„æ‹¬å·ä¹‹é—´æ‰“å°ç©ºæ ¼ï¼Œ `{a: 5}` æ ¼å¼åŒ–ä¸º `{ a: 5 }` ã€‚
- `arrowParens` ï¼šç®­å¤´å‡½æ•°çš„å‚æ•°æ— è®ºæœ‰å‡ ä¸ªï¼Œéƒ½è¦æ‹¬å·åŒ…è£¹ã€‚æ¯”å¦‚ `(a) => {}` ï¼Œå¦‚æœè®¾ä¸º `avoid` ï¼Œä¼šè‡ªåŠ¨æ ¼å¼åŒ–ä¸º `a => {}` ã€‚

é‚£æˆ‘ä»¬ç°åœ¨ä¹Ÿé…ç½®å¥½äº†ï¼Œä½†æ˜¯å’‹ç”¨çš„å‘¢ï¼Ÿ

- ä¸€ä¸ªæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤çš„å½¢å¼å»æ ¼å¼åŒ–æŸä¸ªæ–‡ä»¶ä¸‹çš„ä»£ç ï¼Œä½†æ˜¯æˆ‘ä»¬åŸºæœ¬ä¸ä¼šå»ä½¿ç”¨ï¼Œæœ€ç»ˆéƒ½æ˜¯é€šè¿‡ `ESlint` å»æ£€æµ‹ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚
- äºŒæ˜¯å½“æˆ‘ä»¬ç¼–è¾‘å®Œä»£ç ä¹‹åï¼ŒæŒ‰ä¸‹ `ctrl+s` ä¿å­˜å°±ç»™æˆ‘ä»¬è‡ªåŠ¨æŠŠå½“å‰æ–‡ä»¶ä»£ç æ ¼å¼åŒ–äº†ï¼Œæ—¢èƒ½å®æ—¶æŸ¥çœ‹æ ¼å¼åŒ–åçš„ä»£ç é£æ ¼ï¼Œåˆçœå»äº†å‘½ä»¤æ‰§è¡Œä»£ç æ ¼å¼åŒ–çš„å¤šä½™å·¥ä½œã€‚

ä½ æ‰€éœ€è¦åšçš„æ˜¯å…ˆå®‰è£…æ‰©å±• [Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) ï¼š

[![image.png](https://camo.githubusercontent.com/4b5fff43faf80766dd493d8daad881fad108ebdbe2b0aa7c14dd36bb1ca5392b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343237313136343239342d61363465613866622d666463372d343936342d383661362d3733376465653835383536322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313533266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333036266f726967696e57696474683d313439382673697a653d3733373238267374617475733d646f6e65267374796c653d6e6f6e652677696474683d373439)](https://camo.githubusercontent.com/4b5fff43faf80766dd493d8daad881fad108ebdbe2b0aa7c14dd36bb1ca5392b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343237313136343239342d61363465613866622d666463372d343936342d383661362d3733376465653835383536322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313533266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333036266f726967696e57696474683d313439382673697a653d3733373238267374617475733d646f6e65267374796c653d6e6f6e652677696474683d373439)

å½“å®‰è£…ç»“æŸåï¼Œ åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ `.vscode` ï¼Œåœ¨æ­¤æ–‡ä»¶ä¸‹å†å»ºä¸€ä¸ª `settings.json` æ–‡ä»¶ï¼š

[![image.png](https://camo.githubusercontent.com/574c56f4cb0c518c3db63f82d0de417f684689ab17fada212489aec93716d014/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343330343034313935322d66363532343664652d363136392d346663652d623662342d6565323533333731336633622e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d3434266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d3838266f726967696e57696474683d3434342673697a653d37303638267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323232)](https://camo.githubusercontent.com/574c56f4cb0c518c3db63f82d0de417f684689ab17fada212489aec93716d014/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343330343034313935322d66363532343664652d363136392d346663652d623662342d6565323533333731336633622e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d3434266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d3838266f726967696e57696474683d3434342673697a653d37303638267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323232)

è¯¥æ–‡ä»¶çš„é…ç½®ä¼˜å…ˆäº vscode å…¨å±€çš„ `settings.json` ï¼Œè¿™æ ·åˆ«äººä¸‹è½½äº†ä½ çš„é¡¹ç›®è¿›è¡Œå¼€å‘ï¼Œä¹Ÿä¸ä¼šå› ä¸ºå…¨å±€ `setting.json` çš„é…ç½®ä¸åŒè€Œå¯¼è‡´ `Prettier` æˆ–ä¹‹åä¼šè¯´åˆ°çš„ `ESLint` ã€ `StyleLint` å¤±æ•ˆï¼Œæ¥ä¸‹æ¥åœ¨è¯¥æ–‡ä»¶å†…è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```
{ 
  // æŒ‡å®šå“ªäº›æ–‡ä»¶ä¸å‚ä¸æœç´¢
  "search.exclude": {
    "**/node_modules": true,
    "dist": true,
    "yarn.lock": true
  },
  "editor.formatOnSave": true,
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[javascriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[json]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[html]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[markdown]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[css]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[less]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[scss]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

`"editor.formatOnSave"` çš„ä½œç”¨æ˜¯åœ¨æˆ‘ä»¬ä¿å­˜æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ä»£ç æ ¼å¼åŒ–ï¼Œè€Œæˆ‘ä»¬è¯¥ä½¿ç”¨ä»€ä¹ˆæ ¼å¼åŒ–å™¨ï¼Ÿæ¥ä¸‹æ¥çš„ä»£ç ä¾¿æ˜¯è®¾ç½®é»˜è®¤çš„æ ¼å¼åŒ–å™¨ï¼Œçœ‹åå­—å¤§å®¶ä¹Ÿèƒ½çœ‹å¾—å‡ºæ¥äº†å§ï¼

åœ¨é‡åˆ° `.js` ã€ `.jsx` ã€`.ts` ã€`.tsx` ã€`.json` ã€`.html` ã€`.md` ã€ `.css` ã€ `.less` ã€ `.scss` ä¸ºåç¼€çš„æ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šå»ä½¿ç”¨ `Prettier` å»æ ¼å¼åŒ–ä»£ç ï¼Œè€Œæ ¼å¼åŒ–çš„è§„åˆ™å°±æ˜¯æˆ‘ä»¬é…ç½®çš„ `.prettierrc` å†³å®šçš„ï¼

[![12.gif](https://camo.githubusercontent.com/645e367b8772ca8fe866dcafa5b108ef89a24c68d09c0833cec7d0067cc867c0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343330373235343335342d32363931643839302d366334622d343362392d623033632d3631653061333730666337382e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333333266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d333333266f726967696e57696474683d3830302673697a653d31373036393933267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)](https://camo.githubusercontent.com/645e367b8772ca8fe866dcafa5b108ef89a24c68d09c0833cec7d0067cc867c0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343330373235343335342d32363931643839302d366334622d343362392d623033632d3631653061333730666337382e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333333266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d333333266f726967696e57696474683d3830302673697a653d31373036393933267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)

`.editorconfig` é…ç½®æ–‡ä»¶ä¸­æŸäº›é…ç½®é¡¹æ˜¯ä¼šå’Œ `Prettier` é‡åˆçš„ï¼Œä¾‹å¦‚ æŒ‡å®šç¼©è¿›å¤§å° ä¸¤è€…éƒ½å¯ä»¥é…ç½®ã€‚

é‚£ä¹ˆä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

æˆ‘ä»¬å¯ä»¥çœ‹åˆ° `EditorConfig` çš„é…ç½®é¡¹éƒ½æ˜¯ä¸€äº›ä¸æ¶‰åŠå…·ä½“è¯­æ³•çš„ï¼Œæ¯”å¦‚ ç¼©è¿›å¤§å°ã€æ–‡ç§»é™¤å¤šä½™ç©ºæ ¼ç­‰ã€‚

è€Œ `Prettier` æ˜¯ä¸€ä¸ªæ ¼å¼åŒ–å·¥å…·ï¼Œè¦æ ¹æ®å…·ä½“è¯­æ³•æ ¼å¼åŒ–ï¼Œå¯¹äºä¸åŒçš„è¯­æ³•ç”¨å•å¼•å·è¿˜æ˜¯åŒå¼•å·ï¼ŒåŠ ä¸åŠ åˆ†å·ï¼Œå“ªé‡Œæ¢è¡Œç­‰ï¼Œå½“ç„¶ï¼Œè‚¯å®šä¹Ÿæœ‰ç¼©è¿›å¤§å°ã€‚

å³ä½¿ç¼©è¿›å¤§å°è¿™äº›å…±åŒéƒ½æœ‰çš„è®¾ç½®ï¼Œä¸¤è€…ä¹Ÿæ˜¯ä¸å†²çªçš„ï¼Œè®¾ç½® `EditorConfig` çš„ `indent_size` ä¸º `4` ï¼Œ `Prettier` çš„ `tabWidth` ä¸º `2` ã€‚

[![12.gif](https://camo.githubusercontent.com/713cc1a5605781bbb1c660efb39863349c76a03e396a7984d5b148169f03b885/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343330393037343030312d35333637633261322d373934342d346466642d386266372d6166366439636534316539392e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313639266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d313639266f726967696e57696474683d3830302673697a653d31323038353633267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)](https://camo.githubusercontent.com/713cc1a5605781bbb1c660efb39863349c76a03e396a7984d5b148169f03b885/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343330393037343030312d35333637633261322d373934342d346466642d386266372d6166366439636534316539392e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313639266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d313639266f726967696e57696474683d3830302673697a653d31323038353633267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)

å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æˆ‘ä»¬æ–°èµ·ä¸€è¡Œæ—¶ï¼Œæ ¹æ® `.editorconfig` ä¸­çš„é…ç½®ï¼Œç¼©è¿›å¤§å°ä¸º `4` ï¼Œæ‰€ä»¥å…‰æ ‡ç›´æ¥è·³åˆ°äº†æ­¤å¤„ï¼Œä½†æ˜¯ä¿å­˜æ—¶ï¼Œå› ä¸ºæˆ‘ä»¬é»˜è®¤çš„æ ¼å¼åŒ–å·¥å…·å·²ç»åœ¨ `.vscode/settings.json` ä¸­è®¾ç½®ä¸ºäº† `Prettier` ï¼Œæ‰€ä»¥è¿™æ—¶å€™è¯»å–ç¼©è¿›å¤§å°ä¸º `2` çš„é…ç½®ï¼Œå¹¶æ­£ç¡®æ ¼å¼åŒ–äº†ä»£ç ã€‚

å½“ç„¶ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®å¤§å®¶ä¸¤ä¸ªéƒ½é…ç½®æ–‡ä»¶é‡åˆçš„åœ°æ–¹éƒ½ä¿æŒä¸€è‡´æ¯”è¾ƒå¥½ï½

### 3. ESLint

åœ¨ä¸Šé¢æˆ‘ä»¬é…ç½®äº† `EditorConfig` å’Œ `Prettier` éƒ½æ˜¯ä¸ºäº†è§£å†³**ä»£ç é£æ ¼é—®é¢˜**ï¼Œè€Œ `ESLint` æ˜¯ä¸»è¦ä¸ºäº†è§£å†³**ä»£ç è´¨é‡é—®é¢˜**ï¼Œå®ƒèƒ½åœ¨æˆ‘ä»¬ç¼–å†™ä»£ç æ—¶å°±æ£€æµ‹å‡ºç¨‹åºå¯èƒ½å‡ºç°çš„éšæ€§BUGï¼Œé€šè¿‡ `eslint --fix` è¿˜èƒ½è‡ªåŠ¨ä¿®å¤ä¸€äº›ä»£ç å†™æ³•é—®é¢˜ï¼Œæ¯”å¦‚ä½ å®šä¹‰äº† `var a = 3` ï¼Œè‡ªåŠ¨ä¿®å¤åä¸º `const a = 3` ã€‚è¿˜æœ‰è®¸å¤šç±»ä¼¼çš„å¼ºåˆ¶æ‰­è½¬ä»£ç æœ€ä½³å†™æ³•çš„è§„åˆ™ï¼Œåœ¨æ— æ³•è‡ªåŠ¨ä¿®å¤æ—¶ï¼Œä¼šç»™å‡ºçº¢çº¿æç¤ºï¼Œå¼ºè¿«å¼€å‘äººå‘˜ä¸ºå…¶å¯»æ±‚æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚

> prettier ä»£ç é£æ ¼ç»Ÿä¸€æ”¯æŒçš„è¯­è¨€æ›´å¤šï¼Œè€Œä¸”å·®å¼‚åŒ–å°ï¼Œeslint ä¸€å¤§å †çš„é…ç½®èƒ½å¼„å‡ºä¸€å †é£æ ¼ï¼Œprettier èƒ½å¯¹ ts js html css json mdåšé£æ ¼ç»Ÿä¸€ï¼Œè¿™æ–¹é¢ eslint æ¯”ä¸è¿‡ã€‚ --æ¥è‡ªâ€œä¸‰å…ƒå°è¿·å¦¹â€

æˆ‘ä»¬å…ˆæŠŠå®ƒç”¨èµ·æ¥ï¼Œç›´è§‚æ„Ÿå—ä¸€ä¸‹å…¶å¸¦æ¥çš„å¥½å¤„ï¼

é¦–å…ˆåœ¨é¡¹ç›®ä¸­å®‰è£… `eslint` ï¼š

```
 npm install eslint -D
```

å®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
npx eslint --init
```

ä¸Šè¿°å‘½ä»¤çš„åŠŸèƒ½ä¸ºåˆå§‹åŒ– `ESLint` çš„é…ç½®æ–‡ä»¶ï¼Œé‡‡å–çš„æ˜¯é—®ç­”çš„å½¢å¼ï¼Œç‰¹åˆ«äººæ€§åŒ–ã€‚ä¸è¿‡åœ¨æˆ‘ä»¬ä»‹ç»å„ä¸ªé—®ç­”ä¹‹å‰å…ˆæ¥çœ‹çœ‹è¿™å¥å‘½ä»¤ä¸­ `npx` æ˜¯ä»€ä¹ˆã€‚

å®é™…ä¸Šï¼Œè¦è¾¾åˆ°ä»¥ä¸Šå‘½ä»¤çš„æ•ˆæœè¿˜æœ‰ä¸¤ç§æ–¹å¼ã€‚

ä¸€æ˜¯ç›´æ¥æ‰¾åˆ°æˆ‘ä»¬é¡¹ç›®ä¸­å®‰è£…çš„ `eslint` çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š

[![image.png](https://camo.githubusercontent.com/439c352ea2f11784e7a625e1d1f64de170fc911b9050919fcaa5080362e841d4/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343338393632353239312d64633962356630312d656163372d343433372d616432372d3937303439303336326565352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313738266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333536266f726967696e57696474683d3434302673697a653d3234373135267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323230)](https://camo.githubusercontent.com/439c352ea2f11784e7a625e1d1f64de170fc911b9050919fcaa5080362e841d4/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343338393632353239312d64633962356630312d656163372d343433372d616432372d3937303439303336326565352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313738266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333536266f726967696e57696474683d3434302673697a653d3234373135267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323230)

ç„¶åæ ¹æ®è¯¥è·¯å¾„æ¥æ‰§è¡Œå‘½ä»¤ï¼š

```
./node_modules/.bin/eslint --init
```

äºŒæ˜¯å…ˆå…¨å±€å®‰è£… `eslint` ï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š

```
# å…¨å±€å®‰è£… eslint
npm install eslint -g

# eslint é…ç½®æ–‡ä»¶åˆå§‹åŒ–
eslint --init
```

ç°åœ¨è®©æˆ‘ä»¬æ¥è¯´ä¸‹è¿™ä¸¤ç§æ–¹å¼çš„ç¼ºç‚¹ï¼š

- é’ˆå¯¹ç¬¬ä¸€ç§ï¼Œå…¶å®æœ¬è´¨ä¸Šæ¥è¯´å’Œæˆ‘ä»¬æ‰€æ¨èçš„ `npx` å½¢å¼æ²¡æœ‰åŒºåˆ«ï¼Œç¼ºç‚¹æ˜¯è¯¥å‘½ä»¤å¤ªè¿‡äºç¹çã€‚
- é’ˆå¯¹ç¬¬äºŒç§ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå…¨å±€è¿›è¡Œ `eslint` çš„å®‰è£…ï¼Œè¿™ä¼šå æ®æˆ‘ä»¬ç”µè„‘çš„ç¡¬ç›˜ç©ºé—´ï¼Œä¸”ä¼šå°†å®‰è£…æ–‡ä»¶æ”¾åˆ°æŒºéšè”½çš„åœ°æ–¹ï¼Œä¸ªäººæœ‰å¿ƒé‡Œæ´ç™–ï¼Œéå¸¸æ¥å—ä¸äº†è¿™ç§å…¨å±€å®‰è£…çš„æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯è¶Šæ¥è¶Šå¤šå…¨å±€åŒ…çš„æ—¶å€™ã€‚å†æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„é—®é¢˜æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬æ‰§è¡Œ `eslint --init` æ˜¯ä½¿ç”¨å…¨å±€å®‰è£…çš„ç‰ˆæœ¬å»åˆå§‹åŒ–çš„ï¼Œè¿™æœ‰å¯èƒ½ä¼šå’Œä½ ç°åœ¨é¡¹ç›®ä¸­çš„ `eslint` ç‰ˆæœ¬ä¸ä¸€è‡´ã€‚è¿™ä¸ªé—®é¢˜æˆ‘å°±å‡ºç°äº†ï¼Œè®°å¾—å¾ˆä¹…ä»¥å‰è£…çš„å…¨å±€ `eslint` ï¼Œç‰ˆæœ¬å¥½ä½ã€‚

é‚£ä¹ˆ `npx` çš„ä½œç”¨å°±æ˜¯æŠ¹æ‰äº†ä¸Šè¿°ä¸¤ä¸ªç¼ºç‚¹ï¼Œå…¶æ˜¯ `npm v5.2.0` å¼•å…¥çš„ä¸€æ¡å‘½ä»¤ï¼Œå®ƒåœ¨ä¸Šè¿°å‘½ä»¤æ‰§è¡Œæ—¶ï¼š

- ä¼šå…ˆå»æœ¬åœ° `node_modules` ä¸­æ‰¾ `eslint` çš„æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œå°±ç›´æ¥æ‰§è¡Œï¼Œç›¸å½“äºä¸Šé¢æ‰€è¯´çš„ç¬¬ä¸€ç§æ–¹å¼ï¼›
- å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±å»å…¨å±€æ‰¾ï¼Œæ‰¾åˆ°äº†ï¼Œå°±ç›¸å½“äºä¸Šè¿°ç¬¬äºŒç§æ–¹å¼ï¼›
- å¦‚æœéƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¸‹è½½ä¸€ä¸ªä¸´æ—¶çš„ `eslint` ï¼Œç”¨å®Œä¹‹åå°±åˆ é™¤è¿™ä¸ªä¸´æ—¶çš„åŒ…ï¼Œå¯¹æœ¬æœºå®Œå…¨æ— æ±¡æŸ“ã€‚

[![image.png](https://camo.githubusercontent.com/b2a6765ec4040b20c92a3f135ecaa4fb2e06530813889103b4f41354737007a0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343339303837363839392d36663538646562612d396135322d343464342d626166332d3935613863303736616330652e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313133266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323236266f726967696e57696474683d3234302673697a653d313439343631267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313230)](https://camo.githubusercontent.com/b2a6765ec4040b20c92a3f135ecaa4fb2e06530813889103b4f41354737007a0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343339303837363839392d36663538646562612d396135322d343464342d626166332d3935613863303736616330652e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313133266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323236266f726967696e57696474683d3234302673697a653d313439343631267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313230)

å·²ç»æ‰§è¡Œ `npx eslint --init` çš„å°ä¼™ä¼´ç°åœ¨ä¼šä¾æ¬¡é‡åˆ°ä¸‹é¢é—®é¢˜ï¼Œè¯·è·Ÿæˆ‘æ…¢æ…¢çœ‹æ¥ï¼š

- How would you like to use ESLint?

  æœæ–­é€‰æ‹©ç¬¬ä¸‰æ¡ `To check syntax, find problems, and enforce code style` ï¼Œæ£€æŸ¥è¯­æ³•ã€æ£€æµ‹é—®é¢˜å¹¶å¼ºåˆ¶ä»£ç é£æ ¼ã€‚

- What type of modules does your project use?

  é¡¹ç›®éé…ç½®ä»£ç éƒ½æ˜¯é‡‡ç”¨çš„ ES6 æ¨¡å—ç³»ç»Ÿå¯¼å…¥å¯¼å‡ºï¼Œé€‰æ‹© `JavaScript modules (import/export)` ã€‚

- Which framework does your project use?

  æ˜¾è€Œæ˜“è§ï¼Œé€‰æ‹© `React` ã€‚

- Does your project use TypeScript?

  æœæ–­ç”¨ä¸Š `Typescript` å•Šï¼Œè¿˜è®°å¾—æˆ‘ä»¬æ–‡ç« çš„æ ‡é¢˜å—ï¼Ÿé€‰æ‹© `Yes` åç”Ÿæˆçš„ `eslint` é…ç½®æ–‡ä»¶ä¼šç»™æˆ‘ä»¬é»˜è®¤é…ä¸Šæ”¯æŒ `Typescript` çš„ `parse` ä»¥åŠæ’ä»¶ `plugins` ç­‰ã€‚

- Where does your code run?

`Browser` å’Œ `Node` ç¯å¢ƒéƒ½é€‰ä¸Šï¼Œä¹‹åå¯èƒ½ä¼šç¼–å†™ä¸€äº› `node` ä»£ç ã€‚

- How would you like to define a style for your project?

  é€‰æ‹© `Use a popular style guide` ï¼Œå³ä½¿ç”¨ç¤¾åŒºå·²ç»åˆ¶å®šå¥½çš„ä»£ç é£æ ¼ï¼Œæˆ‘ä»¬å»éµå®ˆå°±è¡Œã€‚

- Which style guide do you want to follow?

  é€‰æ‹© `Airbnb` é£æ ¼ï¼Œéƒ½æ˜¯ç¤¾åŒºæ€»ç»“å‡ºæ¥çš„æœ€ä½³å®è·µã€‚

- What format do you want your config file to be in?

  é€‰æ‹© `JavaScript` ï¼Œå³ç”Ÿæˆçš„é…ç½®æ–‡ä»¶æ˜¯ js æ–‡ä»¶ï¼Œé…ç½®æ›´åŠ çµæ´»ã€‚

- Would you like to install them now with npm?

  å½“ç„¶ `Yes` äº†ï½

åœ¨æ¼«é•¿çš„å®‰è£…ç»“æŸåï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹å¤šå‡ºäº†æ–°çš„æ–‡ä»¶ `.eslintrc.js` ï¼Œè¿™ä¾¿æ˜¯æˆ‘ä»¬çš„ `eslint` é…ç½®æ–‡ä»¶äº†ã€‚å…¶é»˜è®¤å†…å®¹å¦‚ä¸‹ï¼š

```
module.exports = {
  env: {
    browser: true,
    es2020: true,
    node: true,
  },
  extends: ['plugin:react/recommended', 'airbnb'],
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaFeatures: {
      jsx: true,
    },
    ecmaVersion: 11,
    sourceType: 'module',
  },
  plugins: ['react', '@typescript-eslint'],
  rules: {},
}
```

å„ä¸ªå±æ€§å­—æ®µçš„ä½œç”¨å¯åœ¨ [Configuring ESLint](https://eslint.bootcss.com/docs/user-guide/configuring) ä»”ç»†äº†è§£ï¼Œå¯èƒ½ä¼šæ¯”è¾ƒè¿·æƒ‘çš„åœ°æ–¹æ˜¯ `extends` å’Œ `plugins` çš„å…³ç³»ï¼Œå…¶å® `plugins` å°±æ˜¯**æ’ä»¶**çš„æ„æ€ï¼Œéƒ½æ˜¯éœ€è¦ npm åŒ…çš„å®‰è£…æ‰å¯ä»¥ä½¿ç”¨ï¼Œåªä¸è¿‡é»˜è®¤æ”¯æŒç®€å†™ï¼Œå®˜ç½‘éƒ½æœ‰è¯´ï¼›è‡³äº `extneds` å…¶å®å°±æ˜¯ä½¿ç”¨æˆ‘ä»¬å·²ç»ä¸‹è½½çš„æ’ä»¶çš„æŸäº›é¢„è®¾è§„åˆ™ã€‚

ç°åœ¨æˆ‘ä»¬å¯¹è¯¥é…ç½®æ–‡ä»¶ä½œä»¥ä¸‹ä¿®æ”¹ï¼š

- æ ¹æ® [eslint-config-airbnb](https://www.npmjs.com/package/eslint-config-airbnb) å®˜æ–¹è¯´æ˜ï¼Œå¦‚æœè¦å¼€å¯ React Hooks çš„æ£€æŸ¥ï¼Œéœ€è¦åœ¨ extends ä¸­æ·»åŠ ä¸€é¡¹ `'airbnb/hooks'` ã€‚
- æ ¹æ® [@typescript-eslint/eslint-plugin](https://www.npmjs.com/package/@typescript-eslint/eslint-plugin) å®˜æ–¹è¯´æ˜ï¼Œåœ¨ extends ä¸­æ·»åŠ  `'plugin:@typescript-eslint/recommended'` å¯å¼€å¯é’ˆå¯¹ ts è¯­æ³•æ¨èçš„è§„åˆ™å®šä¹‰ã€‚
- éœ€è¦æ·»åŠ ä¸€æ¡å¾ˆé‡è¦çš„ `rule` ï¼Œä¸ç„¶åœ¨ `.ts` å’Œ `.tsx` æ–‡ä»¶ä¸­å¼•å…¥å¦ä¸€ä¸ªæ–‡ä»¶æ¨¡å—ä¼šæŠ¥é”™ï¼Œæ¯”å¦‚ï¼š

[![image.png](https://camo.githubusercontent.com/fdf22860d73588486465486b86a97bbb999d143b9b1fb2c9366a7b3e03f4730f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343339393733363937332d63333838343462342d363862612d346665612d616136352d6436326664393363386230662e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313337266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323734266f726967696e57696474683d313637342673697a653d3732363635267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383337)](https://camo.githubusercontent.com/fdf22860d73588486465486b86a97bbb999d143b9b1fb2c9366a7b3e03f4730f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343339393733363937332d63333838343462342d363862612d346665612d616136352d6436326664393363386230662e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313337266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323734266f726967696e57696474683d313637342673697a653d3732363635267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383337)

æ·»åŠ ä»¥ä¸‹è§„åˆ™åˆ° `rules` å³å¯ï¼š

```
rules: {
  'import/extensions': [
    ERROR,
    'ignorePackages',
    {
      ts: 'never',
      tsx: 'never',
      json: 'never',
      js: 'never',
    },
  ],
}
```

åœ¨ä¹‹åæˆ‘ä»¬å®‰è£… `typescript` ä¹‹åï¼Œä¼šå‡ºç°ä»¥ä¸‹çš„æ€ªå¼‚é”™è¯¯ï¼š

[![image.png](https://camo.githubusercontent.com/72e5a5daaf38ad681f7b2a4f725c6060aa7eb9bcab7313be2cf627beb6a6bb74/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343536303036393937342d30393235353839302d326563642d346164362d613038392d6132313662373332383238382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313732266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333434266f726967696e57696474683d313632362673697a653d3736343437267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383133)](https://camo.githubusercontent.com/72e5a5daaf38ad681f7b2a4f725c6060aa7eb9bcab7313be2cf627beb6a6bb74/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343536303036393937342d30393235353839302d326563642d346164362d613038392d6132313662373332383238382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313732266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333434266f726967696e57696474683d313632362673697a653d3736343437267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383133)

å¤§å®¶å…ˆæ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œæ¯•ç«Ÿä¹‹åä¸€å®šè¦å®‰è£… `typscript` çš„ï¼ŒæŠŠæœ€å¸¸ç”¨çš„æ‰©å±•åæ’åœ¨æœ€å‰é¢ï¼Œè¿™é‡Œå¯»æ‰¾æ–‡ä»¶æ—¶æœ€å¿«èƒ½æ‰¾åˆ°ï¼š

```
  settings: {
    'import/resolver': {
      node: {
        extensions: ['.tsx', '.ts', '.js', '.json'],
      },
    },
  },
```

æ¥ä¸‹æ¥å®‰è£… 2 ä¸ªç¤¾åŒºä¸­æ¯”è¾ƒç«çš„ `eslint` æ’ä»¶ï¼š

- `eslint-plugin-promise` ï¼šè®©ä½ æŠŠ Promise è¯­æ³•å†™æˆæœ€ä½³å®è·µã€‚
- `eslint-plugin-unicorn` ï¼šæä¾›äº†æ›´å¤šæœ‰ç”¨çš„é…ç½®é¡¹ï¼Œæ¯”å¦‚æˆ‘ä¼šç”¨æ¥è§„èŒƒå…³äºæ–‡ä»¶å‘½åçš„æ–¹å¼ã€‚

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š

```
npm install eslint-plugin-promise eslint-plugin-unicorn -D
```

åœ¨æ·»åŠ äº†éƒ¨åˆ†è§„åˆ™ `rules` åï¼Œæˆ‘çš„é…ç½®æ–‡ä»¶ä¿®æ”¹ä¹‹åå¦‚ä¸‹ï¼š

```
const OFF = 0
const WARN = 1
const ERROR = 2

module.exports = {
  env: {
    browser: true,
    es2020: true,
    node: true,
  },
  extends: [
    'airbnb',
    'airbnb/hooks',
    'plugin:react/recommended',
    'plugin:unicorn/recommended',
    'plugin:promise/recommended',
    'plugin:@typescript-eslint/recommended',
  ],
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaFeatures: {
      jsx: true,
    },
    ecmaVersion: 11,
    sourceType: 'module',
  },
  settings: {
    'import/resolver': {
      node: {
        extensions: ['.tsx', '.ts', '.js', '.json'],
      },
    },
  },
  plugins: ['react', 'unicorn', 'promise', '@typescript-eslint'],
  rules: {
    // å…·ä½“æ·»åŠ çš„å…¶ä»–è§„åˆ™å¤§å®¶å¯æŸ¥çœ‹æˆ‘çš„ github æŸ¥çœ‹
    // https://github.com/vortesnail/react-ts-quick-starter/blob/master/.eslintrc.js
  },
}
```

> åœ¨ä¹‹åçš„é…ç½®è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜ä¼šéœ€è¦å¯¹è¯¥æ–‡ä»¶è¿›è¡Œæ›´æ”¹ğŸ˜›ï¼Œæ¯”å¦‚æ·»åŠ è§£å†³ eslint å’Œ prettier çš„è§„åˆ™å†²çªå¤„ç†æ’ä»¶ï¼Œè¯·å¤§å®¶æœŸå¾…ä¸€ä¸‹ä¸‹ã€‚

å¤§å®¶æ–°å»ºä¸€ä¸ª `hello.ts` æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ‰“ä¸Šä»¥ä¸‹ä»£ç ï¼š

```
var add = (a, b) => {
  console.log(a + b)
  return a + b
}

export default add
```

ä½ ä¼šå‘ç°æ²¡æœ‰ä»»ä½•çš„é”™è¯¯æç¤ºï¼Œå¾ˆæ˜æ˜¾ä¸Šé¢çš„ä»£ç è¿åäº†ä¸èƒ½ä½¿ç”¨ `var` å®šä¹‰å˜é‡çš„è§„åˆ™ï¼Œç†è®ºä¸Šæ¥è¯´ä¸€å®šä¼šæŠ¥ä¸€å †çº¢çº¿çš„ï½

è¿™æ—¶å€™æŒ‰ä¸‹å›¾çœ‹æˆ‘ä»¬çš„ `ESLint` è¾“å‡ºï¼š

[![image.png](https://camo.githubusercontent.com/0550906dec746383db5e6c10ee0c75850a1509e079bce617c31d3501942e1363/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343430303931303236382d39333639623864302d353765342d343561342d396262312d3833643566653363656163382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323732266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d353434266f726967696e57696474683d313938382673697a653d313830363831267374617475733d646f6e65267374796c653d6e6f6e652677696474683d393934)](https://camo.githubusercontent.com/0550906dec746383db5e6c10ee0c75850a1509e079bce617c31d3501942e1363/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343430303931303236382d39333639623864302d353765342d343561342d396262312d3833643566653363656163382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323732266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d353434266f726967696e57696474683d313938382673697a653d313830363831267374617475733d646f6e65267374796c653d6e6f6e652677696474683d393934)

åŸæ¥æ˜¯ `@typescript-eslint/eslint-plugin` è¿™ä¸ªæ’ä»¶éœ€è¦å®‰è£… `typescript` ï¼Œè™½ç„¶æˆ‘ä»¬è¿™éƒ¨åˆ†å†…å®¹åº”è¯¥åœ¨ä¹‹åå†è®²çš„ï¼Œä½†æ˜¯ç°åœ¨ä¸ºäº†è®©å¤§å®¶å†™ç‚¹ä»£ç æµ‹è¯•çœ‹ä¸‹ `eslint` æ˜¯å¦å¥½ç”¨ï¼Œæˆ‘ä»¬å°±å…ˆå®‰è£…ä¸€ä¸‹å§ï¼š

```
npm install typescript -D
```

å®‰è£…å®Œä¹‹åï¼Œä½ å†å›å¤´çœ‹çœ‹åˆšæ‰é‚£ä¸ª `hello.ts` æ–‡ä»¶å†…çš„ä»£ç ï¼Œæ˜¯ä¸æ˜¯ä¸€å †çˆ†çº¢äº†ï¼

[![image.png](https://camo.githubusercontent.com/1f68f1cda71ff4c3a7267a9d69f2082f857d53eae0e384c7cf99e42578612479/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343430313232323835302d30646633313938622d326364362d346530652d623034332d3536313264613834616661322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323330266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343630266f726967696e57696474683d313139342673697a653d3433373639267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353937)](https://camo.githubusercontent.com/1f68f1cda71ff4c3a7267a9d69f2082f857d53eae0e384c7cf99e42578612479/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343430313232323835302d30646633313938622d326364362d346530652d623034332d3536313264613834616661322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323330266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343630266f726967696e57696474683d313139342673697a653d3433373639267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353937)

æˆ‘ä»¬çŸ¥é“ `eslint` ç”±ç¼–è¾‘å™¨æ”¯æŒæ˜¯æœ‰è‡ªåŠ¨ä¿®å¤åŠŸèƒ½çš„ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…æ‰©å±•ï¼š

[![image.png](https://camo.githubusercontent.com/3f419c47880548546087a4908854b66bed65578749794ffc8a1b2ff80574d4df/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343430313332333831392d38333365373336642d333236362d343561352d396163612d3733623536393737373133662e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313633266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333236266f726967696e57696474683d313733342673697a653d3739323434267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383637)](https://camo.githubusercontent.com/3f419c47880548546087a4908854b66bed65578749794ffc8a1b2ff80574d4df/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343430313332333831392d38333365373336642d333236362d343561352d396163612d3733623536393737373133662e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313633266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333236266f726967696e57696474683d313733342673697a653d3739323434267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383637)

å†åˆ°ä¹‹å‰åˆ›å»ºçš„ `.vscode/settings.json` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```
{
  "eslint.validate": ["javascript", "javascriptreact", "typescript", "typescriptreact"],
  "typescript.tsdk": "./node_modules/typescript/lib", // ä»£æ›¿ vscode çš„ ts è¯­æ³•æ™ºèƒ½æç¤º
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
  },
}
```

è¿™æ—¶å€™æˆ‘ä»¬ä¿å­˜æ—¶ï¼Œå°±ä¼šå¼€å¯ `eslint` çš„è‡ªåŠ¨ä¿®å¤ï¼Œå®Œç¾ï¼

[![12.gif](https://camo.githubusercontent.com/e2c77a0e5c118afbb4851d52355e75d9b077f9885ddf8406ce561335bdf1c52f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343536303537343137352d64626361623538352d663934652d343738322d626139632d3336396133326639393333362e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323537266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d323537266f726967696e57696474683d3830302673697a653d373239373037267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)](https://camo.githubusercontent.com/e2c77a0e5c118afbb4851d52355e75d9b077f9885ddf8406ce561335bdf1c52f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343536303537343137352d64626361623538352d663934652d343738322d626139632d3336396133326639393333362e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323537266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d323537266f726967696e57696474683d3830302673697a653d373239373037267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)

ä¸è¿‡æœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸å¸Œæœ› `ESLint` æˆ– `Prettier` å»å¯¹æŸäº›æ–‡ä»¶åšä»»ä½•ä¿®æ”¹ï¼Œæ¯”å¦‚æŸä¸ªç‰¹å®šçš„æƒ…å†µä¸‹æˆ‘æƒ³å»çœ‹çœ‹æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶å†…å®¹ï¼Œé‡Œé¢çš„å†…å®¹ä¸€å®šæ˜¯éå¸¸ä¸ç¬¦åˆå„ç§ lint è§„åˆ™çš„ï¼Œä½†æˆ‘ä¸å¸Œæœ›æŒ‰ä¿å­˜æ—¶å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œæ­¤æ—¶å°±éœ€è¦æˆ‘ä»¬æ·»åŠ  `.eslintignore` å’Œ `.prettierignore` ï¼Œæˆ‘ä¸€èˆ¬ä¼šä½¿è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹éƒ½ä¿æŒä¸€è‡´ï¼š

```
/node_modules
/build
/dist
```

å…ˆæ·»åŠ ä»¥ä¸Šä¸‰ä¸ªéœ€è¦å¿½ç•¥çš„æ–‡ä»¶ç›®å½•å¥½äº†ï¼Œä¹‹åå¤§å®¶è§†æƒ…å†µè€Œæ·»åŠ å°±è¡Œã€‚

### 4. StyleLint

ç»è¿‡ä¸Šé¢çš„ä¸€é¡¿æ“ä½œï¼Œæˆ‘ä»¬çš„ js æˆ– ts ä»£ç å·²ç»èƒ½æœ‰è‰¯å¥½çš„ä»£ç é£æ ¼äº†ï¼Œä½†å¯åˆ«å¿˜äº†è¿˜æœ‰æ ·å¼ä»£ç çš„é£æ ¼ä¹Ÿéœ€è¦ç»Ÿä¸€å•Šï¼è¿™ä¸ªçœŸçš„å¾ˆæœ‰å¿…è¦å•Šï¼Œæœ‰æ—¶å€™å»è°ƒè¯•å…¶ä»–äººçš„æ ·å¼ä»£ç ï¼Œè¿™é‡Œä¸€å¨é‚£é‡Œä¸€å¨ï¼Œçœ‹ç€å±å®éš¾å—ã€‚

[![image.png](https://camo.githubusercontent.com/7bd6f457b1700926b6c14ce31fc2e910ad4c0a38cd7e6aaecfccc75b4fc7c783/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343535323730323339352d34323434633330332d393230662d346238302d393431352d6563356638353963336466642e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313230266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323430266f726967696e57696474683d3234302673697a653d3235353436267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313230)](https://camo.githubusercontent.com/7bd6f457b1700926b6c14ce31fc2e910ad4c0a38cd7e6aaecfccc75b4fc7c783/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343535323730323339352d34323434633330332d393230662d346238302d393431352d6563356638353963336466642e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313230266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323430266f726967696e57696474683d3234302673697a653d3235353436267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313230)

æ ¹æ® [stylelint å®˜ç½‘ä»‹ç»](https://stylelint.io/user-guide/get-started)ï¼Œæˆ‘ä»¬å…ˆå®‰è£…ä¸¤ä¸ªåŸºæœ¬çš„åŒ…ï¼š

```
npm install stylelint stylelint-config-standard -D
```

ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º `.stylelintrc.js` æ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
module.exports = {
  extends: ['stylelint-config-standard'],
  rules: {
    'comment-empty-line-before': null,
    'declaration-empty-line-before': null,
    'function-name-case': 'lower',
    'no-descending-specificity': null,
    'no-invalid-double-slash-comments': null,
    'rule-empty-line-before': 'always',
  },
  ignoreFiles: ['node_modules/**/*', 'build/**/*'],
}
```

åŒæ ·ï¼Œç®€å•ä»‹ç»ä¸‹é…ç½®ä¸Šçš„ä¸‰ä¸ªå±æ€§ï¼š

- `extends` ï¼šå…¶å®å’Œ `eslint` çš„ç±»ä¼¼ï¼Œéƒ½æ˜¯æ‰©å±•ï¼Œä½¿ç”¨ `stylelint` å·²ç»é¢„è®¾å¥½çš„ä¸€äº›è§„åˆ™ã€‚
- `rules` ï¼šå°±æ˜¯å…·ä½“çš„è§„åˆ™ï¼Œå¦‚æœé»˜è®¤çš„ä½ ä¸æ»¡æ„ï¼Œå¯ä»¥è‡ªå·±å†³å®šæŸä¸ªè§„åˆ™çš„å…·ä½“å½¢å¼ã€‚
- `ignoreFiles` ï¼šä¸åƒ `eslint` éœ€è¦æ–°å»º ignore æ–‡ä»¶ï¼Œ `stylelint` é…ç½®å°±æ”¯æŒå¿½ç•¥é…ç½®å­—æ®µï¼Œæˆ‘ä»¬å…ˆæ·»åŠ  `node_modules` å’Œ `build` ï¼Œä¹‹åæœ‰éœ€è¦å¤§å®¶å¯è‡ªè¡Œæ·»åŠ ã€‚

> å…¶ä¸­å…³äº `xxx/**/*` è¿™ç§å†™æ³•çš„æ„æ€æœ‰ä¸ç†è§£çš„ï¼Œå¤§å®¶å¯åœ¨ `google` ï¼ˆæˆ–ç™¾åº¦ï¼‰**globæ¨¡å¼**ã€‚

ä¸ `eslint` ä¸€æ ·ï¼Œæƒ³è¦åœ¨ç¼–è¾‘ä»£ç æ—¶æœ‰é”™è¯¯æç¤ºä»¥åŠè‡ªåŠ¨ä¿®å¤åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ vscode å®‰è£…ä¸€ä¸ªæ‰©å±•ï¼š

[![image.png](https://camo.githubusercontent.com/bafa477bb95b487eebb0d7002bf381f62ae6c3346688faf3f951b7ff728d043d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343535363436373139322d37363231616639652d396163362d343732352d383366382d3338303438306234393061622e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313532266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333034266f726967696e57696474683d313630362673697a653d3539303830267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383033)](https://camo.githubusercontent.com/bafa477bb95b487eebb0d7002bf381f62ae6c3346688faf3f951b7ff728d043d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343535363436373139322d37363231616639652d396163362d343732352d383366382d3338303438306234393061622e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313532266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333034266f726967696e57696474683d313630362673697a653d3539303830267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383033)

å¹¶ä¸”åœ¨ `.vscode/settings.json` ä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
{
	// ä½¿ç”¨ stylelint è‡ªèº«çš„æ ¡éªŒå³å¯
  "css.validate": false,
  "less.validate": false,
  "scss.validate": false,
  
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
    "source.fixAll.stylelint": true
  },
}
```

è¿™æ—¶å€™éšä¾¿å»ºä¸€ä¸ª `.less` æ–‡ä»¶æµ‹è¯•ä¸‹ï¼Œå·²ç»æœ‰é”™è¯¯æç¤ºå’Œä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤åŠŸèƒ½äº†ã€‚

[![123.gif](https://camo.githubusercontent.com/835d349cffdcce76d50550b658f4b5150c040edc8dfa5fdf4c8f8fcac0169fcf/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343535363934383339322d37343533376632312d643933382d343566382d383436372d3362643730373436323434392e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d343137266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d3132332e676966266f726967696e4865696768743d343137266f726967696e57696474683d3830302673697a653d31343933323734267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)](https://camo.githubusercontent.com/835d349cffdcce76d50550b658f4b5150c040edc8dfa5fdf4c8f8fcac0169fcf/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343535363934383339322d37343533376632312d643933382d343566382d383436372d3362643730373436323434392e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d343137266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d3132332e676966266f726967696e4865696768743d343137266f726967696e57696474683d3830302673697a653d31343933323734267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)

æˆ‘ä»¬å¯ä»¥åœ¨ç¤¾åŒºä¸‹è½½ä¸€äº›ä¼˜ç§€çš„ `stylelint extends` å’Œ `stylelint plugins` ï¼š

- [stylelint-config-rational-order](https://github.com/constverum/stylelint-config-rational-order) ç”¨äºæŒ‰ç…§ä»¥ä¸‹é¡ºåºå°†ç›¸å…³å±æ€§å£°æ˜è¿›è¡Œåˆ†ç»„æ¥å¯¹å®ƒä»¬è¿›è¡Œæ’åº

```
1.Positioning   2.Box Model    3.Typography    4.Visual    5.Animation    6.Misc
```

- [stylelint-declaration-block-no-ignored-properties](https://github.com/kristerkari/stylelint-declaration-block-no-ignored-properties) ç”¨äºæç¤ºæˆ‘ä»¬å†™çš„çŸ›ç›¾æ ·å¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ä¸­ `width` æ˜¯ä¼šè¢«æµè§ˆå™¨å¿½ç•¥çš„ï¼Œè¿™å¯ä»¥é¿å…æˆ‘ä»¬çŠ¯ä¸€äº›ä½çº§é”™è¯¯ï½

```
{ display: inline; width: 100px; }
```

æˆ‘ä»¬æ¥ä¸€æ³¢å®‰è£…ï¼š

```
npm install stylelint-order stylelint-config-rational-order stylelint-declaration-block-no-ignored-properties -D
```

ç°åœ¨æ›´æ”¹ä»¥ä¸‹æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ï¼š

```
module.exports = {
  extends: ['stylelint-config-standard', 'stylelint-config-rational-order'],
  plugins: ['stylelint-order', 'stylelint-declaration-block-no-ignored-properties'],
  rules: {
    'plugin/declaration-block-no-ignored-properties': true,
    'comment-empty-line-before': null,
    'declaration-empty-line-before': null,
    'function-name-case': 'lower',
    'no-descending-specificity': null,
    'no-invalid-double-slash-comments': null,
    'rule-empty-line-before': 'always',
  },
  ignoreFiles: ['node_modules/**/*', 'build/**/*'],
}
```

è‡³æ­¤ï¼Œ `stylelint` å°±é…ç½®å®Œæˆäº†ï¼Œå…·ä½“çš„è§„åˆ™ä»¥åŠæ’ä»¶å¤§å®¶éƒ½å¯ä»¥åœ¨å…¶å®˜ç½‘è¿›è¡Œæµè§ˆæˆ–æŸ¥æ‰¾ï¼Œç„¶åæ·»åŠ ä¸€äº›è‡ªå·±å¸Œæœ›çš„è§„åˆ™å®šä¹‰ã€‚

### 5. lintå‘½ä»¤

æˆ‘ä»¬åœ¨ `package.json` çš„ `scripts` ä¸­å¢åŠ ä»¥ä¸‹ä¸‰ä¸ªé…ç½®ï¼š

```
{
	scripts: {
  	"lint": "npm run lint-eslint && npm run lint-stylelint",
    "lint-eslint": "eslint -c .eslintrc.js --ext .ts,.tsx,.js src",
    "lint-stylelint": "stylelint --config .stylelintrc.js src/**/*.{less,css,scss}"
  }
}
```

åœ¨æ§åˆ¶å°æ‰§è¡Œ `npm run lint-eslint` æ—¶ï¼Œä¼šå»å¯¹ `src/` ä¸‹çš„æŒ‡å®šåç¼€æ–‡ä»¶è¿›è¡Œ `eslint` è§„åˆ™æ£€æµ‹ï¼Œ `lint-stylelint` ä¹Ÿæ˜¯åŒç†ï¼Œ `npm run lint` ä¼šä¸¤è€…éƒ½æŒ‰é¡ºåºæ‰§è¡Œã€‚

å…¶å®æˆ‘ä¸ªäººæ¥è¯´ï¼Œè¿™å‡ ä¸ªå‘½ä»¤æˆ‘æ˜¯éƒ½ä¸æƒ³å†™è¿› `scripts` ä¸­çš„ï¼Œå› ä¸ºæˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™ï¼Œä¸è§„èŒƒçš„åœ°æ–¹å°±å·²ç»è‡ªåŠ¨ä¿®å¤äº†ï¼Œåªè¦ä¿æŒè‰¯å¥½çš„ä¹ æƒ¯ï¼Œçœ‹åˆ°æœ‰çˆ†çº¢çº¿çš„æ—¶å€™æƒ³åŠæ³•å»è§£å†³å®ƒï¼Œè€Œä¸æ˜¯è§†è€Œä¸è§ï¼Œé‚£ä¹ˆæ ¹æœ¬ä¸éœ€è¦å¯¹æ‰€æœ‰åŒ…å«çš„æ–‡ä»¶å†è¿›è¡Œä¸€æ¬¡å‘½ä»¤å¼çš„è§„åˆ™æ ¡éªŒã€‚

ä½†æ˜¯å¯¹äºæ–°æäº¤ç¼“å­˜åŒºçš„ä»£ç è¿˜æ˜¯æœ‰å¿…è¦æ‰§è¡Œä¸€æ¬¡æ ¡éªŒçš„ï¼Œè¿™ä¸ªåé¢ä¼šè¯´åˆ°ã€‚

### 6. ESLintã€Stylelint å’Œ Prettier çš„å†²çª

æœ‰æ—¶å€™ `eslint` å’Œ `stylelint` çš„è‡ªå®šä¹‰è§„åˆ™å’Œ `prettier` å®šä¹‰çš„è§„åˆ™å†²çªäº†ï¼Œæ¯”å¦‚åœ¨ `.eslintrc.js` ä¸­æŸä¸ª `extends` çš„é…ç½®è®¾ç½®äº†ç¼©è¿›å¤§å°ä¸º `4` ï¼Œä½†æ˜¯æˆ‘ `.prettierrc` ä¸­æˆ‘è®¾ç½®çš„ç¼©è¿›ä¸º `2` ï¼Œé‚£å°±ä¼šå‡ºç°æˆ‘ä»¬ä¿å­˜æ—¶ï¼Œå…ˆæ˜¯ `eslint` çš„è‡ªåŠ¨ä¿®å¤ç¼©è¿›å¤§å°ä¸º `4` ï¼Œè¿™ä¸ªæ—¶å€™ `prettier` ä¸å¼€å¿ƒäº†ï¼Œåˆå¼ºåˆ¶æŠŠç¼©è¿›æ”¹ä¸ºäº† `2` ï¼Œå¥½äº†ï¼Œ `eslint` ä¸å¼€å¿ƒï¼Œä»£ç ç›´æ¥çˆ†çº¢ï¼
[![12.gif](https://camo.githubusercontent.com/5c9604fe522acbebb5f1648a899f7b1798170a485cbab87f3814d3705cd31991/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343536313736313536302d66396531666662352d356436652d343766352d623264612d3734313031333164303465622e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323537266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d323537266f726967696e57696474683d3830302673697a653d363931363631267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)](https://camo.githubusercontent.com/5c9604fe522acbebb5f1648a899f7b1798170a485cbab87f3814d3705cd31991/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539343536313736313536302d66396531666662352d356436652d343766352d623264612d3734313031333164303465622e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323537266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d323537266f726967696e57696474683d3830302673697a653d363931363631267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)
é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™éƒ¨åˆ†å†²çªå‘¢ï¼Ÿ

å…¶å®å®˜æ–¹æä¾›äº†å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼ŒæŸ¥é˜… [Integrating with Linters](https://prettier.io/docs/en/integrating-with-linters.html) å¯çŸ¥ï¼Œé’ˆå¯¹ `eslint` å’Œ `stylelint` éƒ½æœ‰å¾ˆå¥½çš„æ’ä»¶æ”¯æŒï¼Œå…¶åŸç†éƒ½æ˜¯ç¦ç”¨ä¸ `prettier` å‘ç”Ÿå†²çªçš„è§„åˆ™ã€‚

å®‰è£…æ’ä»¶ [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier) ï¼Œè¿™ä¸ªæ’ä»¶ä¼šç¦ç”¨æ‰€æœ‰å’Œ prettier èµ·å†²çªçš„è§„åˆ™ï¼š

```
npm install eslint-config-prettier -D
```

æ·»åŠ ä»¥ä¸‹é…ç½®åˆ° `.eslintrc.js` çš„ `extends` ä¸­ï¼š

```
{
  extends: [
    // other configs ...
   	'prettier',
    'prettier/@typescript-eslint',
    'prettier/react',
    'prettier/unicorn',
  ]
}
```

è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ `'prettier'` åŠä¹‹åçš„é…ç½®è¦æ”¾åˆ°åŸæ¥æ·»åŠ çš„é…ç½®çš„åé¢ï¼Œè¿™æ ·æ‰èƒ½è®© `prettier` ç¦ç”¨ä¹‹åä¸å…¶å†²çªçš„è§„åˆ™ã€‚

`stylelint` çš„å†²çªè§£å†³ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå…ˆå®‰è£…æ’ä»¶ [stylelint-config-prettier](https://github.com/prettier/stylelint-config-prettier) ï¼š

```
npm install stylelint-config-prettier -D
```

æ·»åŠ ä»¥ä¸‹é…ç½®åˆ° `.stylelintrc.js` çš„ `extends` ä¸­ï¼š

```
{  
	extends: [
  	// other configs ...
    'stylelint-config-prettier'
  ]
}
```

### 7. lint-staged

åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡æäº¤å‰æˆ‘ä»¬éƒ½è¦å¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ä»¥åŠ `eslint` å’Œ `stylelint` çš„è§„åˆ™æ ¡éªŒï¼Œä»¥æ­¤æ¥å¼ºåˆ¶è§„èŒƒæˆ‘ä»¬çš„ä»£ç é£æ ¼ï¼Œä»¥åŠé˜²æ­¢éšæ€§ BUG çš„äº§ç”Ÿã€‚

é‚£ä¹ˆæœ‰ä»€ä¹ˆåŠæ³•åªå¯¹æˆ‘ä»¬ git ç¼“å­˜åŒºæœ€æ–°æ”¹åŠ¨è¿‡çš„æ–‡ä»¶è¿›è¡Œä»¥ä¸Šçš„æ ¼å¼åŒ–å’Œ lint è§„åˆ™æ ¡éªŒå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯[ lint-staged](https://github.com/okonet/lint-staged) ã€‚

æˆ‘ä»¬è¿˜éœ€è¦å¦ä¸€ä¸ªå·¥å…· [husky](https://github.com/typicode/husky) ï¼Œå®ƒä¼šæä¾›ä¸€äº›é’©å­ï¼Œæ¯”å¦‚æ‰§è¡Œ `git commit` ä¹‹å‰çš„é’©å­ `pre-commit` ï¼Œå€ŸåŠ©è¿™ä¸ªé’©å­æˆ‘ä»¬å°±èƒ½æ‰§è¡Œ `lint-staged` æ‰€æä¾›çš„ä»£ç æ–‡ä»¶æ ¼å¼åŒ–åŠ lint è§„åˆ™æ ¡éªŒï¼

[![å›¾ç‰‡åç§°](https://camo.githubusercontent.com/a211498abc465f673c3fbcf748f9f0f077e9ed4b9b706da1dea51e04b018852f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343536363137393033342d34656461623336392d396464642d346133662d616437312d3434663538376330363664362e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333530266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d373030266f726967696e57696474683d3730302673697a653d393139373531267374617475733d646f6e65267374796c653d6e6f6e652677696474683d333530)](https://camo.githubusercontent.com/a211498abc465f673c3fbcf748f9f0f077e9ed4b9b706da1dea51e04b018852f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343536363137393033342d34656461623336392d396464642d346133662d616437312d3434663538376330363664362e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333530266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d373030266f726967696e57696474683d3730302673697a653d393139373531267374617475733d646f6e65267374796c653d6e6f6e652677696474683d333530)

èµ¶ç´§å®‰è£…ä¸€ä¸‹è¿™ä¸¤ä¸ªæ’ä»¶å§ï¼š

```
npm install husky lint-staged -D
```

éšååœ¨ `package.json` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼ˆä½ç½®éšæ„ï¼Œæˆ‘æ¯”è¾ƒä¹ æƒ¯æ”¾åœ¨ `repository` ä¸Šé¢ï¼‰ï¼š

```
{
	"husky": {
    "hooks": {
      "pre-commit": "lint-staged",
    }
  },
  "lint-staged": {
    "*.{ts,tsx,js}": [
      "eslint --config .eslintrc.js"
    ],
    "*.{css,less,scss}": [
      "stylelint --config .stylelintrc.js"
    ],
    "*.{ts,tsx,js,json,html,yml,css,less,scss,md}": [
      "prettier --write"
    ]
  },
}
```

é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šå¯¹æš‚å­˜åŒºåç¼€ä¸º `.ts .tsx .js` çš„æ–‡ä»¶è¿›è¡Œ `eslint` æ ¡éªŒï¼Œ `--config` çš„ä½œç”¨æ˜¯æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚ä¹‹ååŒç†å¯¹æš‚å­˜åŒºåç¼€ä¸º `.css .less .scss` çš„æ–‡ä»¶è¿›è¡Œ `stylelint` æ ¡éªŒï¼Œæ³¨æ„âš ï¸ï¼Œæˆ‘ä»¬æ²¡æœ‰æ·»åŠ  `--fix` æ¥è‡ªåŠ¨ä¿®å¤ä¸ç¬¦åˆè§„åˆ™çš„ä»£ç ï¼Œå› ä¸ºè‡ªåŠ¨ä¿®å¤çš„å†…å®¹å¯¹æˆ‘ä»¬ä¸é€æ˜ï¼Œä½ ä¸çŸ¥é“å“ªäº›ä»£ç è¢«æ›´æ”¹ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ˜¯æ— æ³•æ¥å—çš„ã€‚

ä½†æ˜¯åœ¨ä½¿ç”¨ `prettier` è¿›è¡Œä»£ç æ ¼å¼åŒ–æ—¶ï¼Œå®Œå…¨å¯ä»¥æ·»åŠ  `--write` æ¥ä½¿æˆ‘ä»¬çš„ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œå®ƒä¸ä¼šæ›´æ”¹è¯­æ³•å±‚é¢ä¸Šçš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒã€‚

> å¯èƒ½å¤§å®¶æœç´¢ä¸€äº›æ–‡ç« çš„æ—¶å€™ï¼Œä¼šå‘ç°åœ¨ lint-staged ä¸­è¿˜é…ç½®äº†ä¸€ä¸ª git add ï¼Œå®é™…ä¸Šåœ¨ v10 ç‰ˆæœ¬ä¹‹åä»»ä½•è¢«ä¿®æ”¹äº†çš„åŸ staged åŒºçš„æ–‡ä»¶éƒ½ä¼šè¢«è‡ªåŠ¨ git addï¼Œæ‰€ä»¥æ— éœ€å†æ·»åŠ ã€‚

### 8. commitlint + changelog

> åœ¨å¤šäººåä½œçš„é¡¹ç›®ä¸­ï¼Œå¦‚æœ git çš„æäº¤è¯´æ˜ç²¾å‡†ï¼Œåœ¨åæœŸåä½œä»¥åŠ bug å¤„ç†æ—¶ä¼šå˜å¾—æœ‰æ®å¯æŸ¥ï¼Œé¡¹ç›®çš„å¼€å‘å¯ä»¥æ ¹æ®è§„èŒƒçš„æäº¤è¯´æ˜å¿«é€Ÿç”Ÿæˆå¼€å‘æ—¥å¿—ï¼Œä»è€Œæ–¹ä¾¿å¼€å‘è€…æˆ–ç”¨æˆ·è¿½è¸ªé¡¹ç›®çš„å¼€å‘ä¿¡æ¯å’ŒåŠŸèƒ½ç‰¹æ€§ã€‚

> å»ºè®®é˜…è¯» [Commit message å’Œ Change log ç¼–å†™æŒ‡å—ï¼ˆé˜®ä¸€å³°ï¼‰](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)

[commitlint](https://github.com/conventional-changelog/commitlint) å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œ git commit æ—¶çš„ message æ ¼å¼æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œ[conventional-changelog](https://github.com/conventional-changelog/commitlint) å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆ `changelog` ï¼Œè‡³äºåœ¨å‘½ä»¤è¡Œä¸­è¿›è¡Œå¯è§†åŒ–çš„ git commit æ’ä»¶ [commitizen](https://github.com/commitizen/cz-cli) æˆ‘ä»¬å°±ä¸é…äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œäº†è§£ï½

é¦–å…ˆå®‰è£… `commitlint` ç›¸å…³ä¾èµ–ï¼š

```
npm install @commitlint/cli @commitlint/config-conventional -D
```

[@commitlint/config-conventional](https://github.com/conventional-changelog/commitlint/tree/master/@commitlint/config-conventional) ç±»ä¼¼ `eslint` é…ç½®æ–‡ä»¶ä¸­çš„ `extends` ï¼Œå®ƒæ˜¯å®˜æ–¹æ¨èçš„ angular é£æ ¼çš„ commitlint é…ç½®ï¼Œæä¾›äº†å°‘é‡çš„ lint è§„åˆ™ï¼Œé»˜è®¤åŒ…æ‹¬äº†ä»¥ä¸‹é™¤äº†æˆ‘è‡ªå·±æ–°å¢çš„ `type` ã€‚

éšååœ¨æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶ `.commitlintrc.js` ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„ commitlint é…ç½®æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      ['build', 'ci', 'chore', 'docs', 'feat', 'fix', 'perf', 'refactor', 'revert', 'style', 'test', 'anno'],
    ],
  },
}
```

æˆ‘è‡ªå·±å¢åŠ äº†ä¸€ç§ `anno` ï¼Œç›®çš„æ˜¯è¡¨ç¤ºä¸€äº›æ³¨é‡Šçš„å¢åˆ æ”¹çš„æäº¤ã€‚

```
/**
 * build : æ”¹å˜äº†buildå·¥å…· å¦‚ webpack
 * ci : æŒç»­é›†æˆæ–°å¢
 * chore : æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
 * feat : æ–°åŠŸèƒ½
 * docs : æ–‡æ¡£æ”¹å˜
 * fix : ä¿®å¤bug
 * perf : æ€§èƒ½ä¼˜åŒ–
 * refactor : æŸä¸ªå·²æœ‰åŠŸèƒ½é‡æ„
 * revert : æ’¤é”€ä¸Šä¸€æ¬¡çš„ commit
 * style : ä»£ç æ ¼å¼æ”¹å˜
 * test : å¢åŠ æµ‹è¯•
 * anno: å¢åŠ æ³¨é‡Š
 */
```

éšåå›åˆ° `package.json` çš„ `husky` é…ç½®ï¼Œå¢åŠ ä¸€ä¸ªé’©å­ï¼š

```
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "commitlint --config .commitlintrc.js -E HUSKY_GIT_PARAMS"
    }
  },
}
```

`-E HUSKY_GIT_PARAMS` ç®€å•ç†è§£å°±æ˜¯ä¼šæ‹¿åˆ°æˆ‘ä»¬çš„ message ï¼Œç„¶å commitlint å†å»è¿›è¡Œ lint æ ¡éªŒã€‚

æ¥ç€é…ç½®ç”Ÿæˆæˆ‘ä»¬çš„ changelog ï¼Œé¦–å…ˆå®‰è£…ä¾èµ–ï¼š

```
npm install conventional-changelog-cli -D
```

åœ¨ `package.json` çš„ `scripts` ä¸‹å¢åŠ ä¸€ä¸ªå‘½ä»¤ï¼š

```
{
  "scripts": {
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s"
  },
}
```

ä¹‹åå°±å¯ä»¥é€šè¿‡ `npm run changelog` ç”Ÿæˆ angular é£æ ¼çš„ changelog ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢è¿™æ¡å‘½ä»¤äº§ç”Ÿçš„ changelog æ˜¯åŸºäºä¸Šæ¬¡ tag ç‰ˆæœ¬ä¹‹åçš„å˜æ›´ï¼ˆfeatã€fix ç­‰ç­‰ï¼‰æ‰€äº§ç”Ÿçš„ã€‚

ç°åœ¨å°±æ¥æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬ä¸Šé¢çš„å·¥ä½œæœ‰æ²¡æœ‰æ­£å¸¸è¿è¡Œå§ï¼æ‰§è¡Œä»¥ä¸‹æäº¤ä¿¡æ¯ä¸è§„èŒƒï¼ˆchore å†™æˆ choraï¼‰çš„å‘½ä»¤ï¼š

```
# æäº¤æ‰€æœ‰å˜åŒ–åˆ°ç¼“å­˜åŒº
git add -A
# æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯ 
git commit -m "chora: add commitlint to force commit style"
```

åƒé¢„æœŸä¸­çš„ä¸€è‡´ï¼Œå‡ºç°äº†ä»¥ä¸‹æŠ¥é”™ï¼š

[![image.png](https://camo.githubusercontent.com/06501b9ea02eebf7280992d621851c1fae0bdbb29da2efb402e5a0b4c95f3878/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343537343537343039342d33626530636537372d653435612d343463392d616664322d3431633862383738393130372e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323237266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343534266f726967696e57696474683d313632362673697a653d3836353833267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383133)](https://camo.githubusercontent.com/06501b9ea02eebf7280992d621851c1fae0bdbb29da2efb402e5a0b4c95f3878/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343537343537343039342d33626530636537372d653435612d343463392d616664322d3431633862383738393130372e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323237266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343534266f726967696e57696474683d313632362673697a653d3836353833267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383133)

é‚£æˆ‘ä»¬ç°åœ¨è¿›è¡Œæˆ‘ä»¬çš„æäº¤ï¼ŒæŠŠæ•…æ„å†™é”™çš„æ”¹å›æ¥ï¼š

```
git commit -m "chore: add commitlint to force commit style"
```

è¿™æ—¶å€™æˆ‘ä»¬æˆåŠŸ commit ï¼Œå†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æäº¤åˆ°è¿œç«¯ï¼š

```
git push origin master
```

**ç»å†äº†æ¼«é•¿çš„é…ç½®ï¼Œæˆ‘ä»¬â€œåˆæ­¥â€å½¢æˆäº†ä¸€ä¸ªå®Œå–„çš„é¡¹ç›®å¼€å‘ç¯å¢ƒï¼Œæ¥ä¸‹æ¥å°±å¼€å§‹è¿›å…¥ Webpack çš„ä¸–ç•Œå§ï¼**

[![image.png](https://camo.githubusercontent.com/95814083225c33edaecc6aa4c3d5696b9b7a80c9a3a92872f74d1f3b23c644eb/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343537343830393734342d31636136323331342d643233342d346130392d396161362d6537616164363139613462342e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313230266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323430266f726967696e57696474683d3234302673697a653d313235363332267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313230)](https://camo.githubusercontent.com/95814083225c33edaecc6aa4c3d5696b9b7a80c9a3a92872f74d1f3b23c644eb/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539343537343830393734342d31636136323331342d643233342d346130392d396161362d6537616164363139613462342e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313230266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323430266f726967696e57696474683d3234302673697a653d313235363332267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313230)

## Webpack åŸºæœ¬é…ç½®

æˆ‘ä»¬æœ€ç»ˆçš„é…ç½®è¦æ”¯æŒ `React` å’Œ `Typescript` çš„å¼€å‘ä¸ç”Ÿäº§ï¼Œç°åœ¨çš„æˆ‘ä»¬çš„æ€è·¯æ˜¯å°†å¯¹è¿™ä¸¤ä¸ªéƒ¨åˆ†çš„æ”¯æŒæ”¾åˆ°æœ€åå»é…ç½®ï¼Œä¸€å¼€å§‹å…ˆæŠŠå¿…è¦çš„éƒ½é…å¥½ï¼Œè¿™æ ·å¤§å®¶èƒ½æœ‰ä¸€ä¸ªå¾ˆç›´è§‚çš„å°è±¡ï¼Œä»€ä¹ˆæ—¶å€™è¯¥åšä»€ä¹ˆï¼Ÿæ€ä¹ˆåšï¼Ÿ

å¯¹äº `Webpack` çš„é…ç½®ï¼Œæˆ‘ä¼šå°½é‡åœ°å»è§£é‡Šæ¸…æ¥šæ¯ä¸€ä¸ªæ–°å¢çš„é…ç½®éƒ½æœ‰ä»€ä¹ˆç”¨ï¼Œå¸Œæœ›å¤§å®¶è€å¿ƒé˜…è¯»ï½

> âš ï¸ ç›®å‰è®²è§£çš„ webpack ç‰ˆæœ¬ä¸º 4+

### 

### 1. å¼€å§‹

æƒ³è¦ä½¿ç”¨ webpackï¼Œè¿™ä¸¤ä¸ªåŒ…ä½ ä¸å¾—ä¸è£…ï¼š

```
npm install webpack webpack-cli -D
```

- `webpack` ï¼šè¿™ä¸å¿…å¤šè¯´ï¼Œå…¶ç”¨äºç¼–è¯‘ JavaScript æ¨¡å—ã€‚
- `webpack-cli` ï¼šæ­¤å·¥å…·ç”¨äºåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ webpackã€‚

ç´§æ¥ç€æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ `scripts` ï¼Œåœ¨ä¹‹ä¸‹å†å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ `config` ï¼Œåœ¨ `config` ä¸­å†å»ºä¸€ä¸ª `.js` æ–‡ä»¶ `webpack.common.js` ï¼Œæ­¤ç»“æ„å¦‚ä¸‹ï¼š

```
scripts/
    config/
    webpack.common.js
```

ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·çš„ç›®å½•ç»“æ„ï¼Œä¸»è¦è€ƒè™‘åˆ°ä¹‹åè®²äº† `webpack-merge` ä¹‹åï¼Œä¼šæŠŠ webpack çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æ”¾åˆ° `config` ä¸‹ï¼Œå…¶ä½™çš„ä¾‹å¦‚å¯¼å‡ºæ–‡ä»¶è·¯å¾„çš„æ–‡ä»¶æ¨¡å—æ”¾åˆ° `config` åŒçº§ã€‚æ€»ä¹‹å¤§å®¶å…ˆè¿™æ ·æç€ï¼Œä¹‹åå’±æ…¢æ…¢è§£é‡Šã€‚

### 2. inputã€output

**å…¥å£(input)**å’Œ**å‡ºå£(output)**æ˜¯ webpack çš„æ ¸å¿ƒæ¦‚å¿µä¹‹äºŒï¼Œä»åå­—å°±èƒ½å¤§æ¦‚æ„ŸçŸ¥ä»–ä»¬æ˜¯å¹²ä»€ä¹ˆçš„ï¼š**æŒ‡å®šä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰å…¥å£æ–‡ä»¶ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„æ“ä½œä¹‹åè½¬æ¢æˆå¦ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰æ–‡ä»¶**ã€‚

æ¥ä¸‹æ¥åœ¨ `webpack.common.js` ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```
const path = require('path')

module.exports = {
  entry: {
    app: path.resolve(__dirname, '../../src/app.js'),
  },
  output: {
    filename: 'js/[name].[hash:8].js',
    path: path.resolve(__dirname, '../../dist'),
  },
}
```

> webpack é…ç½®æ˜¯æ ‡å‡†çš„ Node.js çš„ CommonJS æ¨¡å—ï¼Œå®ƒé€šè¿‡ `require` æ¥å¼•å…¥å…¶ä»–æ¨¡å—ï¼Œé€šè¿‡ `module.exports` å¯¼å‡ºæ¨¡å—ï¼Œç”± webpack æ ¹æ®å¯¹è±¡å®šä¹‰çš„å±æ€§è¿›è¡Œè§£æã€‚

- `entry` ï¼šå®šä¹‰äº†å…¥å£æ–‡ä»¶è·¯å¾„ï¼Œå…¶å±æ€§å `app` è¡¨ç¤ºå¼•å…¥æ–‡ä»¶çš„åå­—ã€‚
- `output` ï¼šå®šä¹‰äº†ç¼–è¯‘æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶åä»¥åŠæ‰€åœ¨è·¯å¾„ã€‚

è¿™æ®µä»£ç çš„æ„æ€å°±æ˜¯å‘Šè¯‰ webpackï¼Œå…¥å£æ–‡ä»¶æ˜¯æ ¹ç›®å½•ä¸‹çš„ `src` ä¸‹çš„ `app.js` æ–‡ä»¶ï¼Œæ‰“åŒ…è¾“å‡ºçš„æ–‡ä»¶ä½ç½®ä¸ºæ ¹ç›®å½•ä¸‹çš„ `dist` ä¸­ï¼Œæ³¨æ„åˆ° `filename` ä¸º `js/[name].[hash:8].js` ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ `dist` ç›®å½•ä¸‹å†å»ºä¸€ä¸ª `js` æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æ”¾äº†å‘½åä¸å…¥å£æ–‡ä»¶å‘½åä¸€è‡´ï¼Œå¹¶å¸¦æœ‰ hash å€¼çš„æ‰“åŒ…ä¹‹åçš„ js æ–‡ä»¶ã€‚

æ¥ä¸‹æ¥åœ¨æ ¹ç›®å½•åˆ›å»º `src` æ–‡ä»¶å¤¹ï¼Œæ–°å»º `app.js` æ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```
const root = document.querySelector('#root')
root.innerHTML = 'hello, webpack!'
```

ç°åœ¨æˆ‘ä»¬å°è¯•ä½¿ç”¨åˆšæ‰çš„ webpack é…ç½®å¯¹å…¶è¿›è¡Œæ‰“åŒ…ï¼Œé‚£å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ
æ‰“å¼€ `package.json` ï¼Œä¸ºå…¶æ·»åŠ ä¸€æ¡ npm å‘½ä»¤ï¼š

```
{
  "scripts": {
+   "build": "webpack --config ./scripts/config/webpack.common.js",
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s",
    "lint": "npm run lint-eslint && npm run lint-stylelint",
    "lint-eslint": "eslint -c .eslintrc.js --ext .ts,.tsx,.js src",
    "lint-stylelint": "stylelint --config .stylelintrc.js src/**/*.{less,css,scss}"
  },
}
```

> `--config` é€‰é¡¹æ¥æŒ‡å®šé…ç½®æ–‡ä»¶

ç„¶ååœ¨æ§åˆ¶å°è¾“å…¥ï¼š

```
npm run build
```

ç­‰å¾…ä¸€ä¸¤ç§’åï¼Œä½ ä¼šå‘ç°æ ¹ç›®å½•ä¸‹çœŸçš„å¤šå‡ºäº†ä¸€ä¸ª `dist` æ–‡ä»¶å¤¹ï¼Œé‡Œé¢çš„å†…å®¹å’Œæˆ‘ä»¬ webpack é…ç½®æ‰€æƒ³è¦è¾¾åˆ°çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼šä¸€ä¸ª js æ–‡ä»¶å¤¹ä»¥åŠä¸‹é¢çš„ï¼ˆæ¯”å¦‚ï¼‰ `app.e406fb9b.js` çš„æ–‡ä»¶ã€‚

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»åˆæ­¥ä½¿ç”¨ webpack æ‰“äº†ä¸€ä¸ªåŒ…ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€æ­¥å¼€å§‹æ‰©å±•å…¶ä»–çš„é…ç½®ä»¥åŠç›¸åº”ä¼˜åŒ–å§ï¼ï½

### 3. å…¬ç”¨å˜é‡æ–‡ä»¶

åœ¨ä¸Šé¢ç®€å•çš„ webpack é…ç½®ä¸­ï¼Œæˆ‘ä»¬å‘ç°æœ‰ä¸¤ä¸ªè¡¨ç¤ºè·¯å¾„çš„è¯­å¥ï¼š

```
path.resolve(__dirname, '../../src/app.js')
path.resolve(__dirname, '../../dist')
```

- `path.resolve` ï¼šnode çš„å®˜æ–¹ apiï¼Œå¯ä»¥å°†è·¯å¾„æˆ–è€…è·¯å¾„ç‰‡æ®µè§£ææˆç»å¯¹è·¯å¾„ã€‚
- `__dirname` ï¼šå…¶æ€»æ˜¯æŒ‡å‘è¢«æ‰§è¡Œ js æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚åœ¨æˆ‘ä»¬ webpack æ–‡ä»¶ä¸­è®¿é—®äº† `__dirname` ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°±æ˜¯åœ¨ç”µè„‘ç³»ç»Ÿä¸Šçš„ç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚åœ¨æˆ‘ç”µè„‘ä¸Šå°±æ˜¯ï¼š

```
/Users/RMBP/Desktop/react-ts-quick-starter/scripts/config
```

æ‰€ä»¥æˆ‘ä»¬ä¸Šé¢çš„å†™æ³•ï¼Œå¤§å®¶å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œ `path.resolve` æŠŠ**æ ¹æ®å½“å‰æ–‡ä»¶çš„æ‰§è¡Œè·¯å¾„ä¸‹**è€Œæ‰¾åˆ°çš„æƒ³è¦è®¿é—®åˆ°çš„**æ–‡ä»¶ç›¸å¯¹è·¯å¾„**è½¬æ¢æˆäº†ï¼š**è¯¥æ–‡ä»¶åœ¨ç³»ç»Ÿä¸­çš„ç»å¯¹è·¯å¾„ï¼**

æ¯”å¦‚æˆ‘çš„å°±æ˜¯ï¼š

```
/Users/RMBP/Desktop/react-ts-quick-starter/src/app.js
```

ä½†æ˜¯å¤§å®¶ä¹Ÿçœ‹å‡ºæ¥äº†ï¼Œè¿™ç§å†™æ³•éœ€è¦ä¸æ–­çš„ `../../` ï¼Œè¿™ä¸ªåœ¨æ–‡ä»¶å±‚çº§è¾ƒæ·±æ—¶ï¼Œå¾ˆå®¹æ˜“å‡ºé”™ä¸”å¾ˆä¸ä¼˜é›…ã€‚é‚£æˆ‘ä»¬å°±æ¢ä¸ªæ€è·¯ï¼Œéƒ½ä»æ ¹ç›®å½•å¼€å§‹æ‰¾æ‰€éœ€çš„æ–‡ä»¶è·¯å¾„ä¸ä¹…å¾ˆç®€å•äº†å—ï¼Œç›¸å½“äºçœç•¥äº† `../../` è¿™ä¸€æ­¥ã€‚

åœ¨ `scripts` ä¸‹æ–°å»ºä¸€ä¸ª `constant.js` æ–‡ä»¶ï¼Œä¸“é—¨ç”¨äºå­˜æ”¾æˆ‘ä»¬çš„å…¬ç”¨å˜é‡ï¼ˆä¹‹åè¿˜ä¼šæœ‰å…¶ä»–çš„ï¼‰ï¼š

```
scripts/
	config/
  	webpack.common.js
+ constant.js
```

åœ¨é‡Œé¢å®šä¹‰æˆ‘ä»¬çš„å˜é‡ï¼š

```
const path = require('path')

const PROJECT_PATH = path.resolve(__dirname, '../')
const PROJECT_NAME = path.parse(PROJECT_PATH).name

module.exports = { 
  PROJECT_PATH,
  PROJECT_NAME
}
```

- `PROJECT_PATH` ï¼šè¡¨ç¤ºé¡¹ç›®çš„æ ¹ç›®å½•ã€‚
- `PROJECT_NAME` ï¼šè¡¨ç¤ºé¡¹ç›®åï¼Œç›®å‰ä¸ç”¨ï¼Œä½†ä¹‹åçš„é…ç½®ä¼šç”¨åˆ°ï¼Œæˆ‘ä»¬å°±å…ˆå®šä¹‰å¥½å§ï½

> ä¸Šé¢ä¸¤ä¸ªç®€å•çš„ node api å¤§å®¶å¯ä»¥è‡ªå·±ç®€å•äº†è§£ä¸€ä¸‹ï¼Œä¸æƒ³äº†è§£ä¹Ÿå¯ä»¥ï¼Œåªè¦æ˜ç™½å…¶æœ‰å•¥ä½œç”¨å°±è¡Œã€‚

ç„¶ååœ¨ `webpack.common.js` ä¸­å¼•å…¥ï¼Œä¿®æ”¹ä»£ç ï¼š

```
const { resolve } = require('path')
const { PROJECT_PATH } = require('../constants')

module.exports = {
  entry: {
    app: resolve(PROJECT_PATH, './src/app.js'),
  },
  output: {
    filename: 'js/[name].[hash:8].js',
    path: resolve(PROJECT_PATH, './dist'),
  },
}
```

å¥½äº†ï¼Œç°åœ¨æ˜¯ä¸æ˜¯çœ‹èµ·æ¥æ¸…çˆ½å¤šäº†ï¼Œå¤§å®¶å¯ä»¥ `npm run build` éªŒè¯ä¸‹è‡ªå·±ä»£ç æ˜¯ä¸æ˜¯æœ‰å†™é”™æˆ–é—æ¼å•¥çš„ï½ğŸ¶

### 4. åŒºåˆ†å¼€å‘/ç”Ÿäº§ç¯å¢ƒ

åœ¨ webpack ä¸­é’ˆå¯¹å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒæˆ‘ä»¬è¦åˆ†åˆ«é…ç½®ï¼Œä»¥é€‚åº”ä¸åŒçš„ç¯å¢ƒéœ€æ±‚ï¼Œæ¯”å¦‚åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼ŒæŠ¥é”™è¦èƒ½å®šä½åˆ°æºä»£ç çš„å…·ä½“ä½ç½®ï¼Œè€Œè¿™åˆéœ€è¦æ‰“å‡ºé¢å¤–çš„ `.map` æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸ºäº†ä¸ç‰ºç‰²é¡µé¢æ€§èƒ½ï¼Œä¸éœ€è¦æ·»åŠ æ­¤åŠŸèƒ½ï¼Œæ¯•ç«Ÿï¼Œæ²¡äººä¼šåœ¨ç”Ÿäº§ä¸Šè°ƒè¯•ä»£ç å§ï¼Ÿ

è™½ç„¶éƒ½è¦åˆ†åˆ«é…ç½®ï¼Œä½†æ˜¯åˆæœ‰æŒºå¤šåŸºç¡€é…ç½®æ˜¯å¼€å‘å’Œç”Ÿäº§éƒ½éœ€è¦ä¸”ç›¸åŒçš„ï¼Œé‚£æˆ‘ä»¬ä¸å¯èƒ½å†™ä¸¤ä»½æ–‡ä»¶ï¼Œå†™ä¸¤æ¬¡åŸºç¡€é…ç½®å§ï¼Ÿè¿™ä¹Ÿå¤ªå†—ä½™äº†ï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œ[webpack-merge](https://github.com/survivejs/webpack-merge) ä¸ºæˆ‘ä»¬éƒ½æƒ³å¥½äº†ã€‚

å®‰è£…å®ƒï¼š

```
npm install webpack-merge -D
```

åœ¨ `scripts/config` ä¸‹æ–°å»ºæ–‡ä»¶ `webpack.dev.js` ä½œä¸ºå¼€å‘ç¯å¢ƒé…ç½®ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```
const { merge } = require('webpack-merge')
const common = require('./webpack.common.js')

module.exports = merge(common, {
  mode: 'development',
})
```

åŒæ ·åœ°ï¼Œåœ¨ `scripts/config` ä¸‹æ–°å»ºæ–‡ä»¶ `webpack.prod.js` ä½œä¸ºç”Ÿäº§ç¯å¢ƒé…ç½®ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```
const { merge } = require('webpack-merge')
const common = require('./webpack.common.js')

module.exports = merge(common, {
  mode: 'production',
})
```

> åœ¨æˆ‘ä½¿ç”¨ `require('webpack-merge')` æ—¶ï¼Œç»™æˆ‘æŠ¥äº†ä»¥ä¸‹ eslint çš„æŠ¥é”™ï¼š
> 'webpack-merge' should be listed in the project's dependencies, not devDependencies.
> åªéœ€è¦åœ¨ `.eslintrc.js` ä¸­æ·»åŠ ä»¥ä¸‹è§„åˆ™å³å¯è§£å†³ï¼š
> `'import/no-extraneous-dependencies': [ERROR, { devDependencies: true }]` 

è™½ç„¶éƒ½åˆ†å¼€äº†é…ç½®ï¼Œä½†æ˜¯åœ¨å…¬å…±é…ç½®ä¸­ï¼Œè¿˜æ˜¯å¯èƒ½ä¼šå‡ºç°æŸä¸ªé…ç½®çš„æŸä¸ªé€‰é¡¹åœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸­é‡‡ç”¨ä¸åŒçš„é…ç½®ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š

- ä¸€æ˜¯åˆ†åˆ«åœ¨ dev å’Œ prod é…ç½®æ–‡ä»¶ä¸­å†™ä¸€éï¼Œcommon ä¸­å°±ä¸å†™äº†ã€‚
- äºŒæ˜¯è®¾ç½®æŸä¸ªç¯å¢ƒå˜é‡ï¼Œæ ¹æ®è¿™ä¸ªç¯å¢ƒå˜é‡æ¥åˆ¤åˆ«ä¸åŒç¯å¢ƒã€‚

æ˜¾è€Œæ˜“è§ï¼Œä¸ºäº†ä½¿ä»£ç æœ€å¤§çš„ä¼˜é›…ï¼Œé‡‡ç”¨ç¬¬äºŒç§ã€‚

[cross-env](https://www.npmjs.com/package/cross-env) å¯è·¨å¹³å°è®¾ç½®å’Œä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œä¸åŒæ“ä½œç³»ç»Ÿè®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹å¼ä¸ä¸€å®šç›¸åŒï¼Œæ¯”å¦‚ Mac ç”µè„‘ä¸Šä½¿ç”¨ `export NODE_ENV=development` ï¼Œè€Œ Windows ç”µè„‘ä¸Šä½¿ç”¨çš„æ˜¯ `set NODE_ENV=development` ï¼Œæœ‰äº†è¿™ä¸ªåˆ©å™¨ï¼Œæˆ‘ä»¬æ— éœ€åœ¨è€ƒè™‘æ“ä½œç³»ç»Ÿå¸¦æ¥çš„å·®å¼‚æ€§ã€‚

å®‰è£…å®ƒï¼š

```
npm install cross-env -D
```

ç„¶ååœ¨ `package.json` ä¸­æ·»åŠ ä¿®æ”¹ä»¥ä¸‹ä»£ç ï¼š

```
{
  "scripts": {
+   "start": "cross-env NODE_ENV=development webpack --config ./scripts/config/webpack.dev.js",
+   "build": "cross-env NODE_ENV=production webpack --config ./scripts/config/webpack.prod.js",
-   "build": "webpack --config ./scripts/config/webpack.common.js",
  },
}
```

ä¿®æ”¹ `srcipt/constants.js` æ–‡ä»¶ï¼Œå¢åŠ ä¸€ä¸ªå…¬ç”¨å¸ƒå°”å˜é‡ `isDev` ï¼š

```
const isDev = process.env.NODE_ENV !== 'production'

module.exports = {
  isDev,
	// other
}
```

æˆ‘ä»¬ç°åœ¨å°±ä½¿ç”¨è¿™ä¸ªç¯å¢ƒå˜é‡åšç‚¹äº‹å§ï¼è®°å¾—ä¹‹å‰é…çš„å…¬å…±é…ç½®ä¸­ï¼Œæˆ‘ä»¬ç»™å‡ºå£æ–‡ä»¶çš„åå­—é…äº† `hash:8` ï¼ŒåŸå› æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå³ç”¨æˆ·å·²ç»åœ¨è®¿é—®æˆ‘ä»¬çš„é¡µé¢äº†ï¼Œä»–ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ï¼Œè¯·æ±‚äº†æ¯”å¦‚ `app.js` æ–‡ä»¶ï¼Œæ ¹æ®æµè§ˆå™¨çš„ç¼“å­˜ç­–ç•¥ä¼šå°†è¿™ä¸ªæ–‡ä»¶ç¼“å­˜èµ·æ¥ã€‚ç„¶åæˆ‘ä»¬å¼€å‘ä»£ç å®Œæˆäº†ä¸€ç‰ˆåŠŸèƒ½è¿­ä»£ï¼Œæ¶‰åŠåˆ°æ‰“åŒ…åçš„ `app.js` å‘ç”Ÿäº†å¤§å˜åŒ–ï¼Œä½†æ˜¯è¯¥ç”¨æˆ·ç»§ç»­è®¿é—®æˆ‘ä»¬çš„é¡µé¢æ—¶ï¼Œå¦‚æœç¼“å­˜æ—¶é—´æ²¡æœ‰è¶…å‡ºæˆ–è€…æ²¡æœ‰äººä¸ºæ¸…é™¤ç¼“å­˜ï¼Œé‚£ä¹ˆä»–å°†ç»§ç»­å¾—åˆ°çš„æ˜¯å·²ç¼“å­˜çš„ `app.js` ï¼Œè¿™å°±ç³Ÿç³•äº†ã€‚

äºæ˜¯ï¼Œå½“æˆ‘ä»¬æ–‡ä»¶åŠ äº† hash åï¼Œæ ¹æ®å…¥å£æ–‡ä»¶å†…å®¹çš„ä¸åŒï¼Œè¿™ä¸ª hash å€¼å°±ä¼šå‘ç”Ÿéå¸¸å¤¸å¼ çš„å˜åŒ–ï¼Œå½“æ›´æ–°åˆ°çº¿ä¸Šï¼Œç”¨æˆ·å†æ¬¡è¯·æ±‚ï¼Œå› ä¸ºç¼“å­˜æ–‡ä»¶ä¸­æ‰¾ä¸åˆ°åŒåæ–‡ä»¶ï¼Œå°±ä¼šå‘æœåŠ¡å™¨æ‹¿æœ€æ–°çš„æ–‡ä»¶æ•°æ®ï¼Œè¿™ä¸‹å°±èƒ½ä¿è¯ç”¨æˆ·ä½¿ç”¨åˆ°æœ€æ–°çš„åŠŸèƒ½ã€‚

ä¸è¿‡ï¼Œè¿™ä¸ª hash å€¼åœ¨å¼€å‘ç¯å¢ƒä¸­å¹¶ä¸éœ€è¦ï¼Œäºæ˜¯æˆ‘ä»¬ä¿®æ”¹ `webpack.common.js` æ–‡ä»¶ï¼š

```
- const { PROJECT_PATH } = require('../constants')
+ const { isDev, PROJECT_PATH } = require('../constants')

module.exports = {
	// other...
  output: {
-   filename: 'js/[name].[hash:8].js',
+   filename: `js/[name]${isDev ? '' : '.[hash:8]'}.js`,
    path: resolve(PROJECT_PATH, './dist'),
  },
}
```

### 5. mode

åœ¨æˆ‘ä»¬æ²¡æœ‰è®¾ç½® `mode` æ—¶ï¼Œwebpack é»˜è®¤ä¸ºæˆ‘ä»¬è®¾ä¸ºäº† `mode: 'prodution'` ï¼Œæ‰€ä»¥ä¹‹å‰æ‰“åŒ…åçš„ js æ–‡ä»¶ä»£ç éƒ½æ²¡æ³•çœ‹ï¼Œå› ä¸ºåœ¨ `production` æ¨¡å¼ä¸‹ï¼Œwebpack é»˜è®¤ä¼šä¸‘åŒ–ã€å‹ç¼©ä»£ç ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›é»˜è®¤å¼€å¯çš„é…ç½®ã€‚

æˆ‘ä»¬åªè¦çŸ¥é“ï¼Œä¸åŒæ¨¡å¼ä¸‹ webpack ä¸ºä¸ºå…¶é»˜è®¤å¼€å¯ä¸åŒçš„é…ç½®ï¼Œæœ‰ä¸åŒçš„ä¼˜åŒ–ï¼Œè¯¦ç»†å¯è§ [webpack.mode](https://webpack.js.org/configuration/mode/#root)ã€‚

ç„¶åæ¥ä¸‹æ¥å¤§å®¶å¯ä»¥åˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œçœ‹çœ‹åˆ†åˆ«æ‰“çš„åŒ…æœ‰å•¥åŒºåˆ«ï¼Œä¸»è¦æ„ŸçŸ¥ä¸‹æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ï¼š

```
# å¼€å‘ç¯å¢ƒæ‰“åŒ…
npm run start

# ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…
npm run build
```

### 6. æœ¬åœ°æœåŠ¡å®æ—¶æŸ¥çœ‹é¡µé¢

è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬åˆ°ç°åœ¨ç”šè‡³è¿ä¸ªé¡µé¢éƒ½çœ‹ä¸åˆ°ï¼Œä½¿ç”¨è¿‡å„ç§è„šæ‰‹æ¶çš„æœ‹å‹ä¸€å®šå¾ˆç†Ÿæ‚‰ `npm run start` ï¼Œå®ƒç›´æ¥èµ·ä¸€ä¸ªæœ¬åœ°æœåŠ¡ï¼Œç„¶åé¡µé¢å°±å‡ºæ¥äº†ã€‚è€Œæˆ‘ä»¬ç°åœ¨æ‰§è¡Œè¿™ä¸ªå‘½ä»¤å´åªèƒ½ç®€å•çš„æ‰“ä¸ªåŒ…ï¼Œåˆ«æ€¥ï¼Œæˆ‘ä»¬å€ŸåŠ© [webpack-dev-server](https://github.com/webpack/webpack-dev-server) å’Œ [html-webpack-plugin](https://github.com/jantimon/html-webpack-plugin) å°±èƒ½å®ç°ï¼Œç°åœ¨å…ˆæŠŠå®ƒä»¬å®‰è£…ä¸‹æ¥ï¼š

```
npm install webpack-dev-server html-webpack-plugin -D
```

ç®€å•ä»‹ç»ä¸€ä¸‹ä¸¤ä¸ªå·¥å…·çš„ä½œç”¨ï¼š

- `html-webpack-plugin` ï¼šæ¯ä¸€ä¸ªé¡µé¢æ˜¯ä¸€å®šè¦æœ‰ `html` æ–‡ä»¶çš„ï¼Œè€Œè¿™ä¸ªæ’ä»¶èƒ½å¸®åŠ©æˆ‘ä»¬å°†æ‰“åŒ…åçš„ js æ–‡ä»¶è‡ªåŠ¨å¼•è¿› `html` æ–‡ä»¶ä¸­ï¼Œæ¯•ç«Ÿä½ ä¸å¯èƒ½æ¯æ¬¡æ›´æ”¹ä»£ç åéƒ½æ‰‹åŠ¨å»å¼•å…¥ js æ–‡ä»¶ã€‚
- `webpack-dev-server` ï¼šå¯ä»¥åœ¨æœ¬åœ°èµ·ä¸€ä¸ª http æœåŠ¡ï¼Œé€šè¿‡ç®€å•çš„é…ç½®è¿˜å¯æŒ‡å®šå…¶ç«¯å£ã€çƒ­æ›´æ–°çš„å¼€å¯ç­‰ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª `public` æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾ä¸€äº›å…¬ç”¨çš„é™æ€èµ„æºï¼Œç°åœ¨æˆ‘ä»¬å…ˆåœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ª `index.html` ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React+Typescript å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶</title>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
```

> æ³¨æ„âš ï¸ï¼šé‡Œé¢æœ‰ä¸€ä¸ª div æ ‡ç­¾ï¼Œid å€¼ä¸º root

å› ä¸º `html-webpack-plugin` åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒæˆ‘ä»¬éƒ½éœ€è¦é…ç½®ï¼Œäºæ˜¯æˆ‘ä»¬æ‰“å¼€ `webpck.common.js` å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š

```
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
  entry: {...},
  output: {...},
  plugins: [
  	new HtmlWebpackPlugin({
      template: resolve(PROJECT_PATH, './public/index.html'),
      filename: 'index.html',
      cache: fale, // ç‰¹åˆ«é‡è¦ï¼šé˜²æ­¢ä¹‹åä½¿ç”¨v6ç‰ˆæœ¬ copy-webpack-plugin æ—¶ä»£ç ä¿®æ”¹ä¸€åˆ·æ–°é¡µé¢ä¸ºç©ºé—®é¢˜ã€‚
      minify: isDev ? false : {
        removeAttributeQuotes: true,
        collapseWhitespace: true,
        removeComments: true,
        collapseBooleanAttributes: true,
        collapseInlineTagWhitespace: true,
        removeRedundantAttributes: true,
        removeScriptTypeAttributes: true,
        removeStyleLinkTypeAttributes: true,
        minifyCSS: true,
        minifyJS: true,
        minifyURLs: true,
        useShortDoctype: true,
      },
    }),
  ]
}
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä»¥ `public/index.html` æ–‡ä»¶ä¸ºæ¨¡æ¿ï¼Œå¹¶ä¸”åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯¹ç”Ÿæˆçš„ `html` æ–‡ä»¶è¿›è¡Œäº†ä»£ç å‹ç¼©ï¼Œæ¯”å¦‚å»é™¤æ³¨é‡Šã€å»é™¤ç©ºæ ¼ç­‰ã€‚

> plugin æ˜¯ webpack çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå®ƒä¸°å¯Œäº† webpack æœ¬èº«ï¼Œé’ˆå¯¹æ˜¯ loader ç»“æŸåï¼Œwebpackæ‰“åŒ…çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå®ƒå¹¶ä¸ç›´æ¥æ“ä½œæ–‡ä»¶ï¼Œè€Œæ˜¯åŸºäºäº‹ä»¶æœºåˆ¶å·¥ä½œï¼Œä¼šç›‘å¬ webpack æ‰“åŒ…è¿‡ç¨‹ä¸­çš„æŸäº›èŠ‚ç‚¹ï¼Œæ‰§è¡Œå¹¿æ³›çš„ä»»åŠ¡ã€‚

éšååœ¨ `webpack.dev.js` ä¸‹å¢åŠ æœ¬åœ°æœåŠ¡çš„é…ç½®ï¼š

```
const { SERVER_HOST, SERVER_PORT } = require('../constants')

module.exports = merge(common, {
  mode: 'development',
  devServer: {
    host: SERVER_HOST, // æŒ‡å®š hostï¼Œä¸è®¾ç½®çš„è¯é»˜è®¤æ˜¯ localhost
    port: SERVER_PORT, // æŒ‡å®šç«¯å£ï¼Œé»˜è®¤æ˜¯8080
    stats: 'errors-only', // ç»ˆç«¯ä»…æ‰“å° error
    clientLogLevel: 'silent', // æ—¥å¿—ç­‰çº§
    compress: true, // æ˜¯å¦å¯ç”¨ gzip å‹ç¼©
    open: true, // æ‰“å¼€é»˜è®¤æµè§ˆå™¨
    hot: true, // çƒ­æ›´æ–°
  },
})
```

æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ–°çš„å˜é‡ `SERVER_HOST` å’Œ `SERVER_PORT` ï¼Œåœ¨ `constants.js` ä¸­å®šä¹‰å®ƒä»¬ï¼š

```
const SERVER_HOST = '127.0.0.1'
const SERVER_PORT = 9000

module.exports = {
  SERVER_HOST,
  SERVER_PORT,
	// ...
}
```

å…¶ä¸­æé«˜å¼€å‘å¹¸ç¦åº¦çš„é…ç½®é¡¹ï¼š

- `stats` ï¼šå½“è®¾ä¸º `error-only` æ—¶ï¼Œç»ˆç«¯ä¸­åªä¼šæ‰“å°é”™è¯¯æ—¥å¿—ï¼Œè¿™ä¸ªé…ç½®ä¸ªäººè§‰å¾—å¾ˆæœ‰ç”¨ï¼Œç°åœ¨å¼€å‘ä¸­ç»å¸¸ä¼šè¢«ä¸€å †çš„ warn æ—¥å¿—å æ»¡ï¼Œæ¯”å¦‚ä¸€äº› eslint çš„æé†’è§„åˆ™ï¼Œç¼–è¯‘ä¿¡æ¯ç­‰ï¼Œå¤´ç–¼çš„å¾ˆã€‚
- `clientLogLevel` ï¼šè®¾ä¸º `slient` ä¹‹åï¼ŒåŸæ¥çš„ä¸‰æ¡ä¿¡æ¯ä¼šå˜ä¸ºåªæœ‰ä¸€æ¡ã€‚

[![image.png](https://camo.githubusercontent.com/3a2dcf76f1a2b49f1d1a5ac13cba0bf2c5c855c7792ef130f7d9f927e23454ba/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353235393637323831392d62376262396532622d643437652d346636632d616630362d3030306134636236313664322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313239266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323538266f726967696e57696474683d313130362673697a653d3637313836267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353533)](https://camo.githubusercontent.com/3a2dcf76f1a2b49f1d1a5ac13cba0bf2c5c855c7792ef130f7d9f927e23454ba/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353235393637323831392d62376262396532622d643437652d346636632d616630362d3030306134636236313664322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313239266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323538266f726967696e57696474683d313130362673697a653d3637313836267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353533)

- `hot` ï¼šè¿™ä¸ªé…ç½®å¼€å¯åï¼Œä¹‹ååœ¨é…åˆå…¶ä»–é…ç½®ï¼Œå¯ä»¥å¼€å¯çƒ­æ›´æ–°ï¼Œæˆ‘ä»¬ä¹‹åå†è¯´ã€‚

ç°åœ¨é…ç½®å¥½äº†æœ¬åœ°æœåŠ¡çš„ç›¸å…³é…ç½®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å›åˆ° `package.json` ä¸­ä¿®æ”¹ `start` å‘½ä»¤ï¼š

```
{
  "scripts": {
+   "start": "cross-env NODE_ENV=development webpack-dev-server --config ./scripts/config/webpack.dev.js",
-   "start": "cross-env NODE_ENV=development webpack --config ./scripts/config/webpack.dev.js",
  },
}
```

ç„¶åç¡®è®¤ä¸€ä¸‹ï¼Œ `src/app.js` ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š

```
const root = document.querySelector('#root')
root.innerHTML = 'hello, webpack!'
```

å¾ˆç®€å•ï¼Œå°±æ˜¯å¾€ä¹‹å‰åœ¨ `html` æ–‡ä»¶ä¸­å®šä¹‰çš„ id ä¸º root çš„ div æ ‡ç­¾ä¸‹åŠ äº†ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
ç°åœ¨ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
npm run start
```

ä½ ä¼šå‘ç°æµè§ˆå™¨é»˜è®¤æ‰“å¼€äº†ä¸€ä¸ªé¡µé¢ï¼Œå±å¹•ä¸Šå‡ºç°äº†æœŸå¾…ä¸­çš„ `hello, webpack!` ã€‚æŸ¥çœ‹æ§åˆ¶å°ï¼Œå‘ç° `html` æ–‡ä»¶çœŸçš„å°±è‡ªåŠ¨å¼•å…¥äº†æˆ‘ä»¬æ‰“åŒ…åçš„æ–‡ä»¶ï½

[![image.png](https://camo.githubusercontent.com/e6ba2a2937bb2d2d8a0971dffd4f7675051fa4f55f2e90f5dd6e0091d533695e/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353236303630373631312d63303366376439342d393835352d343464382d383331382d6437623764333532626161372e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313433266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323836266f726967696e57696474683d3636302673697a653d3334333032267374617475733d646f6e65267374796c653d6e6f6e652677696474683d333330)](https://camo.githubusercontent.com/e6ba2a2937bb2d2d8a0971dffd4f7675051fa4f55f2e90f5dd6e0091d533695e/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353236303630373631312d63303366376439342d393835352d343464382d383331382d6437623764333532626161372e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313433266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323836266f726967696e57696474683d3636302673697a653d3334333032267374617475733d646f6e65267374796c653d6e6f6e652677696474683d333330)

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»èƒ½åˆ©ç”¨æœ¬åœ°æœåŠ¡å®æ—¶è¿›è¡Œé¡µé¢æ›´æ–°äº†ï¼å½“ç„¶ï¼Œè¿™è¿œè¿œæ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬ä¼šä¸€æ­¥ä¸€æ­¥ç»§ç»­ï¼Œå°½å¯èƒ½çš„å»å®Œå–„ã€‚

### 7. devtool

`devtool` ä¸­çš„ä¸€äº›è®¾ç½®ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å°†ç¼–è¯‘åçš„ä»£ç æ˜ å°„å›åŸå§‹æºä»£ç ï¼Œå³å¤§å®¶ç»å¸¸å¬åˆ°çš„ `source-map` ï¼Œè¿™å¯¹äºè°ƒè¯•ä»£ç é”™è¯¯çš„æ—¶å€™ç‰¹åˆ«é‡è¦ï¼Œè€Œä¸åŒçš„è®¾ç½®ä¼šæ˜æ˜¾å½±å“åˆ°æ„å»ºå’Œé‡æ–°æ„å»ºçš„é€Ÿåº¦ã€‚æ‰€ä»¥é€‰æ‹©ä¸€ä¸ªé€‚åˆè‡ªå·±çš„å¾ˆé‡è¦ã€‚

å®ƒéƒ½æœ‰å“ªäº›å€¼å¯ä»¥è®¾ç½®ï¼Œ[å®˜æ–¹ devtool è¯´æ˜](https://webpack.js.org/configuration/devtool/)ä¸­è¯´çš„å¾ˆè¯¦ç»†ï¼Œæˆ‘å°±ä¸å…·ä½“å±•å¼€äº†ï¼Œ**åœ¨è¿™é‡Œæˆ‘éå¸¸éå¸¸æ— æ•Œå¼ºçƒˆå»ºè®®å¤§å®¶æ•…æ„å†™ä¸€äº›æœ‰é”™è¯¯çš„ä»£ç ï¼Œç„¶åä½¿ç”¨æ¯ä¸ªè®¾ç½®éƒ½è¯•è¯•çœ‹ï¼**åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒèƒ½æ¥å—çš„æ˜¯ `eval-source-map` ï¼Œæ‰€ä»¥æˆ‘ä¼šåœ¨ `webpack.dev.js` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = merge(common, {
  mode: 'development',
+ devtool: 'eval-source-map',
})
```

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æˆ‘ç›´æ¥è®¾ä¸º `none` ï¼Œä¸éœ€è¦ `source-map` åŠŸèƒ½ï¼Œåœ¨ `webpack.prod.js` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = merge(common, {
  mode: 'production',
+ devtool: 'none',
})
```

é€šè¿‡ä¸Šé¢é…ç½®ï¼Œæˆ‘ä»¬æœ¬åœ°è¿›è¡Œå¼€å‘æ—¶ï¼Œä»£ç å‡ºç°äº†é”™è¯¯ï¼Œæ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—å°±ä¼šç²¾ç¡®åœ°å‘Šè¯‰ä½ é”™è¯¯çš„ä»£ç æ–‡ä»¶ã€ä½ç½®ç­‰ä¿¡æ¯ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ `src/app.js` ä¸­ç¬¬ `5` è¡Œæ•…æ„å†™ä¸ªé”™è¯¯ä»£ç ï¼š

```
const root = document.querySelector('#root')
root.innerHTML = 'hello, webpack!'

const a = 5
a = 6
```

å…¶é”™è¯¯æ—¥å¿—æç¤ºæˆ‘ä»¬ï¼šä½ çš„ `app.js` æ–‡ä»¶ä¸­ç¬¬ `5` è¡Œå‡ºé”™äº†ï¼Œå…·ä½“é”™è¯¯åŸå› ä¸º `balabala....` ï¼Œèµ¶ç´§çœ‹çœ‹å§ï½

[![image.png](https://camo.githubusercontent.com/3746143b2600aff5ed4a36a00bdf5a96393642e827608a169eacab66e784b1de/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353236313836323130372d35633434343763642d343961622d346138632d383263642d6564396565306339663937362e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323333266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343636266f726967696e57696474683d313131302673697a653d313038323635267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353535)](https://camo.githubusercontent.com/3746143b2600aff5ed4a36a00bdf5a96393642e827608a169eacab66e784b1de/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353236313836323130372d35633434343763642d343961622d346138632d383263642d6564396565306339663937362e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323333266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343636266f726967696e57696474683d313131302673697a653d313038323635267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353535)

å®Œç¾ï¼å®Œç¾äº†å—ï¼Ÿ

[![image.png](https://camo.githubusercontent.com/e6fe354d9485442570c41917502af23afb9ade06da14733ac8632bac12cc2bb7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353236323233343633332d64633330653664622d633639322d343935352d626632312d3562373964306232623231312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313130266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323230266f726967696e57696474683d3232302673697a653d3335363236267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313130)](https://camo.githubusercontent.com/e6fe354d9485442570c41917502af23afb9ade06da14733ac8632bac12cc2bb7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353236323233343633332d64633330653664622d633639322d343935352d626632312d3562373964306232623231312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313130266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323230266f726967696e57696474683d3232302673697a653d3335363236267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313130)

å¦‚æœä½ å·²ç»æ‰§è¡Œè¿‡å¤šæ¬¡ `npm run build` ï¼Œä½ ä¼šå‘ç°äº‹æƒ…ä¸ç®€å•ï¼š

[![image.png](https://camo.githubusercontent.com/4a03c21fe20b49de1d01909cccf035b8e02229df8809601212c2fa2a520b7b78/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353236333130353132342d65356262336631322d333032372d343065392d623262302d6131633233383530643832652e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313335266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323730266f726967696e57696474683d3531302673697a653d3231363733267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323535)](https://camo.githubusercontent.com/4a03c21fe20b49de1d01909cccf035b8e02229df8809601212c2fa2a520b7b78/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353236333130353132342d65356262336631322d333032372d343065392d623262302d6131633233383530643832652e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313335266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323730266f726967696e57696474683d3531302673697a653d3231363733267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323535)

å¦ˆè›‹ï¼Œå¤šå‡ºäº†é‚£ä¹ˆå¤š `app.xxxxxxxx.js` ï¼Œä¸ºäº†æˆ‘ä»¬æœ€ç»ˆæ‰“åŒ…åæ²¡æœ‰å‰ä¸€æ¬¡æ‰“åŒ…å‡ºæ¥çš„å¤šä½™æ–‡ä»¶ï¼Œå¾—æƒ³ä¸ªåŠæ³•å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚

### 8. æ‰“åŒ…ç¼–è¯‘å‰æ¸…ç† dist ç›®å½•

æˆ‘ä»¬å‘ç°æ¯æ¬¡æ‰“å‡ºæ¥çš„æ–‡ä»¶éƒ½ä¼šç»§ç»­æ®‹ç•™åœ¨ dist ç›®å½•ä¸­ï¼Œå½“ç„¶å¦‚æœä½ è¶³å¤Ÿå‹¤å¿«ï¼Œå¯ä»¥æ¯æ¬¡æ‰“åŒ…å‰æ‰‹åŠ¨æ¸…ç†ä¸€ä¸‹ï¼Œä½†æ˜¯è¿™ç§å‹¤åŠ³æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚

å€ŸåŠ© [clean-webpack-plugin](https://github.com/johnagan/clean-webpack-plugin) å¯ä»¥å®ç°æ¯æ¬¡æ‰“åŒ…å‰å…ˆå¤„ç†æ‰ä¹‹å‰çš„ dist ç›®å½•ï¼Œä»¥ä¿è¯æ¯æ¬¡æ‰“å‡ºçš„éƒ½æ˜¯å½“å‰æœ€æ–°çš„ï¼Œæˆ‘ä»¬å…ˆå®‰è£…å®ƒï¼š

```
npm install clean-webpack-plugin -D
```

æ‰“å¼€ `webpack.prod.js` æ–‡ä»¶ï¼Œå¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
const { CleanWebpackPlugin } = require('clean-webpack-plugin')

module.exports = {
	// other...
  plugins: [
    new CleanWebpackPlugin(),
  ],
}
```

å®ƒä¸éœ€è¦ä½ å»æŒ‡å®šè¦åˆ é™¤çš„ç›®å½•çš„ä½ç½®ï¼Œä¼šè‡ªåŠ¨æ‰¾åˆ° `output` ä¸­çš„ `path` ç„¶åè¿›è¡Œæ¸…é™¤ã€‚
ç°åœ¨å†æ‰§è¡Œä¸€ä¸‹ `npm run build` ï¼Œçœ‹çœ‹æ‰“å‡ºæ¥çš„ dist ç›®å½•æ˜¯ä¸æ˜¯å¹²å‡€æ¸…çˆ½äº†è®¸å¤šï¼Ÿ

### 9. æ ·å¼æ–‡ä»¶å¤„ç†

å¦‚æœä½ ç°åœ¨åœ¨ `src/` ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª `app.css` æ–‡ä»¶ï¼Œç»™ `#root` éšä¾¿æ·»åŠ ä¸€ä¸ªæ ·å¼ï¼Œ `app.js` ä¸­é€šè¿‡ `import './app.css'` ï¼Œå†è¿›è¡Œæ‰“åŒ…æˆ–æœ¬åœ°æœåŠ¡å¯åŠ¨ï¼Œwebpack ç›´æ¥å°±ä¼šæŠ¥é”™ï¼Œå› ä¸º webpack åªä¼šç¼–è¯‘ `.js` æ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸æ”¯æŒç›´æ¥å¤„ç† `.css` ã€ `.less` æˆ– `.scss` æ–‡ä»¶çš„ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© webpack ä¸­å¦ä¸€ä¸ªå¾ˆæ ¸å¿ƒçš„ä¸œè¥¿ï¼š**loader **ã€‚

> loader ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚loader å¯ä»¥ä½¿ä½ åœ¨ `import` æˆ–"åŠ è½½"æ¨¡å—æ—¶é¢„å¤„ç†æ–‡ä»¶ã€‚å› æ­¤ï¼Œloader ç±»ä¼¼äºå…¶ä»–æ„å»ºå·¥å…·ä¸­â€œä»»åŠ¡(task)â€ï¼Œå¹¶æä¾›äº†å¤„ç†å‰ç«¯æ„å»ºæ­¥éª¤çš„å¼ºå¤§æ–¹æ³•ã€‚loader å¯ä»¥å°†æ–‡ä»¶ä»ä¸åŒçš„è¯­è¨€ï¼ˆå¦‚ TypeScriptï¼‰è½¬æ¢ä¸º JavaScriptï¼Œæˆ–å°†å†…è”å›¾åƒè½¬æ¢ä¸º data URLã€‚loader ç”šè‡³å…è®¸ä½ ç›´æ¥åœ¨ JavaScript æ¨¡å—ä¸­ `import` CSSæ–‡ä»¶ï¼

#### CSS æ ·å¼æ–‡ä»¶å¤„ç†

å¤„ç† `.css` æ–‡ä»¶æˆ‘ä»¬éœ€è¦å®‰è£… [style-loader](https://github.com/webpack-contrib/style-loader) å’Œ [css-loader](https://github.com/webpack-contrib/css-loader) ï¼š

```
npm install style-loader css-loader -D
```

- é‡åˆ°åç¼€ä¸º `.css` çš„æ–‡ä»¶ï¼Œwebpack å…ˆç”¨ `css-loader` åŠ è½½å™¨å»è§£æè¿™ä¸ªæ–‡ä»¶ï¼Œé‡åˆ° `@import` ç­‰è¯­å¥å°±å°†ç›¸åº”æ ·å¼æ–‡ä»¶å¼•å…¥ï¼ˆæ‰€ä»¥å¦‚æœæ²¡æœ‰ `css-loader` ï¼Œå°±æ²¡æ³•è§£æè¿™ç±»è¯­å¥ï¼‰ï¼Œè®¡ç®—åç”Ÿæˆ**csså­—ç¬¦ä¸²**ï¼Œæ¥ä¸‹æ¥ `style-loader` å¤„ç†æ­¤å­—ç¬¦ä¸²ç”Ÿæˆä¸€ä¸ªå†…å®¹ä¸ºæœ€ç»ˆè§£æå®Œçš„ css ä»£ç çš„ style æ ‡ç­¾ï¼Œæ”¾åˆ° head æ ‡ç­¾é‡Œã€‚
- `loader` æ˜¯æœ‰é¡ºåºçš„ï¼Œwebpack è‚¯å®šæ˜¯å…ˆå°†æ‰€æœ‰ css æ¨¡å—ä¾èµ–è§£æå®Œå¾—åˆ°è®¡ç®—ç»“æœå†åˆ›å»º style æ ‡ç­¾ã€‚å› æ­¤åº”è¯¥æŠŠ `style-loader` æ”¾åœ¨ `css-loader` çš„å‰é¢ï¼ˆ**webpack loader çš„æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ï¼Œå³ä»åå¾€å‰**ï¼‰ã€‚

äºæ˜¯ï¼Œæ‰“å¼€æˆ‘ä»¬çš„ `webpack.common.js` ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = {
	// other...
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          'style-loader',
          {
            loader: 'css-loader',
            options: {
              modules: false, // é»˜è®¤å°±æ˜¯ false, è‹¥è¦å¼€å¯ï¼Œå¯åœ¨å®˜ç½‘å…·ä½“æŸ¥çœ‹å¯é…ç½®é¡¹
              sourceMap: isDev, // å¼€å¯åä¸ devtool è®¾ç½®ä¸€è‡´, å¼€å‘ç¯å¢ƒå¼€å¯ï¼Œç”Ÿäº§ç¯å¢ƒå…³é—­
              importLoaders: 0, // æŒ‡å®šåœ¨ CSS loader å¤„ç†å‰ä½¿ç”¨çš„ laoder æ•°é‡
            },
          },
        ],
      },
    ]
  },
}
```

`test` å­—æ®µæ˜¯åŒ¹é…è§„åˆ™ï¼Œé’ˆå¯¹ç¬¦åˆè§„åˆ™çš„æ–‡ä»¶è¿›è¡Œå¤„ç†ã€‚

`use` å­—æ®µæœ‰å‡ ç§å†™æ³•ï¼š

- å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå‡å¦‚æˆ‘ä»¬åªä½¿ç”¨ `style-loader` ï¼Œåªéœ€è¦ `use: 'style-loader'` ã€‚
- å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå‡å¦‚æˆ‘ä»¬ä¸å¯¹ `css-loader` åšé¢å¤–é…ç½®ï¼Œåªéœ€è¦ `use: ['style-loader', 'css-loader']` ã€‚
- æ•°ç»„çš„æ¯ä¸€é¡¹æ—¢å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå½“æˆ‘ä»¬éœ€è¦åœ¨`webpack` çš„é…ç½®æ–‡ä»¶ä¸­å¯¹ `loader` è¿›è¡Œé…ç½®ï¼Œå°±éœ€è¦å°†å…¶ç¼–å†™ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨æ­¤å¯¹è±¡çš„ `options` å­—æ®µä¸­è¿›è¡Œé…ç½®ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸Šé¢è¦å¯¹ `css-loader` åšé…ç½®çš„å†™æ³•ã€‚

#### LESS æ ·å¼æ–‡ä»¶å¤„ç†

å¤„ç† `.less` æ–‡ä»¶æˆ‘ä»¬éœ€è¦å®‰è£… [less](https://github.com/less/less.js) å’Œ [less-loader](https://github.com/webpack-contrib/less-loader) ï¼š

```
npm install less less-loader -D
```

- é‡åˆ°åç¼€ä¸º `.less` æ–‡ä»¶ï¼Œ `less-loader` ä¼šå°†ä½ å†™çš„ less è¯­æ³•è½¬æ¢ä¸º css è¯­æ³•ï¼Œå¹¶è½¬ä¸º `.css` æ–‡ä»¶ã€‚
- `less-loader` ä¾èµ–äº `less` ï¼Œæ‰€ä»¥å¿…é¡»éƒ½å®‰è£…ã€‚

ç»§ç»­åœ¨ `webpack.common.js` ä¸­å†™å…¥ä»£ç ï¼š

```
module.exports = {
	// other...
  module: {
    rules: [
      { /* ... */ },
      {
        test: /\.less$/,
        use: [
          'style-loader',
          {
            loader: 'css-loader',
            options: {
              modules: false,
              sourceMap: isDev,
              importLoaders: 1, // éœ€è¦å…ˆè¢« less-loader å¤„ç†ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸º 1
            },
          },
          {
            loader: 'less-loader',
            options: {
              sourceMap: isDev,
            },
          },
        ],
      },
    ]
  },
}
```

#### SASS æ ·å¼æ–‡ä»¶å¤„ç†

å¤„ç† `.scss` æ–‡ä»¶æˆ‘ä»¬éœ€è¦å®‰è£… [node-sass](https://github.com/sass/node-sass) å’Œ [sass-loader](https://github.com/webpack-contrib/sass-loader) ï¼š

```
npm install node-sass sass-loader -D
```

- é‡åˆ° `.scss` åç¼€çš„æ–‡ä»¶ï¼Œ `sass-loader` ä¼šå°†ä½ å†™çš„ sass è¯­æ³•è½¬ä¸º css è¯­æ³•ï¼Œå¹¶è½¬ä¸º `.css` æ–‡ä»¶ã€‚
- åŒæ ·åœ°ï¼Œ `sass-loader` ä¾èµ–äº `node-sass` ï¼Œæ‰€ä»¥ä¸¤ä¸ªéƒ½éœ€è¦å®‰è£…ã€‚ï¼ˆ `node-sass` æˆ‘ä¸ç”¨ä»£ç†å°±æ²¡æœ‰æ­£å¸¸å®‰è£…ä¸Šè¿‡ï¼Œè¿˜å¥½æˆ‘ä»¬ä¸€å¼€å§‹å°±åœ¨é…ç½®æ–‡ä»¶é‡Œè®¾äº†æ·˜å®é•œåƒæºï¼‰

ç»§ç»­åœ¨ `webpack.common.js` ä¸­å†™å…¥ä»£ç ï¼š

```
module.exports = {
	// other...
  module: {
    rules: [
      { /* ... */ },
      {
        test: /\.scss$/,
        use: [
          'style-loader',
          {
            loader: 'css-loader',
            options: {
              modules: false,
              sourceMap: isDev,
              importLoaders: 1, // éœ€è¦å…ˆè¢« sass-loader å¤„ç†ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸º 1
            },
          },
          {
            loader: 'sass-loader',
            options: {
              sourceMap: isDev,
            },
          },
        ],
      },
    ]
  },
}
```

ç°åœ¨ï¼Œé€šè¿‡ä»¥ä¸Šé…ç½®ä¹‹åï¼Œä½ å†æŠŠ `src/app.css` æ”¹ä¸º `app.less` æˆ– `app.scss` ï¼Œæ‰§è¡Œ `npm run start` ï¼Œä½ ä¼šå‘ç°å’±ä»¬çš„æ ·å¼æ­£å¸¸åŠ è½½äº†å‡ºæ¥ï¼Œå¼€å¿ƒå™¢ï½

#### PostCSS å¤„ç†æµè§ˆå™¨å…¼å®¹é—®é¢˜

postcss ä¸€ç§å¯¹ css ç¼–è¯‘çš„å·¥å…·ï¼Œç±»ä¼¼ babel å¯¹ js ä¸€æ ·é€šè¿‡å„ç§æ’ä»¶å¯¹ css è¿›è¡Œå¤„ç†ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨ä»¥ä¸‹æ’ä»¶ï¼š

- [postcss-flexbugs-fixes](https://github.com/luisrudge/postcss-flexbugs-fixes) ï¼šç”¨äºä¿®å¤ä¸€äº›å’Œ flex å¸ƒå±€ç›¸å…³çš„ bugã€‚
- [postcss-preset-env](https://github.com/csstools/postcss-preset-env) ï¼šå°†æœ€æ–°çš„ CSS è¯­æ³•è½¬æ¢ä¸ºç›®æ ‡ç¯å¢ƒçš„æµè§ˆå™¨èƒ½å¤Ÿç†è§£çš„ CSS è¯­æ³•ï¼Œç›®çš„æ˜¯ä½¿å¼€å‘è€…ä¸ç”¨è€ƒè™‘æµè§ˆå™¨å…¼å®¹é—®é¢˜ã€‚æˆ‘ä»¬ä½¿ç”¨ [autoprefixer](https://github.com/postcss/autoprefixer) æ¥è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å¤´ã€‚
- [postcss-normalize](https://github.com/csstools/postcss-normalize) ï¼šä» browserslist ä¸­è‡ªåŠ¨å¯¼å…¥æ‰€éœ€è¦çš„ normalize.css å†…å®¹ã€‚

å®‰è£…ä¸Šé¢æåˆ°çš„æ‰€éœ€çš„åŒ…ï¼š

```
npm install postcss-loader postcss-flexbugs-fixes postcss-preset-env autoprefixer postcss-normalize -D
```

å°† `postcss-loader` æ”¾åˆ° `css-loader` åé¢ï¼Œé…ç½®å¦‚ä¸‹ï¼š

```
{
  loader: 'postcss-loader',
  options: {
    ident: 'postcss',
    plugins: [
      require('postcss-flexbugs-fixes'),
      require('postcss-preset-env')({
        autoprefixer: {
          grid: true,
          flexbox: 'no-2009'
        },
        stage: 3,
      }),
      require('postcss-normalize'),
    ],
    sourceMap: isDev,
  },
},
```

ä½†æ˜¯æˆ‘ä»¬è¦ä¸ºæ¯ä¸€ä¸ªä¹‹å‰é…ç½®çš„æ ·å¼ loader ä¸­éƒ½è¦åŠ ä¸€æ®µè¿™ä¸ªï¼Œè¿™ä»£ç ä¼šæ˜¾å¾—éå¸¸å†—ä½™ï¼Œäºæ˜¯æˆ‘ä»¬æŠŠå…¬å…±é€»è¾‘æŠ½ç¦»æˆä¸€ä¸ªå‡½æ•°ï¼Œä¸ `cra` ä¸€è‡´ï¼Œå‘½åä¸º `getCssLoaders` ï¼Œå› ä¸ºæ–°å¢äº† `postcss-loader` ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹ `importLoaders` ï¼Œäºæ˜¯æˆ‘ä»¬ç°åœ¨çš„ `webpack.common.js` ä¿®æ”¹ä¸ºä»¥ä¸‹è¿™æ ·ï¼š

```
const getCssLoaders = (importLoaders) => [
  'style-loader',
  {
    loader: 'css-loader',
    options: {
      modules: false,
      sourceMap: isDev,
      importLoaders,
    },
  },
  {
    loader: 'postcss-loader',
    options: {
      ident: 'postcss',
      plugins: [
        // ä¿®å¤ä¸€äº›å’Œ flex å¸ƒå±€ç›¸å…³çš„ bug
        require('postcss-flexbugs-fixes'),
        require('postcss-preset-env')({
          autoprefixer: {
            grid: true,
            flexbox: 'no-2009'
          },
          stage: 3,
        }),
        require('postcss-normalize'),
      ],
      sourceMap: isDev,
    },
  },
]

module.exports = {
	// other...
  module: {
    rules: [
      {
        test: /\.css$/,
        use: getCssLoaders(1),
      },
      {
        test: /\.less$/,
        use: [
          ...getCssLoaders(2),
          {
            loader: 'less-loader',
            options: {
              sourceMap: isDev,
            },
          },
        ],
      },
      {
        test: /\.scss$/,
        use: [
          ...getCssLoaders(2),
          {
            loader: 'sass-loader',
            options: {
              sourceMap: isDev,
            },
          },
        ],
      },
    ]
  },
  plugins: [//...],
}
```

æœ€åï¼Œæˆ‘ä»¬è¿˜å¾—åœ¨ `package.json` ä¸­æ·»åŠ  `browserslist` ï¼ˆæŒ‡å®šäº†é¡¹ç›®çš„ç›®æ ‡æµè§ˆå™¨çš„èŒƒå›´ï¼‰ï¼š

```
{
  "browserslist": [
    ">0.2%",
    "not dead", 
    "ie >= 9",
    "not op_mini all"
  ],
}
```

ç°åœ¨ï¼Œåœ¨å¦‚æœä½ åœ¨å…¥å£æ–‡ä»¶ï¼ˆæ¯”å¦‚æˆ‘ä¹‹å‰ä¸€ç›´ç”¨çš„ `app.js` ï¼‰éšä¾¿å¼•ä¸€ä¸ªå†™äº† `display: flex` è¯­æ³•çš„æ ·å¼æ–‡ä»¶ï¼Œ `npm run start` çœ‹çœ‹æ˜¯ä¸æ˜¯è‡ªåŠ¨åŠ äº†æµè§ˆå™¨å‰ç¼€äº†å‘¢ï¼Ÿå¿«è¯•è¯•å§ï¼

### 10. å›¾ç‰‡å’Œå­—ä½“æ–‡ä»¶å¤„ç†

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [file-loader](https://github.com/webpack-contrib/file-loader) æˆ–è€… [url-loader](https://github.com/webpack-contrib/url-loader) æ¥å¤„ç†æœ¬åœ°èµ„æºæ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡ã€å­—ä½“æ–‡ä»¶ï¼Œè€Œ `url-loader` å…·æœ‰ `file-loader` æ‰€æœ‰çš„åŠŸèƒ½ï¼Œè¿˜èƒ½åœ¨å›¾ç‰‡å¤§å°é™åˆ¶èŒƒå›´å†…æ‰“åŒ…æˆ base64 å›¾ç‰‡æ’å…¥åˆ° js æ–‡ä»¶ä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿåˆ«æ€¥ï¼Œæˆ‘ä»¬å…ˆå®‰è£…æ‰€éœ€è¦çš„åŒ…ï¼ˆåè€…ä¾èµ–å‰è€…ï¼Œæ‰€ä»¥éƒ½è¦å®‰è£…ï¼‰ï¼š

```
npm install file-loader url-loader -D
```

ç„¶ååœ¨ `webpack.common.js` ä¸­ç»§ç»­åœ¨ `modules.rules` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = {
  // other...
  module: {
    rules: [
      // other...
      {
        test: [/\.bmp$/, /\.gif$/, /\.jpe?g$/, /\.png$/],
        use: [
          {
            loader: 'url-loader',
            options: {
              limit: 10 * 1024,
              name: '[name].[contenthash:8].[ext]',
              outputPath: 'assets/images',
            },
          },
        ],
      },
      {
        test: /\.(ttf|woff|woff2|eot|otf)$/,
        use: [
          {
            loader: 'url-loader',
            options: {
              name: '[name].[contenthash:8].[ext]',
              outputPath: 'assets/fonts',
            },
          },
        ],
      },
    ]
  },
  plugins: [//...],
}
```

- `[name].[contenthash:8].[ext]` è¡¨ç¤ºè¾“å‡ºçš„æ–‡ä»¶åä¸º `åŸæ¥çš„æ–‡ä»¶å.å“ˆå¸Œå€¼.åç¼€` ï¼Œæœ‰äº†è¿™ä¸ª hash å€¼ï¼Œå¯é˜²æ­¢å›¾ç‰‡æ›´æ¢åå¯¼è‡´çš„ç¼“å­˜é—®é¢˜ã€‚
- `outputPath` æ˜¯è¾“å‡ºåˆ° `dist` ç›®å½•ä¸‹çš„è·¯å¾„ï¼Œå³å›¾ç‰‡ç›®å½• `dist/assets/images` ä»¥åŠå­—ä½“ç›¸å…³ç›®å½• `dist/assets/fonts` ä¸‹ã€‚
- `limit` è¡¨ç¤ºå¦‚æœä½ è¿™ä¸ªå›¾ç‰‡æ–‡ä»¶å¤§äº `10240b` ï¼Œå³ `10kb` ï¼Œé‚£æˆ‘ `url-loader` å°±ä¸ç”¨ï¼Œè½¬è€Œå»ä½¿ç”¨ `file-loader` ï¼ŒæŠŠå›¾ç‰‡æ­£å¸¸æ‰“åŒ…æˆä¸€ä¸ªå•ç‹¬çš„å›¾ç‰‡æ–‡ä»¶åˆ°è®¾ç½®çš„ç›®å½•ä¸‹ï¼Œè‹¥æ˜¯å°äºäº† `10kb` ï¼Œå°±å°†å›¾ç‰‡æ‰“åŒ…æˆ base64 çš„å›¾ç‰‡æ ¼å¼æ’å…¥åˆ°æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶ä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå‡å°‘äº† http è¯·æ±‚ï¼Œä½†æ˜¯å¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œjsæ–‡ä»¶ä¹Ÿä¼šè¿‡å¤§ï¼Œå¾—ä¸å¿å¤±ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆæœ‰ `limit` çš„åŸå› ï¼

æ¥ä¸‹æ¥å¤§å®¶å¼•ä¸€ä¸‹æœ¬åœ°çš„å›¾ç‰‡å¹¶æ”¾åˆ° img æ ‡ç­¾ä¸­ï¼Œæˆ–è€…å» [iconfont](https://www.iconfont.cn/) ä¸‹ä¸ªå­—ä½“å›¾æ ‡è¯•è¯•å§ï½

ä¸å¹¸çš„æ˜¯ï¼Œå½“ä½ å°è¯•å¼•å…¥ä¸€å¼ å›¾ç‰‡çš„æ—¶å€™ï¼Œä¼šæœ‰ä»¥ä¸‹ ts çš„æŠ¥é”™ï¼ˆå¦‚æœä½ å®‰è£…äº† ts çš„è¯ï¼‰ï¼š

[![image.png](https://camo.githubusercontent.com/db93179e1a4cc94c386afc6e2ca3018191c9fc44b1567b2a4800b9eb5df4798d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363236373137353236392d61373735333534322d663737652d343865342d623834382d6235346635353363613932322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313539266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333138266f726967696e57696474683d313337362673697a653d3534303731267374617475733d646f6e65267374796c653d6e6f6e652677696474683d363838)](https://camo.githubusercontent.com/db93179e1a4cc94c386afc6e2ca3018191c9fc44b1567b2a4800b9eb5df4798d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363236373137353236392d61373735333534322d663737652d343865342d623834382d6235346635353363613932322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313539266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333138266f726967696e57696474683d313337362673697a653d3534303731267374617475733d646f6e65267374796c653d6e6f6e652677696474683d363838)

è¿™ä¸ªæ—¶å€™åœ¨ `src/` ä¸‹æ–°å»ºä»¥ä¸‹æ–‡ä»¶ `typings/file.d.ts` ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹å³å¯ï¼š

```
declare module '*.svg' {
  const path: string
  export default path
}

declare module '*.bmp' {
  const path: string
  export default path
}

declare module '*.gif' {
  const path: string
  export default path
}

declare module '*.jpg' {
  const path: string
  export default path
}

declare module '*.jpeg' {
  const path: string
  export default path
}

declare module '*.png' {
  const path: string
  export default path
}
```

å…¶å®çœ‹åˆ°ç°åœ¨å·²ç»å¾ˆä¸å®¹æ˜“äº†ï¼Œä¸è¿‡æˆ‘ç›¸ä¿¡å¤§å®¶ä»”ç»†è·Ÿåˆ°ç°åœ¨çš„è¯ï¼Œä¹Ÿä¼šæ”¶è·ä¸å°‘çš„ï¼Œä¸Šé¢çš„ webpack åŸºæœ¬é…ç½®åªæ˜¯é…ç½®äº†æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦è¾¾åˆ°æ”¯æŒ Reactï¼ŒTypeScript ä»¥åŠä¸€å †çš„å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„ä¼˜åŒ–ï¼Œå¤§å®¶åŠ æ²¹å™¢ï½

[![image.png](https://camo.githubusercontent.com/590a041832e8d7c26a196da7bf1c132c6118022b7a9a24158ee9e563734cefd0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353836333331323334362d38643033323964612d663664372d343934322d386133332d3330386262353434646562312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313739266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333537266f726967696e57696474683d3233322673697a653d323031363736267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313136)](https://camo.githubusercontent.com/590a041832e8d7c26a196da7bf1c132c6118022b7a9a24158ee9e563734cefd0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353836333331323334362d38643033323964612d663664372d343934322d386133332d3330386262353434646562312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313739266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333537266f726967696e57696474683d3233322673697a653d323031363736267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313136)

## æ”¯æŒ React

ç»ˆäºæ¥åˆ°æˆ‘ä»¬ React çš„æ”¯æŒç¯èŠ‚äº†ï¼Œç¾å¥½çš„å¼€å§‹å°±æ˜¯å®‰è£… `react` å’Œ `react-dom` ï¼š

```
npm install react react-dom -S
```

> `-S` ç›¸å½“äº `--save` ï¼Œ `-D` ç›¸å½“äº `--save-dev` ã€‚

å…¶å®å®‰è£…äº†è¿™ä¸¤ä¸ªåŒ…å°±å·²ç»èƒ½ä½¿ç”¨ jsx è¯­æ³•äº†ï¼Œæˆ‘ä»¬åœ¨ `src/index.js` ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```
import React from 'react'
import ReactDOM from 'react-dom'
import App from './App'

ReactDOM.render(<App />, document.querySelector('#root'))
```

åœ¨ `src/app.js` ä¸­è¾“å…¥ä»¥ä¸‹ç¤ºä¾‹ä»£ç ï¼š

```
import React from 'react'

function App() {
  return <div className='App'>Hello World</div>
}

export default App
```

ç„¶åä¿®æ”¹ `webpack.common.js` ä¸­ `entry` å­—æ®µï¼Œä¿®æ”¹å…¥å£æ–‡ä»¶ä¸º `index.js` ï¼š

```
module.exports = {
  entry: {
+   app: resolve(PROJECT_PATH, './src/index.js'),
-   app: resolve(PROJECT_PATH, './src/app.js'),
  },
}
```

å¦‚æœè¿™æ—¶å€™ï¼Œä½ æ— è®ºå°è¯• `npm run start` è¿˜æ˜¯ `npm run build` ï¼Œç»“æœéƒ½ä¼šæŠ¥é”™ï¼š

[![image.png](https://camo.githubusercontent.com/88561f469b4da7cfcd027d8f375bbbfe0d7f826731c9760262c42dcf6b1ec35c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353836363633323036322d64633465616632662d373837372d343530352d626361372d3734316635323538616536392e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323338266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343736266f726967696e57696474683d313230342673697a653d313035303637267374617475733d646f6e65267374796c653d6e6f6e652677696474683d363032)](https://camo.githubusercontent.com/88561f469b4da7cfcd027d8f375bbbfe0d7f826731c9760262c42dcf6b1ec35c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539353836363633323036322d64633465616632662d373837372d343530352d626361372d3734316635323538616536392e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323338266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343736266f726967696e57696474683d313230342673697a653d313035303637267374617475733d646f6e65267374796c653d6e6f6e652677696474683d363032)

è¯¶ï¼ä¸ºå•¥å•Šï¼Œæˆ‘ä¸æ˜¯éƒ½å®‰è£…äº† react äº†å—ï¼Œå’‹è¿˜ä¸è¡Œå•Šï¼Ÿ
å› ä¸º webpack æ ¹æœ¬è¯†åˆ«ä¸äº† jsx è¯­æ³•ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿä½¿ç”¨ [babel-loader](https://github.com/babel/babel-loader) å¯¹æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†ã€‚

**åœ¨æ­¤ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶å…ˆé˜…è¯»ä¸€ç¯‡å…³äº babel å†™çš„å¾ˆå¥½çš„æ–‡ç« ï¼š**[**ä¸å®¹é”™è¿‡çš„ Babel7 çŸ¥è¯†**](https://juejin.im/post/5ddff3abe51d4502d56bd143)**ï¼Œç»å¯¹çš„æ”¶è·æ»¡æ»¡ï¼Œæˆ‘çŸ¥é“åœ¨è‡ªå·±æ–‡ç« ä¸­æ’å…¥ä¸€ä¸ªé“¾æ¥ï¼Œè®©è¯»è€…å»é˜…è¯»å†å›æ¥æ¥ç€è¯»è¿™ç§è¡Œä¸ºæŒºè®©äººåæ„Ÿçš„ï¼Œæˆ‘çœ‹åˆ«äººæ–‡ç« æ—¶ä¹Ÿæœ‰è¿™ç§æ„Ÿè§‰ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘çœŸçš„ä¸å¾—ä¸æ¨èï¼Œä¸€å®šè¦è¯»ï¼ä¸€å®šè¦è¯»ï¼ä¸€å®šè¦è¯»ï¼**

å¥½äº†ï¼Œå®‰è£…è¯¥æœ‰çš„åŒ…ï¼š

```
npm install babel-loader @babel/core @babel/preset-react -D
```

[babel-loader](https://github.com/babel/babel-loader) ä½¿ç”¨ `babel` è§£ææ–‡ä»¶ï¼›[@babel/core](https://babeljs.io/docs/en/next/babel-core.html) æ˜¯ `babel` çš„æ ¸å¿ƒæ¨¡å—ï¼›[@babel/preset-react ](https://babeljs.io/docs/en/next/babel-preset-react)è½¬è¯‘ jsx è¯­æ³•ã€‚

åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º `.babelrc` æ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```
{
  "presets": ["@babel/preset-react"]
}
```

[presets](https://babeljs.io/docs/en/presets) æ˜¯ä¸€äº›åˆ—æ’ä»¶é›†åˆã€‚æ¯”å¦‚ `@babel/preset-react` ä¸€èˆ¬æƒ…å†µä¸‹ä¼šåŒ…å« `@babel/plugin-syntax-jsx` ã€ `@babel/plugin-transform-react-jsx` ã€ `@babel/plugin-transform-react-display-name` è¿™å‡ ä¸ª babel æ’ä»¶ã€‚

æ¥ä¸‹æ¥æ‰“å¼€æˆ‘ä»¬çš„ `webpack.common.js` æ–‡ä»¶ï¼Œå¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = {
	// other...
  module: {
    rules: [
      {
        test: /\.(tsx?|js)$/,
        loader: 'babel-loader',
        options: { cacheDirectory: true },
        exclude: /node_modules/,
      },
      // other...
    ]
  },
  plugins: [ //... ],
}
```

æ³¨æ„ï¼Œæˆ‘ä»¬åŒ¹é…çš„æ–‡ä»¶åç¼€åªæœ‰ `.tsx` ã€`.ts` ã€ `.js` ï¼Œæˆ‘æŠŠ `.jsx` çš„æ ¼å¼æ’é™¤åœ¨å¤–äº†ï¼Œå› ä¸ºæˆ‘ä¸å¯èƒ½åœ¨ ts ç¯å¢ƒä¸‹å»º `.jsx` æ–‡ä»¶ï¼Œå®åœ¨è¦ç”¨ jsx è¯­æ³•çš„æ—¶å€™ï¼Œç”¨ `.js` ä¸é¦™å—ï¼Ÿ

`babel-loader` åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä¸€äº›è¿è¡ŒæœŸé—´é‡å¤çš„å…¬å…±æ–‡ä»¶ï¼Œé€ æˆä»£ç ä½“ç§¯å¤§å†—ä½™ï¼ŒåŒæ—¶ä¹Ÿä¼šå‡æ…¢ç¼–è¯‘æ•ˆç‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å¯ `cacheDirectory` å°†è¿™äº›å…¬å…±æ–‡ä»¶ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ç¼–è¯‘å°±ä¼šåŠ å¿«å¾ˆå¤šã€‚

å»ºè®®ç»™ `loader` æŒ‡å®š `include` æˆ–æ˜¯ `exclude`ï¼ŒæŒ‡å®šå…¶ä¸­ä¸€ä¸ªå³å¯ï¼Œå› ä¸º `node_modules` ç›®å½•ä¸éœ€è¦æˆ‘ä»¬å»ç¼–è¯‘ï¼Œæ’é™¤åï¼Œæœ‰æ•ˆæå‡ç¼–è¯‘æ•ˆç‡ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ `npm run start` çœ‹çœ‹æ•ˆæœäº†ï¼å…¶å® babel è¿˜æœ‰ä¸€äº›å…¶ä»–é‡è¦çš„é…ç½®ï¼Œæˆ‘ä»¬å…ˆæŠŠ TS æ”¯æŒäº†å†ä¸€èµ·æï¼

## æ”¯æŒ TypeScript

webpack æ¨¡å—ç³»ç»Ÿåªèƒ½è¯†åˆ« js æ–‡ä»¶åŠå…¶è¯­æ³•ï¼Œé‡åˆ° jsx è¯­æ³•ã€tsx è¯­æ³•ã€æ–‡ä»¶ã€å›¾ç‰‡ã€å­—ä½“ç­‰å°±éœ€è¦ç›¸åº”çš„ loader å¯¹å…¶è¿›è¡Œé¢„å¤„ç†ï¼Œåƒå›¾ç‰‡ã€å­—ä½“è¿™ç§æˆ‘ä»¬ä¸Šé¢å·²ç»é…ç½®äº†ï¼Œä¸ºäº†æ”¯æŒ Reactï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `babel-loader` ä»¥åŠå¯¹åº”çš„æ’ä»¶ï¼Œç°åœ¨å¦‚æœè¦æ”¯æŒ TypeScript æˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹åº”çš„æ’ä»¶ã€‚

### 1. å®‰è£…å¯¹åº” babel æ’ä»¶

[@babel/preset-typescript](https://babeljs.io/docs/en/babel-preset-typescript) æ˜¯ babel çš„ä¸€ä¸ª presetï¼Œå®ƒç¼–è¯‘ ts çš„è¿‡ç¨‹å¾ˆç²—æš´ï¼Œå®ƒç›´æ¥å»æ‰ ts çš„ç±»å‹å£°æ˜ï¼Œç„¶åå†ç”¨å…¶ä»– babel æ’ä»¶è¿›è¡Œç¼–è¯‘ï¼Œæ‰€ä»¥å®ƒå¾ˆå¿«ã€‚

åºŸè¯è¡¥å¤šå°‘ï¼Œå…ˆæ¥å®‰è£…å®ƒï¼š

```
npm install @babel/preset-typescript -D
```

> æ³¨æ„ï¼šæˆ‘ä»¬ä¹‹å‰å› ä¸º Eslint çš„é…ç½®åœ°æ–¹éœ€è¦å…ˆå®‰è£… Typescriptï¼Œæ‰€ä»¥ä¹‹å‰å®‰è£…è¿‡çš„å°±ä¸ç”¨å†å®‰è£…ä¸€æ¬¡äº†ã€‚

ç„¶åä¿®æ”¹ `.babelrc` ï¼š

```
{
  "presets": ["@babel/preset-react", "@babel/preset-typescript"]
}
```

[presets çš„æ‰§è¡Œé¡ºåº](https://babeljs.io/docs/en/presets#preset-ordering)æ˜¯ä»ååˆ°å‰çš„ã€‚æ ¹æ®ä»¥ä¸Šä»£ç çš„ babel é…ç½®ï¼Œä¼šå…ˆæ‰§è¡Œ `@babel/preset-typescript` ï¼Œç„¶åå†æ‰§è¡Œ `@babel/preset-react` ã€‚

### 2. tsx è¯­æ³•æµ‹è¯•

`src/` æœ‰ä»¥ä¸‹ä¸¤ä¸ª `.tsx` æ–‡ä»¶ï¼Œä»£ç åˆ†åˆ«å¦‚ä¸‹ï¼š

`index.tsx` ï¼š

```
import React from 'react'
import ReactDOM from 'react-dom'
import App from './app'

ReactDOM.render(
  <App name='vortesnail' age={25} />,
  document.querySelector('#root')
)
```

`app.tsx` ï¼š

```
import React from 'react'

interface IProps {
  name: string
  age: number
}

function App(props: IProps) {
  const { name, age } = props
  return (
    <div className='app'>
      <span>{`Hello! I'm ${name}, ${age} years old.`}</span>
    </div>
  )
}

export default App
```

å¾ˆç®€å•çš„ä»£ç ï¼Œåœ¨ `<App />` ä¸­è¾“å…¥å±æ€§æ—¶å› ä¸º ts æœ‰äº†è‰¯å¥½çš„æ™ºèƒ½æç¤ºï¼Œæ¯”å¦‚ä½ ä¸è¾“å…¥ `name` å’Œ `age` ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨ `<App />` ç»„ä»¶ä¸­ï¼Œè¿™ä¸¤ä¸ªå±æ€§æ—¶å¿…é¡»å€¼ï¼

ä½†æ˜¯è¿™ä¸ªæ—¶å€™å¦‚æœä½  `npm run start` ï¼Œå‘ç°æ˜¯ç¼–è¯‘æœ‰é”™è¯¯çš„ï¼Œæˆ‘ä»¬ä¿®æ”¹ `webpack.common.js` æ–‡ä»¶ï¼š

```
module.exports = {
  entry: {
    app: resolve(PROJECT_PATH, './src/index.tsx'),
  },
  output: {//...},
  resolve: {
    extensions: ['.tsx', '.ts', '.js', '.json'],
  },
}
```

ä¸€æ¥ä¿®æ”¹äº† `entry` ä¸­çš„å…¥å£æ–‡ä»¶åç¼€ï¼Œå˜ä¸º `.tsx` ã€‚

äºŒæ¥æ–°å¢äº† `resolve` å±æ€§ï¼Œåœ¨ [extensions](https://webpack.js.org/configuration/resolve/#resolveextensions) ä¸­å®šä¹‰å¥½æ–‡ä»¶åç¼€ååï¼Œåœ¨ import æŸä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸Šé¢ä»£ç ï¼š

```
import App from './app'
```

å°±å¯ä»¥ä¸åŠ æ–‡ä»¶åç¼€åäº†ã€‚webpack ä¼šæŒ‰ç…§å®šä¹‰çš„åç¼€åçš„é¡ºåºä¾æ¬¡å¤„ç†æ–‡ä»¶ï¼Œæ¯”å¦‚ä¸Šæ–‡é…ç½® `['.tsx', '.ts', '.js', '.json']` ï¼Œwebpack ä¼šå…ˆå°è¯•åŠ ä¸Š `.tsx` åç¼€ï¼Œçœ‹æ‰¾å¾—åˆ°æ–‡ä»¶ä¸ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±ä¾æ¬¡å°è¯•è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨é…ç½®æ—¶å°½é‡æŠŠæœ€å¸¸ç”¨åˆ°çš„åç¼€æ”¾åˆ°æœ€å‰é¢ï¼Œå¯ä»¥ç¼©çŸ­æŸ¥æ‰¾æ—¶é—´ã€‚

è¿™ä¸ªæ—¶å€™å†è¿›è¡Œ `npm run start` ï¼Œé¡µé¢å°±èƒ½æ­£ç¡®è¾“å‡ºäº†ã€‚

æ—¢ç„¶éƒ½ç”¨ä¸Šäº† Typescriptï¼Œé‚£ React çš„ç±»å‹å£°æ˜è‡ªç„¶ä¸èƒ½å°‘ï¼Œå®‰è£…å®ƒä»¬ï¼š

```
npm install @types/react @types/react-dom -D
```

### 3. tsconfig.json è¯¦è§£

æ¯ä¸ª Typescript éƒ½ä¼šæœ‰ä¸€ä¸ª `tsconfig.json` æ–‡ä»¶ï¼Œå…¶ä½œç”¨ç®€å•æ¥è¯´å°±æ˜¯ï¼š

- ç¼–è¯‘æŒ‡å®šçš„æ–‡ä»¶
- å®šä¹‰äº†ç¼–è¯‘é€‰é¡¹

ä¸€èˆ¬éƒ½ä¼šæŠŠ `tsconfig.json` æ–‡ä»¶æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹ä»£ç æ¥ç”Ÿæˆæ­¤æ–‡ä»¶ï¼š

```
npx tsc --init
```

æ‰“å¼€ç”Ÿæˆçš„ `tsconfig.json` ï¼Œæœ‰å¾ˆå¤šæ³¨é‡Šå’Œå‡ ä¸ªé…ç½®ï¼Œæœ‰ç‚¹ç‚¹ä¹±ï¼Œæˆ‘ä»¬å°±å°†è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹åˆ æ‰å§ï¼Œé‡æ–°è¾“å…¥æˆ‘ä»¬è‡ªå·±çš„é…ç½®ã€‚

æ­¤æ–‡ä»¶ä¸­ç°åœ¨çš„ä»£ç ä¸ºï¼š

```
{
  "compilerOptions": {
    // åŸºæœ¬é…ç½®
    "target": "ES5",                          // ç¼–è¯‘æˆå“ªä¸ªç‰ˆæœ¬çš„ es
    "module": "ESNext",                       // æŒ‡å®šç”Ÿæˆå“ªä¸ªæ¨¡å—ç³»ç»Ÿä»£ç 
    "lib": ["dom", "dom.iterable", "esnext"], // ç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦å¼•å…¥çš„åº“æ–‡ä»¶çš„åˆ—è¡¨
    "allowJs": true,                          // å…è®¸ç¼–è¯‘ js æ–‡ä»¶
    "jsx": "react",                           // åœ¨ .tsx æ–‡ä»¶é‡Œæ”¯æŒ JSX
    "isolatedModules": true,
    "strict": true,                           // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹

    // æ¨¡å—è§£æé€‰é¡¹
    "moduleResolution": "node",               // æŒ‡å®šæ¨¡å—è§£æç­–ç•¥
    "esModuleInterop": true,                  // æ”¯æŒ CommonJS å’Œ ES æ¨¡å—ä¹‹é—´çš„äº’æ“ä½œæ€§
    "resolveJsonModule": true,                // æ”¯æŒå¯¼å…¥ json æ¨¡å—
    "baseUrl": "./",                          // æ ¹è·¯å¾„
    "paths": {																// è·¯å¾„æ˜ å°„ï¼Œä¸ baseUrl å…³è”
      "Src/*": ["src/*"],
      "Components/*": ["src/components/*"],
      "Utils/*": ["src/utils/*"]
    },

    // å®éªŒæ€§é€‰é¡¹
    "experimentalDecorators": true,           // å¯ç”¨å®éªŒæ€§çš„ESè£…é¥°å™¨
    "emitDecoratorMetadata": true,            // ç»™æºç é‡Œçš„è£…é¥°å™¨å£°æ˜åŠ ä¸Šè®¾è®¡ç±»å‹å…ƒæ•°æ®

    // å…¶ä»–é€‰é¡¹
    "forceConsistentCasingInFileNames": true, // ç¦æ­¢å¯¹åŒä¸€ä¸ªæ–‡ä»¶çš„ä¸ä¸€è‡´çš„å¼•ç”¨
    "skipLibCheck": true,                     // å¿½ç•¥æ‰€æœ‰çš„å£°æ˜æ–‡ä»¶ï¼ˆ *.d.tsï¼‰çš„ç±»å‹æ£€æŸ¥
    "allowSyntheticDefaultImports": true,     // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥
    "noEmit": true														// åªæƒ³ä½¿ç”¨tscçš„ç±»å‹æ£€æŸ¥ä½œä¸ºå‡½æ•°æ—¶ï¼ˆå½“å…¶ä»–å·¥å…·ï¼ˆä¾‹å¦‚Babelå®é™…ç¼–è¯‘ï¼‰æ—¶ï¼‰ä½¿ç”¨å®ƒ
  },
  "exclude": ["node_modules"]
}
```

`compilerOptions` ç”¨æ¥é…ç½®ç¼–è¯‘é€‰é¡¹ï¼Œå…¶å®Œæ•´çš„å¯é…ç½®çš„å­—æ®µä»[è¿™é‡Œ](https://www.tslang.cn/docs/handbook/compiler-options.html)å¯æŸ¥è¯¢åˆ°ï¼› `exclude` æŒ‡å®šäº†ä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿™é‡Œæ˜¯åªè¦æ˜¯ `node_modules` ä¸‹é¢çš„æˆ‘ä»¬éƒ½ä¸è¿›è¡Œç¼–è¯‘ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `include` å»æŒ‡å®šéœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼Œä¸¤ä¸ªç”¨ä¸€ä¸ªå°±è¡Œã€‚

æ¥ä¸‹æ¥å¯¹ `compilerOptions` é‡è¦é…ç½®åšä¸€ä¸‹ç®€å•çš„è§£é‡Šï¼š

- `target` å’Œ `module` ï¼šè¿™ä¸¤ä¸ªå‚æ•°å®é™…ä¸Šæ²¡æœ‰ç”¨ï¼Œå®ƒæ˜¯é€šè¿‡ `tsc` å‘½ä»¤æ‰§è¡Œæ‰èƒ½ç”Ÿæˆå¯¹åº”çš„ es5 ç‰ˆæœ¬çš„ js è¯­æ³•ï¼Œä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬å·²ç»ä½¿ç”¨ babel å»ç¼–è¯‘æˆ‘ä»¬çš„ ts è¯­æ³•äº†ï¼Œæ ¹æœ¬ä¸ä¼šä½¿ç”¨ `tsc` å‘½ä»¤ï¼Œæ‰€ä»¥å®ƒä»¬åœ¨æ­¤çš„ä½œç”¨å°±æ˜¯è®©ç¼–è¾‘å™¨æä¾›é”™è¯¯æç¤ºã€‚
- `isolatedModules` ï¼šå¯ä»¥æä¾›é¢å¤–çš„ä¸€äº›è¯­æ³•æ£€æŸ¥ã€‚

æ¯”å¦‚ä¸èƒ½é‡å¤ `export` ï¼š

```
import { add } from './utils'
add()

export { add } // ä¼šæŠ¥é”™
```

æ¯”å¦‚æ¯ä¸ªæ–‡ä»¶å¿…é¡»æ˜¯ä½œä¸ºç‹¬ç«‹çš„æ¨¡å—ï¼š

```
const print = (str: string) => { console.log(str) } // ä¼šæŠ¥é”™ï¼Œæ²¡æœ‰æ¨¡å—å¯¼å‡º

// å¿…é¡»æœ‰ export
export print = (str: string) => { 
  console.log(str) 
}
```

- `esModuleInterop` ï¼šå…è®¸æˆ‘ä»¬å¯¼å…¥ç¬¦åˆ es6 æ¨¡å—è§„èŒƒçš„ CommonJS æ¨¡å—ï¼Œä¸‹é¢åšç®€å•è¯´æ˜ã€‚

æ¯”å¦‚æŸä¸ªåŒ…ä¸º `test.js` ï¼š

```
// node_modules/test/index.js
exports = test
```

ä½¿ç”¨æ­¤åŒ…ï¼š

```
// æˆ‘ä»¬é¡¹ç›®ä¸­çš„ app.tsx
import * as test from 'test'
test()
```

å¼€å¯ `esModuleInterop` åï¼Œç›´æ¥å¯å¦‚ä¸‹ä½¿ç”¨ï¼š

```
import test from 'test'
test()
```

æ¥ä¸‹æ¥æˆ‘ä»¬ç€é‡è®²ä¸‹ `baseUrl` å’Œ `paths` ï¼Œè¿™ä¸¤ä¸ªé…ç½®çœŸçš„æ˜¯æå‡å¼€å‘æ•ˆç‡çš„åˆ©å™¨å•Šï¼å®ƒçš„ä½œç”¨å°±æ˜¯å¿«é€Ÿå®šä½æŸä¸ªæ–‡ä»¶ï¼Œé˜²æ­¢å¤šå±‚ `../../../` è¿™ç§å†™æ³•æ‰¾æŸä¸ªæ¨¡å—ï¼æ¯”å¦‚æˆ‘ç°åœ¨çš„ `src/` ä¸‹æœ‰è¿™ä¹ˆå‡ ä¸ªæ–‡ä»¶ï¼š

[![image.png](https://camo.githubusercontent.com/1a1ffbac3e4d0f245e4796e6788b654a7f71d180b9e378103f02ca8b08c2e301/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363132393236353439362d61643363373733622d666362362d343161332d383234312d6437656134643938316364632e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323237266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343534266f726967696e57696474683d3531382673697a653d3333303239267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323539)](https://camo.githubusercontent.com/1a1ffbac3e4d0f245e4796e6788b654a7f71d180b9e378103f02ca8b08c2e301/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363132393236353439362d61643363373733622d666362362d343161332d383234312d6437656134643938316364632e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323237266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343534266f726967696e57696474683d3531382673697a653d3333303239267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323539)

æˆ‘åœ¨ `app.js` ä¸­è¦å¼•å…¥ `src/components` ä¸‹çš„ `Header` ç»„ä»¶ï¼Œä»¥å¾€çš„æ–¹å¼æ˜¯ï¼š

```
import Header from './components/Header'
```

å¤§å®¶å¯èƒ½è§‰å¾—ï¼Œè›®å¥½çš„å•Šï¼Œæ²¡æ¯›ç—…ã€‚ä½†æ˜¯æˆ‘è¿™é‡Œæ˜¯å› ä¸º `app.tsx` å’Œ `components` æ˜¯åŒçº§çš„ï¼Œè¯•æƒ³ä¸€ä¸‹å¦‚æœä½ åœ¨æŸä¸ªå±‚çº§å¾ˆæ·±çš„æ–‡ä»¶é‡Œè¦ç”¨ `components` ï¼Œé‚£å°±æ˜¯ç–¯ç‹‚ `../../../..` äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å­¦ä¼šä½¿ç”¨å®ƒï¼Œå¹¶ç»“åˆ webpack çš„ `resolve.alias` ä½¿ç”¨æ›´é¦™ã€‚

ä½†æ˜¯æƒ³ç”¨å®ƒéº»çƒ¦è¿˜è›®å¤šçš„ï¼Œå’±ä¸€æ­¥æ­¥æ‹†è§£å®ƒã€‚

é¦–å…ˆ `baseUrl` ä¸€å®šè¦è®¾ç½®æ­£ç¡®ï¼Œæˆ‘ä»¬çš„ `tsconfig.json` æ˜¯æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ï¼Œé‚£ä¹ˆ `baseUrl` è®¾ä¸º `./` å°±ä»£è¡¨äº†é¡¹ç›®æ ¹è·¯å¾„ã€‚äºæ˜¯ï¼Œ `paths` ä¸­çš„æ¯ä¸€é¡¹è·¯å¾„æ˜ å°„ï¼Œæ¯”å¦‚ `["src/*"]` å…¶å®å°±æ˜¯ç›¸å¯¹æ ¹è·¯å¾„ã€‚

å¦‚æœå¤§å®¶åƒä¸Šé¢ä¸€æ ·é…ç½®äº†ï¼Œå¹¶è‡ªå·±å°è¯•ç”¨ä»¥ä¸‹æ–¹å¼å¼€å§‹è¿›è¡Œæ¨¡å—çš„å¼•å…¥ï¼š

```
import Header from 'Components/Header'
```

å› ä¸º eslint çš„åŸå› ï¼Œæ˜¯ä¼šæŠ¥é”™çš„ï¼š

[![image.png](https://camo.githubusercontent.com/0b303533deadab3529fb07f9af7fa64c8e04cc9d25b7855dc2fa1e18d3412f21/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363132393633393739352d33383132656563632d613338662d343131322d396531652d3363653662353633386666382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323231266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343432266f726967696e57696474683d313638322673697a653d313138343432267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383431)](https://camo.githubusercontent.com/0b303533deadab3529fb07f9af7fa64c8e04cc9d25b7855dc2fa1e18d3412f21/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363132393633393739352d33383132656563632d613338662d343131322d396531652d3363653662353633386666382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323231266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343432266f726967696e57696474683d313638322673697a653d313138343432267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383431)

è¿™ä¸ªæ—¶å€™éœ€è¦æ”¹ `.eslintrc.js` æ–‡ä»¶çš„é…ç½®äº†ï¼Œé¦–å…ˆå¾—å®‰è£… [eslint-import-resolver-typescript](https://github.com/alexgorbatchev/eslint-import-resolver-typescript) ï¼š

```
npm install eslint-import-resolver-typescript -D
```

ç„¶ååœ¨ `.eslintrc.js` æ–‡ä»¶çš„ `setting` å­—æ®µä¿®æ”¹ä¸ºä»¥ä¸‹ä»£ç ï¼š

```
settings: {
  'import/resolver': {
    node: {
      extensions: ['.tsx', '.ts', '.js', '.json'],
    },
    typescript: {},
  },
},
```

æ˜¯çš„ï¼Œåªéœ€è¦æ·»åŠ  `typescript: {}` å³å¯ï¼Œè¿™æ—¶å€™å†å»çœ‹å·²ç»æ²¡æœ‰æŠ¥é”™äº†ã€‚
ä½†æ˜¯ä¸Šé¢æˆ‘ä»¬å®Œæˆçš„å·¥ä½œä»…ä»…æ˜¯å¯¹äºç¼–è¾‘å™¨æ¥è¯´å¯è¯†åˆ«è¿™ä¸ªè·¯å¾„æ˜ å°„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `webpack.common.js` ä¸­çš„ `resolve.alias` æ·»åŠ ç›¸åŒçš„æ˜ å°„è§„åˆ™é…ç½®ï¼š

```
module.exports = {
  // other...
  resolve: {
    extensions: ['.tsx', '.ts', '.js', '.json'],
    alias: {
      'Src': resolve(PROJECT_PATH, './src'),
      'Components': resolve(PROJECT_PATH, './src/components'),
      'Utils': resolve(PROJECT_PATH, './src/utils'),
    }
  },
  module: {//...},
  plugins: [//...],
}
```

ç°åœ¨ï¼Œä¸¤è€…ä¸€è‡´å°±å¯ä»¥æ­£å¸¸å¼€å‘å’Œæ‰“åŒ…äº†ï¼å¯èƒ½æœ‰çš„å°ä¼™ä¼´ä¼šç–‘æƒ‘ï¼Œæˆ‘åªé…ç½® webpack ä¸­çš„ alias ä¸å°±è¡Œäº†å—ï¼Ÿè™½ç„¶å¼€å‘æ—¶ä¼šæœ‰æŠ¥çº¢ï¼Œä½†å¹¶ä¸ä¼šå½±å“åˆ°ä»£ç çš„æ­£ç¡®ï¼Œæ¯•ç«Ÿæ‰“åŒ…æˆ–å¼€å‘æ—¶ webpack éƒ½ä¼šè¿›è¡Œè·¯å¾„æ˜ å°„æ›¿æ¢ã€‚æ˜¯çš„ï¼Œçš„ç¡®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯åœ¨ `tsconfig.json` ä¸­é…ç½®ï¼Œä¼šç»™æˆ‘ä»¬å¢åŠ æ™ºèƒ½æç¤ºï¼Œæ¯”å¦‚æˆ‘æ‰“å­—æ‰“åˆ° `Com` ï¼Œç¼–è¾‘å™¨å°±ä¼šç»™æˆ‘ä»¬æç¤ºæ­£ç¡®çš„ `Components` ï¼Œè€Œä¸”å…¶ä¸‹é¢çš„æ–‡ä»¶è¿˜ä¼šç»§ç»­æç¤ºã€‚

**å¦‚æœä½ å‚ä¸è¿‡æ¯”è¾ƒåºå¤§ã€æ–‡ä»¶å±‚çº§ä¼šå¾ˆæ·±çš„é¡¹ç›®ä½ å°±èƒ½æ˜ç™½æ™ºèƒ½æç¤ºçœŸçš„å¾ˆé¦™ã€‚**

[![image.png](https://camo.githubusercontent.com/3fb6f9488315e31d3c984136200a34f31be91de6ff4c87a4b64205666ae43515/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363337373132353331352d62316432633133612d623531652d343934382d396436392d3964663263316231363630632e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333038266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d363135266f726967696e57696474683d3639302673697a653d383730363835267374617475733d646f6e65267374796c653d6e6f6e652677696474683d333435)](https://camo.githubusercontent.com/3fb6f9488315e31d3c984136200a34f31be91de6ff4c87a4b64205666ae43515/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363337373132353331352d62316432633133612d623531652d343934382d396436392d3964663263316231363630632e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333038266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d363135266f726967696e57696474683d3639302673697a653d383730363835267374617475733d646f6e65267374796c653d6e6f6e652677696474683d333435)

## æ›´å¤š babel é…ç½®

ä¹‹å‰æˆ‘ä»¬å·²ç»ä½¿ç”¨ babel å»è§£æ react è¯­æ³•å’Œ typescript è¯­æ³•äº†ï¼Œä½†æ˜¯ç›®å‰æˆ‘ä»¬æ‰€åšçš„ä¹Ÿä»…ä»…å¦‚æ­¤ï¼Œä½ åœ¨ä»£ç ä¸­ç”¨åˆ°çš„ ES6+ è¯­æ³•ç¼–è¯‘ä¹‹åä¾ç„¶å…¨éƒ¨ä¿ç•™ï¼Œç„¶è€Œä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½èƒ½æ”¯æŒ ES6+ è¯­æ³•çš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦[@babel/preset-env](https://babeljs.io/docs/en/next/babel-preset-env.html) æ¥åšè¿™ä¸ªè‹¦åŠ›æ´»äº†ï¼Œå®ƒä¼šæ ¹æ®è®¾ç½®çš„ç›®æ ‡æµè§ˆå™¨ç¯å¢ƒï¼ˆbrowserslistï¼‰æ‰¾å‡ºæ‰€éœ€çš„æ’ä»¶å»è½¬è¯‘ ES6+ è¯­æ³•ã€‚æ¯”å¦‚ `const` æˆ– `let` è½¬è¯‘ä¸º `var` ã€‚

ä½†æ˜¯é‡åˆ° `Promise` æˆ– `.includes` è¿™ç§æ–°çš„ es ç‰¹æ€§ï¼Œæ˜¯æ²¡åŠæ³•è½¬è¯‘åˆ° es5 çš„ï¼Œé™¤éæˆ‘ä»¬æŠŠè¿™ä¸­æ–°çš„è¯­è¨€ç‰¹æ€§çš„å®ç°æ³¨å…¥åˆ°æ‰“åŒ…åçš„æ–‡ä»¶ä¸­ï¼Œä¸å°±è¡Œäº†å—ï¼Ÿæˆ‘ä»¬å€ŸåŠ© [@babel/plugin-transform-runtime](https://www.babeljs.cn/docs/babel-plugin-transform-runtime) è¿™ä¸ªæ’ä»¶ï¼Œå®ƒå’Œ `@babel/preset-env` ä¸€æ ·éƒ½èƒ½æä¾› ES æ–°API çš„å«ç‰‡ï¼Œéƒ½å¯å®ç°æŒ‰éœ€åŠ è½½ï¼Œä½†å‰è€…ä¸ä¼šæ±¡æŸ“åŸå‹é“¾ã€‚

å¦å¤–ï¼Œbabel åœ¨ç¼–è¯‘æ¯ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™åœ¨éœ€è¦çš„æ—¶å€™ä¼šæ’å…¥ä¸€äº›è¾…åŠ©å‡½æ•°ä¾‹å¦‚ `_extend` ï¼Œæ¯ä¸€ä¸ªéœ€è¦çš„æ¨¡å—éƒ½ä¼šç”Ÿæˆè¿™ä¸ªè¾…åŠ©å‡½æ•°ï¼Œæ˜¾è€Œæ˜“è§è¿™ä¼šå¢åŠ ä»£ç çš„å†—ä½™ï¼Œ[@babel/plugin-transform-runtime](https://www.babeljs.cn/docs/babel-plugin-transform-runtime) è¿™ä¸ªæ’ä»¶ä¼šå°†æ‰€æœ‰çš„è¾…åŠ©å‡½æ•°éƒ½ä» `@babel/runtime-corejs3` å¯¼å…¥ï¼ˆæˆ‘ä»¬ä¸‹é¢ä½¿ç”¨ corejs3ï¼‰ï¼Œä»è€Œå‡å°‘å†—ä½™æ€§ã€‚

å®‰è£…å®ƒä»¬ï¼š

```
npm install @babel/preset-env @babel/plugin-transform-runtime -D
npm install @babel/runtime-corejs3 -S
```

> æ³¨æ„ï¼š `@babel/runtime-corejs3` çš„å®‰è£…ä¸ºç”Ÿäº§ä¾èµ–ã€‚

ä¿®æ”¹ `.babelre` å¦‚ä¸‹ï¼š

```
{
  "presets": [
    [
      "@babel/preset-env",
      {
        // é˜²æ­¢babelå°†ä»»ä½•æ¨¡å—ç±»å‹éƒ½è½¬è¯‘æˆCommonJSç±»å‹ï¼Œå¯¼è‡´tree-shakingå¤±æ•ˆé—®é¢˜
        "modules": false
      }
    ],
    "@babel/preset-react",
    "@babel/preset-typescript"
  ],
  "plungins": [
    [
      "@babel/plugin-transform-runtime",
      {
        "corejs": {
          "version": 3,
          "proposals": true
        },
        "useESModules": true
      }
    ]
  ]
}
```

okï¼Œæå®šï¼

**åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ react+typescript é¡¹ç›®å¼€å‘ç¯å¢ƒå·²ç»å¯è¡Œäº†ï¼Œå°±æ˜¯è¯´ç°åœ¨å·²ç»å¯ä»¥æ­£å¸¸è¿›è¡Œå¼€å‘äº†ï¼Œä½†æ˜¯é’ˆå¯¹å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬èƒ½åšçš„ä¼˜åŒ–è¿˜æœ‰å¾ˆå¤šï¼Œå¤§å®¶ç»§ç»­åŠ æ²¹ï¼**

## å…¬å…±ï¼ˆcommonï¼‰ç¯å¢ƒä¼˜åŒ–

è¿™éƒ¨åˆ†ä¸»è¦é’ˆå¯¹æ— è®ºå¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒéƒ½éœ€è¦çš„å…¬å…±é…ç½®ä¼˜åŒ–ã€‚

### 1. æ‹·è´å…¬å…±é™æ€èµ„æº

å¤§å®¶æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„å¼€å‘é¡µé¢è¿˜æ˜¯æ²¡æœ‰ icon çš„ï¼Œå°±ä¸‹é¢è¿™ä¸ªä¸œè¥¿ï¼š
[![image.png](https://camo.githubusercontent.com/6d4493b489f3aee6dc5a8e74885e599290c16770e4819c43f8cbf729f63a674c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363336383731393236312d32653939366138362d613563352d346635642d396164382d3334626633653932613863312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d3831266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d313632266f726967696e57696474683d3939342673697a653d3232313833267374617475733d646f6e65267374796c653d6e6f6e652677696474683d343937)](https://camo.githubusercontent.com/6d4493b489f3aee6dc5a8e74885e599290c16770e4819c43f8cbf729f63a674c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363336383731393236312d32653939366138362d613563352d346635642d396164382d3334626633653932613863312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d3831266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d313632266f726967696e57696474683d3939342673697a653d3232313833267374617475733d646f6e65267374796c653d6e6f6e652677696474683d343937)
åƒ `create-react-app` ä¸€æ ·ï¼Œæˆ‘ä»¬å°† `.ico` æ–‡ä»¶æ”¾åˆ° `public/` ç›®å½•ä¸‹ï¼Œæ¯”å¦‚æˆ‘å°±å¤åˆ¶äº†ä¸€ä¸ª `cra` çš„ `favicon.ico` æ–‡ä»¶ï¼Œç„¶ååœ¨æˆ‘ä»¬çš„ `index.html` æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹æ ‡ç­¾ï¼š

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
+   <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React+Typescript å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶</title>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
```

è¿™æ—¶å€™ä½  `npm run build` æ‰“ä¸ªåŒ…ï¼Œæˆ‘ä»¬çœ‹åˆ° `dist` ç›®å½•ä¸‹æ˜¯æ²¡æœ‰ `favicon.ico` æ–‡ä»¶çš„ï¼Œé‚£ä¹ˆ html æ–‡ä»¶ä¸­çš„å¼•å…¥è‚¯å®šå°±æ— æ³•èµ·æ•ˆäº†ã€‚äºæ˜¯æˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªæ‰‹æ®µï¼Œåœ¨æ‰“åŒ…æ—¶èƒ½æŠŠ `public/` æ–‡ä»¶å¤¹ä¸‹çš„é™æ€èµ„æºå¤åˆ¶åˆ°æˆ‘ä»¬æ‰“åŒ…åç”Ÿæˆçš„ `dist` ç›®å½•ä¸­ï¼Œé™¤éä½ æƒ³æ¯æ¬¡æ‰“åŒ…å®Œæ‰‹åŠ¨å¤åˆ¶ï¼Œä¸ç„¶å°±å€ŸåŠ© [copy-webpack-plugin](https://github.com/webpack-contrib/copy-webpack-plugin) å§ï¼

å®‰è£…å®ƒï¼š

```
npm install copy-webpack-plugin -D
```

ä¿®æ”¹ `webpack.common.js` æ–‡ä»¶ï¼Œå¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
const CopyPlugin = require('copy-webpack-plugin')

module.exports = {
	plugins: [
    // å…¶å®ƒ plugin...
  	new CopyPlugin({
      patterns: [
        {
          context: resolve(PROJECT_PATH, './public'),
          from: '*',
          to: resolve(PROJECT_PATH, './dist'),
          toType: 'dir',
        },
      ],
    }),
  ]
}
```

ç„¶åä½ é‡æ–° `npm run start` ï¼Œå†æ¸…ä¸‹é¡µé¢ç¼“å­˜ï¼Œä½ ä¼šçœ‹åˆ°æˆ‘ä»¬çš„å°å›¾æ ‡å°±å‡ºæ¥äº†ï¼Œç°åœ¨ä½ å¯ä»¥æ›¿æ¢æˆä½ è‡ªå·±å–œæ¬¢çš„å›¾æ ‡äº†ã€‚

[![image.png](https://camo.githubusercontent.com/39fd934e8983c91b1c9cdb0192110a9c3de6e94223ff15c584a0bbd0ddb6b272/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363336393535333739372d32373330373333332d346636302d346532392d386436362d3737363835643633353239352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d3732266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d313434266f726967696e57696474683d3934322673697a653d3139393732267374617475733d646f6e65267374796c653d6e6f6e652677696474683d343731)](https://camo.githubusercontent.com/39fd934e8983c91b1c9cdb0192110a9c3de6e94223ff15c584a0bbd0ddb6b272/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363336393535333739372d32373330373333332d346636302d346532392d386436362d3737363835643633353239352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d3732266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d313434266f726967696e57696474683d3934322673697a653d3139393732267374617475733d646f6e65267374796c653d6e6f6e652677696474683d343731)

åŒæ ·åœ°ï¼Œå…¶å®ƒçš„é™æ€èµ„æºæ–‡ä»¶ï¼Œå¤§å®¶åªè¦å¾€ `public/` ç›®å½•ä¸‹ä¸¢ï¼Œæ‰“åŒ…ä¹‹åéƒ½ä¼šè‡ªåŠ¨å¤åˆ¶åˆ° `dist/` ç›®å½•ä¸‹ã€‚

> ç‰¹åˆ«æ³¨æ„âš ï¸ï¼šåœ¨è®²åŸºç¡€é…ç½®é…ç½® html-webpack-plugin æ—¶ï¼Œæ³¨é‡Šä¸­ç‰¹åˆ«å¼ºè°ƒè¿‡è¦é…ç½® `cache: false` ï¼Œå¦‚æœä¸åŠ çš„è¯ï¼Œä½ ä»£ç ä¿®æ”¹ä¹‹ååˆ·æ–°é¡µé¢ï¼Œhtml æ–‡ä»¶ä¸ä¼šå¼•å…¥ä»»ä½•æ‰“åŒ…å‡ºæ¥çš„ js æ–‡ä»¶ï¼Œè‡ªç„¶ä¹Ÿæ²¡æœ‰æ‰§è¡Œä»»ä½• js ä»£ç ï¼Œç‰¹åˆ«å¯æ€•ï¼Œæˆ‘æäº†å¥½ä¹…ï¼ŒæŸ¥äº† `copy-webpack-plugin` å®˜æ–¹ issue æ‰æ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆã€‚

### 2. æ˜¾ç¤ºç¼–è¯‘è¿›åº¦

æˆ‘ä»¬ç°åœ¨æ‰§è¡Œ `npm run start` æˆ– `npm run build` ä¹‹åï¼Œæ§åˆ¶å°æ²¡æœ‰ä»»ä½•ä¿¡æ¯èƒ½å‘Šè¯‰æˆ‘ä»¬ç°åœ¨ç¼–è¯‘çš„è¿›åº¦æ€ä¹ˆæ ·ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œç¼–è¯‘æ‰“åŒ…çš„é€Ÿåº¦å¾€å¾€éœ€è¦å¾ˆä¹…ï¼Œå¦‚æœä¸æ˜¯ç†Ÿæ‚‰æ­¤é¡¹ç›®å°¿æ€§çš„äººï¼ŒåŸºæœ¬éƒ½ä¼šè®¤ä¸ºæ˜¯ä¸æ˜¯å¡ä½äº†ï¼Œä»è€Œæå¤§åœ°å¢å¼ºäº†ç„¦è™‘æ„Ÿã€‚ã€‚ã€‚æ‰€ä»¥ï¼Œæ˜¾ç¤ºæ‰“åŒ…çš„è¿›åº¦æ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™æ˜¯å¯¹å¼€å‘è€…ç§¯æçš„æ­£å‘åé¦ˆã€‚

> åœ¨æˆ‘çœ‹æ¥ï¼Œäººæ´»ç€ï¼Œå¿ƒä¸­å¸Œæœ›çœŸçš„å¾ˆé‡è¦ã€‚

æˆ‘ä»¬å¯ä»¥å€ŸåŠ© [webpackbar](https://github.com/nuxt/webpackbar) æ¥å®Œæˆæ­¤é¡¹ä»»åŠ¡ï¼Œå®‰è£…å®ƒï¼š

```
npm install webpackbar -D
```

åœ¨ `webpack.common.js` å¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
const WebpackBar = require('webpackbar')

module.exports = {
	plugins: [
    // å…¶å®ƒ plugin...
  	new WebpackBar({
      name: isDev ? 'æ­£åœ¨å¯åŠ¨' : 'æ­£åœ¨æ‰“åŒ…',
      color: '#fa8c16',
    }),
  ]
}
```

ç°åœ¨æˆ‘ä»¬æœ¬åœ°èµ·æœåŠ¡è¿˜æ˜¯æ‰“åŒ…éƒ½æœ‰è¿›åº¦å±•ç¤ºäº†ï¼Œæ˜¯ä¸æ˜¯ç‰¹åˆ«èˆ’å¿ƒå‘¢ï¼Ÿæˆ‘çœŸçš„å¾ˆå–œæ¬¢è¿™ä¸ªæ’ä»¶ã€‚

### 3. ç¼–è¯‘æ—¶çš„ Typescirpt ç±»å‹æ£€æŸ¥

æˆ‘ä»¬ä¹‹å‰é…ç½® babel çš„æ—¶å€™è¯´è¿‡ï¼Œä¸ºäº†ç¼–è¯‘é€Ÿåº¦ï¼Œbabel ç¼–è¯‘ ts æ—¶ç›´æ¥å°†ç±»å‹å»é™¤ï¼Œå¹¶ä¸ä¼šå¯¹ ts çš„ç±»å‹åšæ£€æŸ¥ï¼Œæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå¤§å®¶çœ‹æˆ‘ä¹‹å‰åˆ›å»ºçš„ `src/app.tsx` æ–‡ä»¶ä¸‹ï¼Œæˆ‘æ•…æ„è§£æ„å‡ºä¸€ä¸ªäº‹å…ˆæ²¡æœ‰å£°æ˜çš„ç±»å‹ï¼š
[![image.png](https://camo.githubusercontent.com/a37438248be28b536e160a37294fd8a14b908451fa9526b6db847c56c571c772/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363338333032303131362d38333238343266392d356238662d346564322d383930352d3934636435393631326463312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333731266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d373432266f726967696e57696474683d313630342673697a653d313339383538267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383032)](https://camo.githubusercontent.com/a37438248be28b536e160a37294fd8a14b908451fa9526b6db847c56c571c772/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363338333032303131362d38333238343266392d356238662d346564322d383930352d3934636435393631326463312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333731266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d373432266f726967696e57696474683d313630342673697a653d313339383538267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383032)
å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘å°è¯•è§£æ„çš„ `wrong` æ˜¯æ²¡æœ‰åœ¨æˆ‘ä»¬çš„ `IProps` ä¸­å£°æ˜çš„ï¼Œåœ¨ç¼–è¾‘å™¨ä¸­è‚¯å®šä¼šæŠ¥é”™çš„ï¼Œä½†æ˜¯é‡ç‚¹æ˜¯ï¼Œåœ¨æŸä¸€åˆ»æŸä¸€ä¸ªäººæŸç§æƒ…å†µä¸‹å°±æ˜¯çŠ¯äº†è¿™æ ·çš„é”™è¯¯ï¼Œè€Œå®ƒæ²¡æœ‰å»å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥æ‰‹è¿™ä¸ªé¡¹ç›®ä¹‹åï¼Œå¹¶ä¸çŸ¥é“æœ‰è¿™ä¹ˆä¸ªé—®é¢˜ï¼Œç„¶åæœ¬åœ°å¼€å‘æˆ–æ‰“åŒ…æ—¶ï¼Œä¾ç„¶å¯ä»¥æ­£å¸¸è¿›è¡Œï¼Œè¿™å®Œå…¨ä¸§å¤±äº† typescript ç±»å‹å£°æ˜æ‰€å¸¦æ¥çš„ä¼˜åŠ¿ä»¥åŠå¸¦æ¥äº†é‡å¤§çš„éšæ€§ bugï¼

æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© [fork-ts-checker-webpack-plugin](https://github.com/TypeStrong/fork-ts-checker-webpack-plugin#typescript-options) ï¼Œåœ¨æˆ‘ä»¬æ‰“åŒ…æˆ–å¯åŠ¨æœ¬åœ°æœåŠ¡æ—¶ç»™äºˆé”™è¯¯æç¤ºï¼Œé‚£å°±å®‰è£…å®ƒå§ï¼š

```
npm install fork-ts-checker-webpack-plugin -D
```

åœ¨ `webpack.common.js` ä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
const ForkTsCheckerWebpackPlugin = require('fork-ts-checker-webpack-plugin')

module.exports = {
	plugins: [
    // å…¶å®ƒ plugin...
  	new ForkTsCheckerWebpackPlugin({
      typescript: {
        configFile: resolve(PROJECT_PATH, './tsconfig.json'),
      },
    }),
  ]
}
```

ç°åœ¨ï¼Œæˆ‘ä»¬æ‰§è¡Œ `npm run build` çœ‹çœ‹ï¼Œä¼šæœ‰ä»¥ä¸‹é”™è¯¯æç¤ºï¼š

[![image.png](https://camo.githubusercontent.com/9c19f444d8285a1dcebc8ac03b5c2ec63115c6b6d6e05b0a8b42de733df1b77d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363338333532373434372d39623130616463322d663232632d343235622d393863642d3239663461386663646265352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333830266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d373630266f726967696e57696474683d313830342673697a653d313532393433267374617475733d646f6e65267374796c653d6e6f6e652677696474683d393032)](https://camo.githubusercontent.com/9c19f444d8285a1dcebc8ac03b5c2ec63115c6b6d6e05b0a8b42de733df1b77d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363338333532373434372d39623130616463322d663232632d343235622d393863642d3239663461386663646265352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333830266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d373630266f726967696e57696474683d313830342673697a653d313532393433267374617475733d646f6e65267374796c653d6e6f6e652677696474683d393032)

å‘ç°é—®é¢˜ä¹‹åæˆ‘ä»¬å°±å¯ä»¥å»è§£å†³å®ƒäº†ï¼Œè€Œä¸æ˜¯å•¥éƒ½ä¸çŸ¥é“ä»»ç”±å…¶éšæ€§ bug å­˜åœ¨ã€‚

### 4. åŠ å¿«äºŒæ¬¡ç¼–è¯‘é€Ÿåº¦

è¿™é‡Œæ‰€è¯´çš„â€œäºŒæ¬¡â€æ„æ€ä¸ºé¦–æ¬¡æ„å»ºä¹‹åçš„æ¯ä¸€æ¬¡æ„å»ºã€‚

æœ‰ä¸€ä¸ªç¥å™¨èƒ½å¤§å¤§æé«˜äºŒæ¬¡ç¼–è¯‘é€Ÿåº¦ï¼Œå®ƒä¸ºç¨‹åºä¸­çš„æ¨¡å—ï¼ˆå¦‚ lodashï¼‰æä¾›äº†ä¸€ä¸ªä¸­é—´ç¼“å­˜ï¼Œæ”¾åˆ°æœ¬é¡¹ç›® `node_modules/.cache/hard-source` ä¸‹ï¼Œå°±æ˜¯ [hard-source-webpack-plugin](https://github.com/mzgoddard/hard-source-webpack-pluginhttps://github.com/mzgoddard/hard-source-webpack-plugin) ï¼Œé¦–æ¬¡ç¼–è¯‘æ—¶ä¼šè€—è´¹ç¨å¾®æ¯”åŸæ¥å¤šä¸€ç‚¹çš„æ—¶é—´ï¼Œå› ä¸ºå®ƒè¦è¿›è¡Œä¸€ä¸ªç¼“å­˜å·¥ä½œï¼Œä½†æ˜¯å†ä¹‹åçš„æ¯ä¸€æ¬¡æ„å»ºéƒ½ä¼šå˜å¾—å¿«å¾ˆå¤šï¼æˆ‘ä»¬å…ˆæ¥å®‰è£…å®ƒï¼š

```
npm install hard-source-webpack-plugin -D
```

åœ¨ `webpack.common.js` ä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
const HardSourceWebpackPlugin = require('hard-source-webpack-plugin')

module.exports = {
	plugins: [
    // å…¶å®ƒ plugin...
  	new HardSourceWebpackPlugin(),
  ]
}
```

è¿™æ—¶å€™æˆ‘ä»¬æ‰§è¡Œä¸¤æ¬¡ `npm run start` æˆ– `npm run build` ï¼Œçœ‹çœ‹èŠ±è´¹æ—¶é—´å¯¹æ¯”å›¾ï¼š

[![image.png](https://camo.githubusercontent.com/d90b7757c595df141bdc056e594cfcf710df32987c4f7fa5f2c15dd10d64ec8c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363437343936393534302d65653834366334302d323630342d343736312d613935622d3134303138393561626534372e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333638266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d373336266f726967696e57696474683d3630362673697a653d3931393537267374617475733d646f6e65267374796c653d6e6f6e652677696474683d333033)](https://camo.githubusercontent.com/d90b7757c595df141bdc056e594cfcf710df32987c4f7fa5f2c15dd10d64ec8c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363437343936393534302d65653834366334302d323630342d343736312d613935622d3134303138393561626534372e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333638266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d373336266f726967696e57696474683d3630362673697a653d3931393537267374617475733d646f6e65267374796c653d6e6f6e652677696474683d333033)

éšç€é¡¹ç›®å˜å¤§ï¼Œè¿™ä¸ªé€Ÿåº¦å·®è·ä¼šæ›´æ˜æ˜¾ã€‚

### 5. external å‡å°‘æ‰“åŒ…ä½“ç§¯

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ— è®ºæ˜¯å¼€å‘è¿˜æ˜¯ç”Ÿäº§ï¼Œéƒ½è¦å…ˆç»è¿‡ webpack å°† reactã€react-dom çš„ä»£ç æ‰“è¿›æˆ‘ä»¬æœ€ç»ˆç”Ÿæˆçš„ä»£ç ä¸­ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå½“è¿™ç§ç¬¬ä¸‰æ–¹åŒ…å˜å¾—è¶Šæ¥ä¹Ÿå¤šçš„æ—¶å€™ï¼Œæœ€åæ‰“å‡ºçš„æ–‡ä»¶å°†ä¼šå¾ˆå¤§ï¼Œç”¨æˆ·æ¯æ¬¡è¿›å…¥é¡µé¢éœ€è¦ä¸‹è½½ä¸€ä¸ªé‚£ä¹ˆå¤§çš„æ–‡ä»¶ï¼Œå¸¦æ¥çš„å°±æ˜¯ç™½å±æ—¶é—´å˜é•¿ï¼Œå°†ä¼šä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¿™ç§ç¬¬ä¸‰æ–¹åŒ…å‰¥ç¦»å‡ºå»æˆ–è€…é‡‡ç”¨ CDN é“¾æ¥å½¢å¼ã€‚

ä¿®æ”¹ `webpack.common.js` ï¼Œå¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = {
	plugins: [
    // å…¶å®ƒ plugin...
  ],
  externals: {
    react: 'React',
    'react-dom': 'ReactDOM',
  },
}
```

åœ¨å¼€å‘æ—¶ï¼Œæˆ‘ä»¬æ˜¯è¿™æ ·ä½¿ç”¨ `react` å’Œ `react-dom` çš„ï¼š

```
import React from 'react'
import ReactDOM from 'react-dom'
```

é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ€ç»ˆæ‰“å®Œçš„åŒ…å·²ç»ä¸æ³¨å…¥è¿™ä¸¤ä¸ªåŒ…çš„ä»£ç äº†ï¼Œè‚¯å®šå¾—æœ‰å¦å¤–çš„æ–¹å¼å°†å…¶å¼•å…¥ï¼Œä¸ç„¶ç¨‹åºéƒ½æ— æ³•æ­£ç¡®è¿è¡Œäº†ï¼Œäºæ˜¯æˆ‘ä»¬æ‰“å¼€ `public/index.html` ï¼Œå¢åŠ ä»¥ä¸‹ CDN é“¾æ¥ï¼š

```
<!DOCTYPE html>
<html lang="en">
  <body>
    <div id="root"></div>
+   <script crossorigin src="https://unpkg.com/react@16.13.1/umd/react.production.min.js"></script>
+   <script crossorigin src="https://unpkg.com/react-dom@16.13.1/umd/react-dom.production.min.js"></script>
  </body>
</html>
```

> å®ƒä»¬å„è‡ªçš„ç‰ˆæœ¬å¯åœ¨ `package.json` å»ç¡®å®šï¼

ç„¶åæˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹æ·»åŠ  externals å‰åçš„æ‰“åŒ…ä½“ç§¯ä¼šå‘ç°ç›¸å·®å¾ˆå¤šã€‚

è¿™ä¸ªæ—¶å€™å¤§å®¶å°±ç–‘æƒ‘äº†ï¼Œæˆ‘æ— è®ºæ·»ä¸æ·»åŠ  externalsï¼Œæœ€ç»ˆéœ€è¦ä¸‹è½½çš„æ–‡ä»¶å¤§å°å…¶å®å¹¶æ²¡æœ‰å˜å•Šï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯ä¸€æ¬¡æ€§ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸€æ¬¡æ€§ä¸‹è½½ä¸‰ä¸ªæ–‡ä»¶ï¼Œå¤§å°éƒ½ä¸å˜ï¼Œæ—¶é—´åº”è¯¥ä¹Ÿä¸å˜å•Šï¼Ÿå…¶å®å®ƒæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- http ç¼“å­˜ï¼šå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ä¸‹è½½åï¼Œä¹‹åæ¯æ¬¡è¿›å…¥é¡µé¢ï¼Œæ ¹æ®æµè§ˆå™¨çš„ç¼“å­˜ç­–ç•¥ï¼Œéƒ½ä¸éœ€è¦å†é‡æ–°ä¸‹è½½ react å’Œ react-domã€‚
- webpack ç¼–è¯‘æ—¶é—´å‡å°‘ï¼šå› ä¸ºå°‘äº†ä¸€æ­¥æ‰“åŒ…ç¼–è¯‘ react å’Œ react-dom çš„å·¥ä½œï¼Œå› æ­¤é€Ÿåº¦ä¼šæå‡ã€‚

> è·Ÿå¤§å®¶è¯´æ˜ä¸‹ï¼Œå…³äº externals çš„é…ç½®ï¼Œå¦‚æœæ˜¯ç”¨åœ¨è‡ªå·±çš„é¡¹ç›®é‡Œï¼Œè¿™æ ·é…å®Œå…¨æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœç”¨è¯¥è„šæ‰‹æ¶å¼€å‘ react ç»„ä»¶ï¼Œå¹¶éœ€è¦å‘å¸ƒåˆ° npm ä¸Šçš„ï¼Œé‚£å¦‚æœä½ æŠŠ react è¿™ç§ä¾èµ–æ²¡æœ‰æ‰“è¿›æœ€ç»ˆè¾“å‡ºçš„åŒ…é‡Œï¼Œé‚£ä¹ˆåˆ«äººä¸‹è½½äº†ä½ è¿™ä¸ªåŒ…å°±éœ€è¦ `npm install react@16.3.1 -S` ï¼Œè¿™å…¶å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œä½ æ— æ³•ä¿è¯åˆ«äººçš„ react ç‰ˆæœ¬å’Œä½ ä¸€è‡´ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¹‹åä¼šå†è¯´ï¼Œç°åœ¨å…ˆæä¸ªé†’ï½

### 6. æŠ½ç¦»å…¬å…±ä»£ç 

æˆ‘ä»¬å…ˆæ¥è®²ä¸€ä¸‹**ES6ä¸­çš„æ‡’åŠ è½½**ã€‚

æ‡’åŠ è½½æ˜¯ä¼˜åŒ–ç½‘é¡µé¦–å±é€Ÿåº¦çš„åˆ©å™¨ï¼Œä¸‹é¢æ¼”ç¤ºä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè®©å¤§å®¶æ˜ç™½æœ‰ä»€ä¹ˆå¥½å¤„ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¼•å…¥æŸä¸ªå·¥å…·å‡½æ•°æ˜¯è¿™æ ·çš„ï¼š

```
import { add } from './math.js';
```

å¦‚æœè¿™æ ·å¼•å…¥ï¼Œåœ¨æ‰“åŒ…ä¹‹åï¼Œ `math.js` è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä»£ç å°±ä¼šæ‰“è¿›æœ€ç»ˆçš„åŒ…é‡Œï¼Œ**å³ä½¿è¿™ä¸ª **`**add**` **æ–¹æ³•ä¸ä¸€å®šåœ¨é¦–å±å°±ä¼šä½¿ç”¨ï¼**é‚£ä¹ˆå¸¦æ¥çš„åå¤„æ˜¾è€Œæ˜“è§ï¼Œ**æˆ‘éƒ½ä¸éœ€è¦åœ¨é¦–å±ä½¿ç”¨å®ƒï¼Œå´è¦æ‰¿æ‹…ä¸‹è½½è¿™ä¸ªç›®å‰çš„å¤šä½™ä»£ç çš„å“åº”é€Ÿåº¦å˜æ…¢çš„åæœï¼**

ä½†æ˜¯ï¼Œå¦‚æœç°åœ¨æˆ‘ä»¬ä»¥ä¸‹é¢çš„æ–¹å¼è¿›è¡Œå¼•å…¥ï¼š

```
import("./math").then(math => {
  console.log(math.add(16, 26))
})
```

webpack å°±ä¼šè‡ªåŠ¨è§£æè¿™ä¸ªè¯­æ³•ï¼Œè¿›è¡Œ**ä»£ç åˆ†å‰²**ï¼Œæ‰“åŒ…å‡ºæ¥ä¹‹åï¼Œ `math.js` ä¸­çš„ä»£ç ä¼šè¢«è‡ªåŠ¨æ‰“æˆä¸€ä¸ªç‹¬ç«‹çš„ chunk æ–‡ä»¶ï¼Œåªæœ‰æˆ‘ä»¬åœ¨é¡µé¢äº¤äº’æ—¶è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œé¡µé¢æ‰ä¼šä¸‹è½½è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œè°ƒç”¨çš„æ–¹æ³•ã€‚

åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ React ç»„ä»¶è¿›è¡Œè¿™æ ·çš„æ‡’åŠ è½½ï¼Œåªéœ€å€ŸåŠ© `React.lazy` å’Œ `React.Suspense` å³å¯ï¼Œä¸‹é¢åšä¸ªç®€å•çš„æ¼”ç¤ºï¼š

`src/app.tsx` ï¼š

```
import React, { Suspense, useState } from 'react'

const ComputedOne = React.lazy(() => import('Components/ComputedOne'))
const ComputedTwo = React.lazy(() => import('Components/ComputedTwo'))

function App() {
  const [showTwo, setShowTwo] = useState<boolean>(false)

  return (
    <div className='app'>
      <Suspense fallback={<div>Loading...</div>}>
        <ComputedOne a={1} b={2} />
        {showTwo && <ComputedTwo a={3} b={4} />}
        <button type='button' onClick={() => setShowTwo(true)}>
          æ˜¾ç¤ºTwo
        </button>
      </Suspense>
    </div>
  )
}

export default App
```

`src/components/ComputedOne/index.tsx` ï¼š

```
import React from 'react'
import './index.scss'
import { add } from 'Utils/math'

interface IProps {
  a: number
  b: number
}

function ComputedOne(props: IProps) {
  const { a, b } = props
  const sum = add(a, b)

  return <p className='computed-one'>{`Hi, I'm computed one, my sum is ${sum}.`}</p>
}

export default ComputedOne
```

`ComputedTwo` ç»„ä»¶ä»£ç ä¸ `ComputedOne` ç»„ä»¶ä»£ç ç›¸ä¼¼ï¼Œ `math.ts` æ˜¯ç®€å•çš„æ±‚å’Œå‡½æ•°ï¼Œå°±ä¸è´´ä»£ç äº†ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ `npm run start` ï¼Œå¹¶æ‰“å¼€æ§åˆ¶å°çš„ Networkï¼Œä¼šå‘ç°ä»¥ä¸‹åŠ¨æ€åŠ è½½ chunk æ–‡ä»¶ï¼š
[![12.gif](https://camo.githubusercontent.com/577fab5e45400eff5bc850339dd54e24d759398566418ddbb004256732931fe0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539363633383430303230392d37306132356632302d363330372d346236392d616361302d3839666561653262303038622e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d343234266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d343234266f726967696e57696474683d3830302673697a653d31363739353036267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)](https://camo.githubusercontent.com/577fab5e45400eff5bc850339dd54e24d759398566418ddbb004256732931fe0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f6769662f3334313331342f313539363633383430303230392d37306132356632302d363330372d346236392d616361302d3839666561653262303038622e67696623616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d343234266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d31322e676966266f726967696e4865696768743d343234266f726967696e57696474683d3830302673697a653d31363739353036267374617475733d646f6e65267374796c653d6e6f6e652677696474683d383030)
ä»¥ä¸Šæ¼”ç¤ºä¾¿æ˜¯å®ç°äº†ç»„ä»¶çš„æ‡’åŠ è½½æ–¹å¼ã€‚æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œä¸€ä¸‹ `npm run build` çœ‹çœ‹æ‰“åŒ…å‡ºæ¥äº†ä»¥ä¸‹æ–‡ä»¶ï¼š
[![image.png](https://camo.githubusercontent.com/fc379540840d5f5c71cf53d38500cd9c58c373033de8a4b26eeef5eb9efc0753/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363630323938333335392d36616566386265372d643262382d343235632d616462312d3261343166653231386635332e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313531266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333032266f726967696e57696474683d3437302673697a653d3235343535267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323335)](https://camo.githubusercontent.com/fc379540840d5f5c71cf53d38500cd9c58c373033de8a4b26eeef5eb9efc0753/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363630323938333335392d36616566386265372d643262382d343235632d616462312d3261343166653231386635332e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313531266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333032266f726967696e57696474683d3437302673697a653d3235343535267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323335)
çº¢çº¿æ¡†ä½çš„æ–‡ä»¶å°±æ˜¯ä¸¤ä¸ªç»„ä»¶ï¼ˆ `ComputedOne` å’Œ `ComputedTwo` ï¼‰çš„ä»£ç ï¼Œè¿™æ ·å¸¦æ¥çš„å¥½å¤„å¾ˆæ˜æ˜¾ï¼š

- è‹¥é€šè¿‡æ‡’åŠ è½½å¼•å…¥çš„ç»„ä»¶ï¼Œè‹¥è¯¥ç»„ä»¶ä»£ç ä¸å˜ï¼Œæ‰“å‡ºçš„åŒ…åä¹Ÿä¸ä¼šå˜ï¼Œéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒåï¼Œå› ä¸ºæµè§ˆå™¨ç¼“å­˜åŸå› ï¼Œç”¨æˆ·ä¸éœ€è¦å†æ¬¡ä¸‹è½½è¯¥æ–‡ä»¶ï¼Œç¼©çŸ­äº†ç½‘é¡µäº¤äº’æ—¶é—´ã€‚
- é˜²æ­¢æŠŠæ‰€æœ‰ç»„ä»¶æ‰“è¿›ä¸€ä¸ªåŒ…ï¼Œé™ä½äº†é¡µé¢é¦–å±æ—¶é—´ã€‚

æ‡’åŠ è½½å¸¦æ¥çš„ä¼˜åŠ¿ä¸å¯å°è§‘ï¼Œæˆ‘ä»¬æ²¿ç€è¿™ä¸ªæ€ç»´æ¨¡å¼å‘å¤–å»¶ä¼¸æ€è€ƒï¼Œ**å¦‚æœæˆ‘ä»¬èƒ½æŠŠä¸€äº›å¼•ç”¨çš„ç¬¬ä¸‰æ–¹åŒ…ä¹Ÿæ‰“æˆå•ç‹¬çš„ chunkï¼Œæ˜¯å¦ä¹Ÿä¼šå…·æœ‰åŒæ ·çš„ä¼˜åŠ¿å‘¢ï¼Ÿ**

[![image.png](https://camo.githubusercontent.com/6e5711632b7fcb2ebdfe34122fb356f4d2d8c14d83f5548378f4f5d505a00b4c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363633393336343035312d61313731373261612d336531342d346134342d616566342d3031376330316239356562642e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323430266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343830266f726967696e57696474683d3438302673697a653d343436303133267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323430)](https://camo.githubusercontent.com/6e5711632b7fcb2ebdfe34122fb356f4d2d8c14d83f5548378f4f5d505a00b4c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363633393336343035312d61313731373261612d336531342d346134342d616566342d3031376330316239356562642e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323430266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d343830266f726967696e57696474683d3438302673697a653d343436303133267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323430)

ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå› ä¸ºç¬¬ä¸‰æ–¹ä¾èµ–åŒ…åªè¦ç‰ˆæœ¬é”å®šï¼Œä»£ç æ˜¯ä¸ä¼šæœ‰å˜åŒ–çš„ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡é¡¹ç›®ä»£ç çš„è¿­ä»£ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°ä¾èµ–åŒ… chunk æ–‡ä»¶çš„æ–‡ä»¶åï¼Œé‚£ä¹ˆå°±ä¼šåŒæ ·å…·æœ‰ä»¥ä¸Šä¼˜åŠ¿ï¼

å…¶å® webpack4 é»˜è®¤å°±å¼€å¯è¯¥åŠŸèƒ½ï¼Œæ‰€ä»¥ä»¥ä¸Šæ¼”ç¤ºçš„æ‡’åŠ è½½æ‰ä¼šæ‰“å‡ºç‹¬ç«‹ chunk æ–‡ä»¶ï¼Œä½†æ˜¯è¦å°†ç¬¬ä¸‰æ–¹ä¾èµ–ä¹Ÿæ‰“å‡ºæ¥ç‹¬ç«‹ chunkï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `webpack.common.js` ä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
module.exports = {
	// other...
  externals: {//...},
  optimization: {
    splitChunks: {
      chunks: 'all',
      name: true,
    },
  },
}
```

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ `npm run build` ï¼Œå°±ä¼šå‘ç°å¤šäº†è¿™ä¹ˆä¸€ä¸ªåŒ…ï¼š

[![image.png](https://camo.githubusercontent.com/5db7aca84538b2ba129296cc42ddbc550e02031841d144195680f41e528e8132/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363634303132313339312d35363365373537392d623266302d343131352d396630372d6530393966383435613036382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313332266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323634266f726967696e57696474683d3531382673697a653d3233363732267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323539)](https://camo.githubusercontent.com/5db7aca84538b2ba129296cc42ddbc550e02031841d144195680f41e528e8132/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363634303132313339312d35363365373537392d623266302d343131352d396630372d6530393966383435613036382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313332266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323634266f726967696e57696474683d3531382673697a653d3233363732267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323539)

è¿™ä¸ª chunk é‡Œæ”¾äº†ä¸€äº›æˆ‘ä»¬æ²¡æœ‰é€šè¿‡ externals å‰”é™¤çš„ç¬¬ä¸‰æ–¹åŒ…çš„ä»£ç ï¼Œè‹¥å¤§å®¶ä¸æƒ³é€šè¿‡ cdn å½¢å¼å¼•å…¥ react å’Œ react-dom ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥è¿›è¡Œç›¸åº”çš„é…ç½®å°†å®ƒä»¬å•ç‹¬æŠ½ç¦»å‡ºæ¥ï¼›å¦ä¸€æ–¹é¢ï¼Œè‹¥æ˜¯å¤šé¡µåº”ç”¨ï¼Œè¿˜éœ€è¦é…ç½®æŠŠå…¬å…±æ¨¡å—ä¹ŸæŠ½ç¦»å‡ºæ¥ï¼Œè¿™é‡Œå› ä¸ºæˆ‘ä»¬æ˜¯æ­å»ºå•é¡µåº”ç”¨å¼€å‘ç¯å¢ƒï¼Œå°±ä¸æ¼”ç¤ºäº†ã€‚

ç»™å¤§å®¶æ¨èä¸¤ä¸ªå­¦ä¹  `splitChunks` é…ç½®çš„åœ°æ–¹ï¼š1. [webpackå®˜æ–¹ä»‹ç»](https://webpack.js.org/plugins/split-chunks-plugin/#splitchunkschunks)ï¼›2. [ç†è§£webpack4.splitChunks](https://www.cnblogs.com/kwzm/p/10314438.html) ã€‚

## å¼€å‘ï¼ˆdevï¼‰ç¯å¢ƒä¼˜åŒ–

è¿™éƒ¨åˆ†ä¸»è¦é’ˆå¯¹æ— è®ºå¼€å‘ç¯å¢ƒè¿˜æ˜¯å¼€å‘ç¯å¢ƒéƒ½éœ€è¦çš„å…¬å…±é…ç½®ä¼˜åŒ–ã€‚

### 1. çƒ­æ›´æ–°

å¦‚æœä½ å¼€å‘æ—¶å¿å—è¿‡ç¨å¾®æ”¹ä¸€ä¸‹ä»£ç ï¼Œé¡µé¢å°±ä¼šé‡æ–°åˆ·æ–°çš„ç—›è‹¦ï¼Œé‚£ä¹ˆçƒ­æ›´æ–°ä¸€å®šå¾—å­¦ä¼šäº†ï¼å¯èƒ½å°é¡¹ç›®ä½ è§‰å¾—æ²¡ä»€ä¹ˆï¼Œéƒ½ä¸€æ ·å¿«ï¼Œä½†æ˜¯é¡¹ç›®å¤§äº†æ¯ä¸€æ¬¡ç¼–è¯‘éƒ½æ˜¯ç›´å‡»å†…å¿ƒçš„ç—›ï¼

[![image.png](https://camo.githubusercontent.com/952fe427f8006ea58fe97b63ea14a78b6befd0b33e413db8f4e41dfdf4dad148/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539373037323935333030342d35643432613237612d383665622d343531612d626330362d3030306264336138353932662e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313230266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323430266f726967696e57696474683d3234302673697a653d3137373136267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313230)](https://camo.githubusercontent.com/952fe427f8006ea58fe97b63ea14a78b6befd0b33e413db8f4e41dfdf4dad148/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539373037323935333030342d35643432613237612d383665622d343531612d626330362d3030306264336138353932662e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313230266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323430266f726967696e57696474683d3234302673697a653d3137373136267374617475733d646f6e65267374796c653d6e6f6e652677696474683d313230)

æ‰€è°“çš„çƒ­æ›´æ–°å…¶å®å°±æ˜¯ï¼Œé¡µé¢åªä¼šå¯¹ä½ æ”¹åŠ¨çš„åœ°æ–¹è¿›è¡Œâ€œå±€éƒ¨åˆ·æ–°â€ï¼Œè¿™ä¸ªè¯´æ³•å¯èƒ½ä¸ä¸¥è°¨ï¼Œä½†æ˜¯æƒ³å¿…å¤§å®¶èƒ½ç†è§£ä»€ä¹ˆæ„æ€ã€‚æ‰“å¼€ `webpack.dev.js` ï¼Œæ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤å³å¯ä½¿ç”¨ï¼š

**ç¬¬ä¸€æ­¥**ï¼šå°† `devServer` ä¸‹çš„ `hot` å±æ€§è®¾ä¸º `true` ã€‚
[![image.png](https://camo.githubusercontent.com/2cee3c355b6b3130c5e4bc72880c1c4dde9c89d0674bcece6517250b12893b6c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539373037333134333631362d38373839346563322d613234302d346661362d383134392d6565333739373862313337352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333138266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d363336266f726967696e57696474683d313132302673697a653d313034313930267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353630)](https://camo.githubusercontent.com/2cee3c355b6b3130c5e4bc72880c1c4dde9c89d0674bcece6517250b12893b6c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539373037333134333631362d38373839346563322d613234302d346661362d383134392d6565333739373862313337352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d333138266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d363336266f726967696e57696474683d313132302673697a653d313034313930267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353630)

**ç¬¬äºŒæ­¥**ï¼šæ–°å¢ `webpack.HotModuleReplacementPlugin` æ’ä»¶ï¼š

```
const webpack = require('webpack')

module.exports = merge(common, {
  devServer: {//...},
  plugins: [
    new webpack.HotModuleReplacementPlugin(),
  ]
})
```

è¿™ä¸ªæ—¶å€™ï¼Œä½  `npm run start` å¹¶å°è¯•æ”¹å˜å±€éƒ¨çš„ä»£ç ï¼Œä¿å­˜åå‘ç°æ•´ä¸ªé¡µé¢è¿˜æ˜¯ä¼šè¿›è¡Œåˆ·æ–°ï¼Œå¦‚æœä½ å¸Œæœ›å¾—åˆ°ä¸Šé¢æ‰€è¯´çš„â€œå±€éƒ¨åˆ·æ–°â€ï¼Œéœ€è¦åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶åŠ ä»¥ä¸‹ä»£ç ã€‚

**ç¬¬ä¸‰æ­¥**ï¼šä¿®æ”¹å…¥å£æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘å°±é€‰æ‹© `src/index.js` ä½œä¸ºæˆ‘çš„å…¥å£æ–‡ä»¶ï¼š

```
import React from 'react'
import ReactDOM from 'react-dom'
import App from './app'

if (module && module.hot) {
  module.hot.accept()
}

ReactDOM.render(<App />, document.querySelector('#root'))
```

è¿™æ—¶å€™å› ä¸º ts çš„åŸå› ä¼šæŠ¥é”™ï¼š
[![image.png](https://camo.githubusercontent.com/0f9d12cfb7966f373f234cfa6d6514efad315dfa0b1d5b30ecf094f8969da266/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539373037353231343737362d63646166336661622d393135392d343766632d616564332d6632363535306362643332302e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d3935266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d313930266f726967696e57696474683d3832302673697a653d3235313236267374617475733d646f6e65267374796c653d6e6f6e652677696474683d343130)](https://camo.githubusercontent.com/0f9d12cfb7966f373f234cfa6d6514efad315dfa0b1d5b30ecf094f8969da266/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539373037353231343737362d63646166336661622d393135392d343766632d616564332d6632363535306362643332302e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d3935266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d313930266f726967696e57696474683d3832302673697a653d3235313236267374617475733d646f6e65267374796c653d6e6f6e652677696474683d343130)
æˆ‘ä»¬åªéœ€è¦å®‰è£… `@types/webpack-env` å³å¯ï¼š

```
npm install @types/webpack-env -D
```

ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨é‡æ–° `npm run start` ï¼Œåœ¨é¡µé¢ä¸Šéšä¾¿ä¿®æ”¹ä¸ªä»£ç çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯ä¸ä¼šæ•´ä½“åˆ·æ–°äº†ï¼Ÿèˆ’æœï½

### 2. è·¨åŸŸè¯·æ±‚

ä¸€èˆ¬æ¥è¯´ï¼Œåˆ©ç”¨ `devServer` æœ¬æ¥å°±æœ‰çš„ `proxy` å­—æ®µå°±èƒ½é…ç½®æ¥å£ä»£ç†è¿›è¡Œè·¨åŸŸè¯·æ±‚ï¼Œä½†æ˜¯ä¸ºäº†ä½¿æ„å»ºç¯å¢ƒçš„ä»£ç ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œæˆ‘ä»¬éœ€è¦å°†é…ç½®æ–‡ä»¶ç‹¬ç«‹å‡ºæ¥ï¼Œå¯ä»¥è¿™æ ·åšï¼š

**ç¬¬ä¸€æ­¥**ï¼šåœ¨ `src/` ä¸‹æ–°å»ºä¸€ä¸ª `setProxy.js` æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```
const proxySettings = {
  // æ¥å£ä»£ç†1
  '/api/': {
    target: 'http://198.168.111.111:3001',
    changeOrigin: true,
  },
  // æ¥å£ä»£ç†2
  '/api-2/': {
    target: 'http://198.168.111.111:3002',
    changeOrigin: true,
    pathRewrite: {
      '^/api-2': '',
    },
  },
  // .....
}

module.exports = proxySettings
```

é…ç½®å®Œæˆï¼Œæˆ‘ä»¬è¦åœ¨ `webpack.dev.js` ä¸­è¦å¼•å…¥ï¼Œå¹¶æ­£ç¡®æ”¾å¤§ `devServer` çš„ `proxy` å­—æ®µã€‚

**ç¬¬äºŒæ­¥**ï¼šç®€å•çš„å¼•å…¥åŠè§£æ„ä¸‹å°±è¡Œï¼š

```
const proxySetting = require('../../src/setProxy.js')

module.exports = merge(common, {
  devServer: {
    //...
    proxy: { ...proxySetting }
  },
})
```

å¯ä»¥äº†ï¼å°±è¿™ä¹ˆç®€å•ï¼æ¥ä¸‹æ¥å®‰è£…æˆ‘ä»¬æœ€å¸¸ç”¨çš„è¯·æ±‚å‘é€åº“ `axios` ï¼š

```
npm install axios -S
```

åœ¨ `src/app.tsx` ä¸­ç®€å•å‘ä¸ªè¯·æ±‚ï¼Œå°±å¯ä»¥è‡ªå·±æµ‹è¯•äº†ï¼Œè¿™é‡Œå¤§å®¶è¦æ‰¾æµ‹è¯•æ¥å£çš„è¯å¯ä»¥æ‰¾ä¸‹ github çš„å…¬ç”¨ apiï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥è¹­å…¬å¸çš„äº†ï½

## ç”Ÿäº§ï¼ˆprodï¼‰ç¯å¢ƒä¼˜åŒ–

è¿™éƒ¨åˆ†ä¸»è¦é’ˆå¯¹æ— è®ºå¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒéƒ½éœ€è¦çš„å…¬å…±é…ç½®ä¼˜åŒ–ã€‚

### 1. æŠ½ç¦»å‡º css æ ·å¼

æŠ½ç¦»å‡ºå•ç‹¬çš„ chunk æ–‡ä»¶çš„ä¼˜åŠ¿åœ¨ä¸Šé¢â€œæŠ½ç¦»å…¬å…±ä»£ç â€ä¸€èŠ‚å·²ç»ç®€å•æè¿°è¿‡ï¼Œç°åœ¨æˆ‘ä»¬å†™çš„æ‰€æœ‰æ ·å¼æ‰“åŒ…åéƒ½æ‰“è¿›äº† js æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¿™æ ·æ”¾ä»»ä¸‹å»ï¼Œè¯¥æ–‡ä»¶ä¼šå˜å¾—è¶Šæ¥è¶Šå¤§ï¼ŒæŠ½ç¦»å‡ºæ ·å¼æ–‡ä»¶åŠ¿åœ¨å¿…è¡Œï¼

å€ŸåŠ© [mini-css-extract-plugin](https://github.com/webpack-contrib/mini-css-extract-plugin) è¿›è¡Œ css æ ·å¼æ‹†åˆ†ï¼Œå…ˆå®‰è£…å®ƒï¼š

```
npm install mini-css-extract-plugin -D
```

åœ¨ `webpack.common.js` æ–‡ä»¶ï¼ˆæ³¨æ„âš ï¸ï¼Œæ˜¯ common æ–‡ä»¶ï¼‰ä¸­å¢åŠ å’Œä¿®æ”¹ä»¥ä¸‹ä»£ç ï¼š

```
const MiniCssExtractPlugin = require('mini-css-extract-plugin')

const getCssLoaders = (importLoaders) => [
  isDev ? 'style-loader' : MiniCssExtractPlugin.loader,
  // ....
]

module.exports = {
	plugins: [
    // å…¶å®ƒ plugin...
    !isDev && new MiniCssExtractPlugin({
      filename: 'css/[name].[contenthash:8].css',
      chunkFilename: 'css/[name].[contenthash:8].css',
      ignoreOrder: false,
    }),
  ]
}
```

æˆ‘ä»¬ä¿®æ”¹äº† `getCssLoaders` è¿™ä¸ªæ–¹æ³•ï¼ŒåŸæ¥æ— è®ºåœ¨ä»€ä¹ˆç¯å¢ƒæˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯ `style-loader` ï¼Œå› ä¸ºåœ¨å¼€å‘ç¯å¢ƒæˆ‘ä»¬ä¸éœ€è¦æŠ½ç¦»ï¼Œäºæ˜¯åšäº†ä¸ªåˆ¤æ–­ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ `MiniCssExtractPlugin.loader` ã€‚

æˆ‘ä»¬éšä¾¿å†™ç‚¹æ ·å¼ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹ `npm run build` ï¼Œå†åˆ° `dist` ç›®å½•ä¸‹çœ‹çœ‹ï¼š

[![image.png](https://camo.githubusercontent.com/cbd3eb5399877633897caa99f968c6697c9869dd903c75be028eb6b728dc7c6f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363732383933353537392d33663836313932332d323764612d346362372d613134652d3265393731343933333438382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313535266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333130266f726967696e57696474683d3438322673697a653d3234313531267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323431)](https://camo.githubusercontent.com/cbd3eb5399877633897caa99f968c6697c9869dd903c75be028eb6b728dc7c6f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363732383933353537392d33663836313932332d323764612d346362372d613134652d3265393731343933333438382e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313535266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d333130266f726967696e57696474683d3438322673697a653d3234313531267374617475733d646f6e65267374796c653d6e6f6e652677696474683d323431)
å¯ä»¥çœ‹åˆ°æˆåŠŸæ‹†å‡ºæ¥äº†æ ·å¼ chunk æ–‡ä»¶ï¼Œäº«ç”¨äº†è‡³å°Šçº§å¾…é‡ï¼

### 2. å»é™¤æ— ç”¨æ ·å¼

æˆ‘åœ¨æ ·å¼æ–‡ä»¶ä¸­æ•…æ„ä¸ºæŸä¸ªä¸ä¼šç”¨åˆ°çš„ç±»ååŠ äº†ä¸ªæ ·å¼ï¼š
[![image.png](https://camo.githubusercontent.com/ab657127273c712c2e287a0fcf10b92dfc9d5f328229fb4f9b43824e0b6985c8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363733303239303632392d64383261663933612d656236342d346430392d383638312d3562386236636466383438322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323938266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d353936266f726967696e57696474683d313130322673697a653d3732333730267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353531)](https://camo.githubusercontent.com/ab657127273c712c2e287a0fcf10b92dfc9d5f328229fb4f9b43824e0b6985c8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363733303239303632392d64383261663933612d656236342d346430392d383638312d3562386236636466383438322e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d323938266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d353936266f726967696e57696474683d313130322673697a653d3732333730267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353531)
ç»“æœæˆ‘æ‰§è¡Œæ‰“åŒ…ï¼Œæ‰¾åˆ°è¿™ä¸ªåˆ†ç¦»å‡ºçš„æ ·å¼æ–‡ä»¶ç‚¹è¿›å»ä¸€çœ‹ï¼š
[![image.png](https://camo.githubusercontent.com/2e794de0019db87afba6408aa5ca4af70f2f5d675ce77a03e7817d84472c3df1/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363733303434393531372d38666366643432362d376562332d343333662d613363362d6263386135646539613736312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313132266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323234266f726967696e57696474683d313431302673697a653d3434303234267374617475733d646f6e65267374796c653d6e6f6e652677696474683d373035)](https://camo.githubusercontent.com/2e794de0019db87afba6408aa5ca4af70f2f5d675ce77a03e7817d84472c3df1/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363733303434393531372d38666366643432362d376562332d343333662d613363362d6263386135646539613736312e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313132266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323234266f726967696e57696474683d313431302673697a653d3434303234267374617475733d646f6e65267374796c653d6e6f6e652677696474683d373035)
å®ƒé»˜è®¤è¿˜æ˜¯ä¿ç•™è¿™ä¸ªæ ·å¼äº†ï¼Œè¿™æ˜¾ç„¶æ˜¯æ— æ„ä¹‰çš„ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•å»é™¤å®ƒï¼Œæ‰€å¹¸æœ‰ [purgecss-webpack-plugin](https://github.com/FullHuman/purgecss/tree/master/packages/purgecss-webpack-plugin) è¿™ä¸ªåˆ©å™¨ï¼Œè®©æˆ‘ä»¬å…ˆå®‰è£…å®ƒåŠè·¯å¾„æŸ¥æ‰¾åˆ©å™¨ [node-glob](https://github.com/isaacs/node-glob)ï¼š

```
npm install purgecss-webpack-plugin glob -D
```

ç„¶ååœ¨ `webpack.prod.js` ä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š

```
const { resolve } = require('path')
const glob = require('glob')
const PurgeCSSPlugin = require('purgecss-webpack-plugin')
const { PROJECT_PATH } = require('../constants')

module.exports = merge(common, {
	// ...
  plugins: [
    new PurgeCSSPlugin({
      paths: glob.sync(`${resolve(PROJECT_PATH, './src')}/**/*.{tsx,scss,less,css}`, { nodir: true }),
    }),
  ],
})
```

ç®€å•è§£é‡Šä¸‹ä¸Šé¢çš„é…ç½®ï¼š
`glob` æ˜¯ç”¨æ¥æŸ¥æ‰¾æ–‡ä»¶è·¯å¾„çš„ï¼Œæˆ‘ä»¬åŒæ­¥æ‰¾åˆ° `src` ä¸‹é¢çš„åç¼€ä¸º `.tsx` ã€ `.(sc|c|le)ss` çš„æ–‡ä»¶è·¯å¾„å¹¶ä»¥æ•°ç»„å½¢å¼è¿”ç»™ `paths` ï¼Œç„¶åè¯¥æ’ä»¶å°±ä¼šå»è§£ææ¯ä¸€ä¸ªè·¯å¾„å¯¹åº”çš„æ–‡ä»¶ï¼Œå°†æ— ç”¨æ ·å¼å»é™¤ï¼› `nodir` å³å»é™¤æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ŒåŠ å¿«å¤„ç†é€Ÿåº¦ã€‚ä¸ºäº†ç›´è§‚ç»™å¤§å®¶çœ‹ä¸‹è·¯å¾„æ•°ç»„ï¼Œæ‰“å°å‡ºæ¥æ˜¯è¿™ä¸ªæ ·å­ï¼š

```
[
  '/Users/RMBP/Desktop/react-ts-quick-starter/src/app.scss',
  '/Users/RMBP/Desktop/react-ts-quick-starter/src/app.tsx',
  '/Users/RMBP/Desktop/react-ts-quick-starter/src/components/ComputedOne/index.scss',
  '/Users/RMBP/Desktop/react-ts-quick-starter/src/components/ComputedOne/index.tsx',
  '/Users/RMBP/Desktop/react-ts-quick-starter/src/components/ComputedTwo/index.scss',
  '/Users/RMBP/Desktop/react-ts-quick-starter/src/components/ComputedTwo/index.tsx',
  '/Users/RMBP/Desktop/react-ts-quick-starter/src/index.tsx'
]
```

> å¤§å®¶è¦æ³¨æ„âš ï¸ï¼šä¸€å®šä¹Ÿè¦æŠŠå¼•å…¥æ ·å¼çš„ `tsx` æ–‡ä»¶çš„è·¯å¾„ä¹Ÿç»™åˆ°ï¼Œä¸ç„¶æ— æ³•è§£æä½ æ²¡æœ‰å“ªä¸ªæ ·å¼ç±»åï¼Œè‡ªç„¶ä¹Ÿæ— æ³•æ­£ç¡®å‰”é™¤æ— ç”¨æ ·å¼äº†ã€‚

ç°åœ¨å†çœ‹çœ‹æˆ‘ä»¬æ‰“åŒ…å‡ºæ¥çš„æ ·å¼æ–‡ä»¶ï¼Œå·²ç»æ²¡æœ‰äº†é‚£ä¸ªå¤šä½™çš„ä»£ç ï¼Œç®€ç›´èˆ’æœï¼

### 3. å‹ç¼© js å’Œ css ä»£ç 

åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œå‹ç¼©ä»£ç æ˜¯å¿…é¡»è¦åšçš„å·¥ä½œï¼Œå…¶æ‰“åŒ…å‡ºçš„æ–‡ä»¶ä½“ç§¯èƒ½å‡å°‘ä¸€å¤§åŠå‘¢ï¼

#### js ä»£ç å‹ç¼©

webpack4 ä¸­ js ä»£ç å‹ç¼©ç¥å™¨ [terser-webpack-plugin](https://github.com/webpack-contrib/terser-webpack-plugin) å¯è°“æ˜¯æ— äººä¸çŸ¥äº†å§ï¼Ÿå®ƒæ”¯æŒå¯¹ ES6 è¯­æ³•çš„å‹ç¼©ï¼Œä¸”åœ¨ `mode` ä¸º `production` æ—¶é»˜è®¤å¼€å¯ï¼Œæ˜¯çš„ï¼Œwebpack4 å®Œå…¨å†…ç½®ï¼Œä¸è¿‡æˆ‘ä»¬ä¸ºäº†èƒ½å¯¹å®ƒè¿›è¡Œä¸€äº›é¢å¤–çš„é…ç½®ï¼Œè¿˜æ˜¯éœ€è¦å…ˆå®‰è£…å®ƒçš„ï¼š

```
npm install terser-webpack-plugin -D
```

åœ¨ `webpack.common.js` æ–‡ä»¶ä¸­çš„ `optimization` å¢åŠ ä»¥ä¸‹é…ç½®ï¼š

```
module.exports = {
	// other...
  externals: {//...},
  optimization: {
    minimize: !isDev,
    minimizer: [
      !isDev && new TerserPlugin({
        extractComments: false,
        terserOptions: {
          compress: { pure_funcs: ['console.log'] },
        }
      })
    ].filter(Boolean),
    splitChunks: {//...},
  },
}
```

é¦–å…ˆå¢åŠ äº† `minimize` ï¼Œå®ƒå¯ä»¥æŒ‡å®šå‹ç¼©å™¨ï¼Œå¦‚æœæˆ‘ä»¬è®¾ä¸º `true` ï¼Œå°±é»˜è®¤ä½¿ç”¨ `terser-webpack-plugin` ï¼Œè®¾ä¸º `false` å³ä¸å‹ç¼©ä»£ç ã€‚æ¥ä¸‹æ¥åœ¨ `minimize` ä¸­åˆ¤æ–­å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œå°±å¼€å¯å‹ç¼©ã€‚

- `extractComments` è®¾ä¸º `false` æ„å‘³ç€å»é™¤æ‰€æœ‰æ³¨é‡Šï¼Œé™¤äº†æœ‰ç‰¹æ®Šæ ‡è®°çš„æ³¨é‡Šï¼Œæ¯”å¦‚ `@preserve` æ ‡è®°ï¼Œåé¢æˆ‘ä»¬ä¼šåˆ©å¦ä¸€ä¸ªæ’ä»¶æ¥ç”Ÿæˆæˆ‘ä»¬çš„è‡ªå®šä¹‰æ³¨é‡Šã€‚
- `pure_funcs` å¯ä»¥è®¾ç½®æˆ‘ä»¬æƒ³è¦å»é™¤çš„å‡½æ•°ï¼Œæ¯”å¦‚æˆ‘å°±å°†ä»£ç ä¸­æ‰€æœ‰ `console.log` å»é™¤ã€‚

#### css ä»£ç å‹ç¼©

åŒæ ·ä¹Ÿæ˜¯è€³ç†Ÿèƒ½è¯¦çš„ css å‹ç¼©æ’ä»¶ [optimize-css-assets-webpack-plugin](https://github.com/NMFR/optimize-css-assets-webpack-plugin) ï¼Œç›´æ¥å®‰è£…å®ƒï¼š

```
npm install optimize-css-assets-webpack-plugin -D
```

åœ¨æˆ‘ä»¬ä¸Šé¢é…ç½®è¿‡çš„ `minimizer` æ–°å¢ä¸€æ®µä»£ç å³å¯ï¼š

```
module.exports = {
  optimization: {
    minimizer: [
      // terser
      !isDev && new OptimizeCssAssetsPlugin()
    ].filter(Boolean),
  },
}
```

### 4. æ·»åŠ åŒ…æ³¨é‡Š

ä¸Šé¢æˆ‘ä»¬é…ç½® terser æ—¶è¯´è¿‡ï¼Œæ‰“åŒ…æ—¶ä¼šæŠŠä»£ç ä¸­æ‰€æœ‰æ³¨é‡Šå»é™¤ï¼Œé™¤äº†ä¸€äº›æœ‰ç‰¹æ®Šæ ‡è®°çš„æ¯”å¦‚ `@preserve` è¿™ç§å°±ä¼šä¿ç•™ã€‚æˆ‘ä»¬å¸Œæœ›åˆ«äººåœ¨ä½¿ç”¨æˆ‘ä»¬å¼€å‘çš„åŒ…æ—¶ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è‡ªå·±å†™å¥½çš„å£°æ˜æ³¨é‡Šï¼ˆæ¯”å¦‚ react å°±æœ‰ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨ webpack å†…ç½®çš„ `BannerPlugin` ï¼Œæ— éœ€å®‰è£…ï¼

åœ¨ `webpack.prod.js` æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼Œå¹¶å†™å…¥è‡ªå·±æƒ³è¦çš„å£°æ˜æ³¨é‡Šå³å¯ï¼š

```
const webpack = require('webpack')

module.exports = merge(common, {
  plugins: [
    // ...
    new webpack.BannerPlugin({
      raw: true,
      banner: '/** @preserve Powered by react-ts-quick-starter (https://github.com/vortesnail/react-ts-quick-starter) */',
    }),
  ],
})
```

è¿™æ—¶å€™æ‰“ä¸ªåŒ…å» `dist` ç›®å½•ä¸‹çœ‹çœ‹å‡ºå£æ–‡ä»¶ï¼š

[![image.png](https://camo.githubusercontent.com/a4c4bde507bcdf63cad20834bac8cfebe08feec20ddaf94a89ed640574c1d81b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363832303930333137302d34383433326431352d666334302d343135372d386463622d3235303162616238313837622e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313033266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323036266f726967696e57696474683d313031362673697a653d3332303833267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353038)](https://camo.githubusercontent.com/a4c4bde507bcdf63cad20834bac8cfebe08feec20ddaf94a89ed640574c1d81b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363832303930333137302d34383433326431352d666334302d343135372d386463622d3235303162616238313837622e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d313033266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d323036266f726967696e57696474683d313031362673697a653d3332303833267374617475733d646f6e65267374796c653d6e6f6e652677696474683d353038)

### 5. tree-shaking

tree-shaking æ˜¯ webpack å†…ç½®çš„æ‰“åŒ…ä»£ç ä¼˜åŒ–ç¥å™¨ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå³ `mode` è®¾ç½®ä¸º `production` æ—¶ï¼Œæ‰“åŒ…åä¼šå°†é€šè¿‡ ES6 è¯­æ³• `import` å¼•å…¥çš„æœªä½¿ç”¨çš„ä»£ç å»é™¤ã€‚ä¸‹é¢æˆ‘ä»¬ç®€å•ä¸¾ä¸ªä¾‹å­ï¼š

åœ¨ `src/utils/math.ts` ä¸­å†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```
export function add(a: number, b: number) {
  console.info('I am add func')
  return a + b
}

export function minus(a: number, b: number) {
  console.info('I am minus func')
  return a - b
}
```

å›åˆ°æˆ‘ä»¬çš„ `src/app.tsx` ä¸­ï¼Œæ¸…é™¤ä»¥å‰çš„å†…å®¹ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```
import React from 'react'
import { add, minus } from 'Utils/math'

function App() {
  return <div className='app'>{add(5, 6)}</div>
}

export default App
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åŒæ—¶å¼•å…¥æ¥ `add` å’Œ `minus` æ–¹æ³•ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨æ—¶åªä½¿ç”¨äº† `add` æ–¹æ³•ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ build ä¸€ä¸‹ï¼Œæ‰“å¼€æ‰“åŒ…åçš„æ–‡ä»¶æœç´¢ `console.info('I am minus func')` æ˜¯æœä¸åˆ°çš„ï¼Œä½†å´æœåˆ°äº† `console.info('I am add func')` æ„å‘³ç€è¿™ä¸ªæ–¹æ³•å› ä¸ºæ²¡æœ‰è¢«ä½¿ç”¨å¯¼è‡´è¢«åˆ é™¤ï¼Œè¿™å°±æ˜¯ tree-shaking çš„ä½œç”¨ï¼

åœ¨æˆ‘å¼€å‘çš„é¡¹ç›®æ—¶ï¼Œæˆ‘ä¸ä¼šå» `package.json` ä¸­é…ç½® `sideEffects: false` ï¼Œå› ä¸ºæˆ‘å†™çš„æ¨¡å—æˆ‘èƒ½ä¿è¯æ²¡æœ‰å‰¯ä½œç”¨ã€‚

è¿™é‡Œå¤§å®¶æœ‰å¿…è¦å›å¿†ä¸€ä¸‹ï¼Œåœ¨ `.babelrc` ä¸­æˆ‘ä»¬åœ¨ `@babel/preset-env` ä¸‹é…ç½®äº† `module: false` ï¼Œç›®çš„åœ¨äºä¸è¦å°† `import` å’Œ `export` å…³é”®å­—å¤„ç†æˆ commonJS çš„æ¨¡å—å¯¼å‡ºå¼•å…¥æ–¹å¼ï¼Œæ¯”å¦‚ `require` ï¼Œè¿™æ ·çš„è¯æ‰èƒ½æ”¯æŒ tree-shakingï¼Œå› ä¸ºæˆ‘ä»¬ä¸Šé¢è¯´äº†ï¼Œåœ¨ ES6 æ¨¡å—å¯¼å…¥æ–¹å¼ä¸‹æ‰ä¼šæœ‰æ•ˆã€‚

### 6. æ‰“åŒ…åˆ†æ

æœ‰æ—¶å€™æˆ‘ä»¬æƒ³çŸ¥é“æ‰“å‡ºçš„åŒ…éƒ½æœ‰å“ªäº›ï¼Œå…·ä½“å¤šå¤§ï¼Œåªéœ€å€ŸåŠ© [webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer) å³å¯ï¼Œæˆ‘ä»¬å®‰è£…å®ƒï¼š

```
npm install webpack-bundle-analyzer -D
```

æ‰“å¼€ `webpack.prod.js` å¢åŠ ä»¥ä¸‹ `plugin` å³å¯ï¼š

```
const webpack = require('webpack')

module.exports = merge(common, {
  plugins: [
    // ...
    new BundleAnalyzerPlugin({
      analyzerMode: 'server',					// å¼€ä¸€ä¸ªæœ¬åœ°æœåŠ¡æŸ¥çœ‹æŠ¥å‘Š
      analyzerHost: '127.0.0.1',			// host è®¾ç½®
      analyzerPort: 8888,							// ç«¯å£å·è®¾ç½®
    }),
  ],
})
```

è¿™æ—¶å€™æˆ‘ä»¬ `npm run build` å®Œæˆåï¼Œå°±ä¼šæ‰“å¼€é»˜è®¤æµè§ˆå™¨ï¼Œå‡ºç°ä¸€ä¸‹ bundle åˆ†æé¡µé¢ï¼š

[![image.png](https://camo.githubusercontent.com/3ad0e5c519f3f1d503893f78f7fff5a23867a820b6a970826e8d733abcd2befc/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363939313038383437332d65663937633137362d393532612d343737652d626165632d3164343032313933653332352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d363339266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d31323738266f726967696e57696474683d323532362673697a653d32383436313038267374617475733d646f6e65267374796c653d6e6f6e652677696474683d31323633)](https://camo.githubusercontent.com/3ad0e5c519f3f1d503893f78f7fff5a23867a820b6a970826e8d733abcd2befc/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3334313331342f313539363939313038383437332d65663937633137362d393532612d343737652d626165632d3164343032313933653332352e706e6723616c69676e3d6c65667426646973706c61793d696e6c696e65266865696768743d363339266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d31323738266f726967696e57696474683d323532362673697a653d32383436313038267374617475733d646f6e65267374796c653d6e6f6e652677696474683d31323633)
å°½æƒ…æƒ³ç”¨å§ï¼ï½

## å‰åŠéƒ¨åˆ†ç»“è¯­

å¤§å®¶è·Ÿç€è¯»åˆ°è¿™é‡Œï¼Œæˆ–è€…è·Ÿç€åšåˆ°è¿™é‡Œï¼Œç›¸ä¿¡å¤§å®¶æ„Ÿè§‰ä¸€å®šä¸è™šæ­¤è¡Œäº†å§ï¼Ÿç°åœ¨å®Œæˆçš„é…ç½®å·²ç»æ˜¯å¯ä»¥è¿›è¡Œæ­£å¸¸çš„å¼€å‘äº†ï¼Œè‡³äºé¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°çš„ `react-router-dom` ã€ `react-redux` ã€ `mobx` ç­‰æ›´å¤šçš„åº“å¤§å®¶å°±æŒ‰ç…§æ­£å¸¸å¼€å‘æ—¶å®‰è£…ä½¿ç”¨å°±å¯ä»¥ã€‚

æ¥ä¸‹æ¥ååŠéƒ¨åˆ†æˆ‘æƒ³ä»¥ä¸¤ä¸ªæ¡ˆä¾‹è®²è§£ä½¿ç”¨ç°ç”¨æˆ‘ä»¬æ­å‡ºæ¥çš„æ¶å­å¼€å‘ React ç»„ä»¶å’Œå¸¸è§„å·¥å…·å¹¶å‘å¸ƒè‡³ npm çš„å…¨æµç¨‹ï¼Œå†…å®¹åˆ†åˆ«å¦‚ä¸‹ï¼š

- åˆ©ç”¨ rollup å’Œ tsc æ‰“åŒ…å·¥å…·åŒ…å¹¶å‘å¸ƒè‡³ npm å…¨æµç¨‹
- åˆ©ç”¨ rollup å’Œ tsc æ‰“åŒ…å¼€å‘çš„ react ç»„ä»¶å¹¶å‘å¸ƒè‡³ npm å…¨æµç¨‹

è¿™ä¸€éƒ¨åˆ†èƒ½è®²çš„ä¸œè¥¿ä¹Ÿæ˜¯æ»¡å¤šçš„ï¼Œæˆ‘ä¼šæ–°èµ·å¦ä¸€ç¯‡æ–‡ç« è®²è§£ï¼Œå¤§å®¶æ•¬è¯·æœŸå¾…å§ï¼è¿™ç¯‡æ–‡ç« æˆ‘å‰åèŠ±äº†å¤§æ¦‚ä¸€ä¸ªæœˆæ—¶é—´ï¼Œéƒ½æ˜¯åˆ©ç”¨å·¥ä½œä¹‹ä½™æ—¶é—´å†™çš„ï¼Œå¸Œæœ›å¤§å®¶èƒ½ç»™äºˆä¸€ç‚¹å°å°çš„é¼“åŠ±ï¼Œåªéœ€è¦ç»™[æˆ‘çš„github/blog](https://github.com/vortesnail/blog)ä¸€ä¸ªå°å°çš„ starâœ¨ å³å¯è®©æˆ‘å…ƒæ°”æ»¡æ»¡ï¼çƒçƒäº†ğŸ™ï¼ï¼ï¼

## .gitattributes

https://git-scm.com/docs/gitattributes